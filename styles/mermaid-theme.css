/* Mermaid Theme Variables */

/* Dark Green Terminal Theme (Dark Mode) */
.dark {
  --mermaid-bg: #0a0e0a;
  --mermaid-primary: #00ff41;
  --mermaid-secondary: #00cc33;
  --mermaid-tertiary: #1a1f1a;
  --mermaid-accent: #ffd700;
  --mermaid-text: #e0ffe0;
  --mermaid-border: #00ff41;
  --mermaid-stroke: #00cc33;
}

/* Light Green Professional Theme (Light Mode) */
:root {
  --mermaid-bg: #ffffff;
  --mermaid-primary: #2d5f2e;
  --mermaid-secondary: #4a8b4d;
  --mermaid-tertiary: #f0f8f0;
  --mermaid-accent: #d4af37;
  --mermaid-text: #1a2e1a;
  --mermaid-border: #4a8b4d;
  --mermaid-stroke: #2d5f2e;
}

/* Mermaid diagram styling */
.dark .mermaid {
  background: transparent !important;
}

.dark .mermaid svg {
  background: transparent !important;
}

/* Flowchart nodes */
.dark .mermaid .node rect,
.dark .mermaid .node circle,
.dark .mermaid .node polygon {
  fill: var(--mermaid-tertiary) !important;
  stroke: var(--mermaid-primary) !important;
  stroke-width: 2px !important;
}

.dark .mermaid .node .label,
.dark .mermaid .nodeLabel {
  color: var(--mermaid-text) !important;
  fill: var(--mermaid-text) !important;
}

/* Decision nodes (diamonds) */
.dark .mermaid .node.decision polygon {
  fill: #1a2a1a !important;
  stroke: var(--mermaid-accent) !important;
  stroke-width: 2px !important;
}

/* Edges/arrows */
.dark .mermaid .edgePath .path {
  stroke: var(--mermaid-stroke) !important;
  stroke-width: 2px !important;
}

.dark .mermaid .edgeLabel {
  background-color: var(--mermaid-bg) !important;
  color: var(--mermaid-text) !important;
  fill: var(--mermaid-text) !important;
}

.dark .mermaid marker {
  fill: var(--mermaid-stroke) !important;
  stroke: var(--mermaid-stroke) !important;
}

/* Git graph */
.dark .mermaid .commit-id,
.dark .mermaid .commit-msg,
.dark .mermaid .branch-label {
  fill: var(--mermaid-text) !important;
  color: var(--mermaid-text) !important;
}

.dark .mermaid .commit {
  stroke: var(--mermaid-primary) !important;
  fill: var(--mermaid-tertiary) !important;
}

/* Sequence diagram */
.dark .mermaid .actor {
  fill: var(--mermaid-tertiary) !important;
  stroke: var(--mermaid-primary) !important;
}

.dark .mermaid .actor-line {
  stroke: var(--mermaid-secondary) !important;
}

.dark .mermaid .messageLine0,
.dark .mermaid .messageLine1 {
  stroke: var(--mermaid-stroke) !important;
}

.dark .mermaid .messageText {
  fill: var(--mermaid-text) !important;
  stroke: none !important;
}

.dark .mermaid .note {
  fill: #1a2a1a !important;
  stroke: var(--mermaid-accent) !important;
}

/* State diagram */
.dark .mermaid .statediagram-state rect {
  fill: var(--mermaid-tertiary) !important;
  stroke: var(--mermaid-primary) !important;
}

.dark .mermaid .statediagram-state .state-title {
  fill: var(--mermaid-text) !important;
}

/* Subgraphs/clusters */
.dark .mermaid .cluster rect {
  fill: rgba(0, 255, 65, 0.05) !important;
  stroke: var(--mermaid-secondary) !important;
  stroke-width: 1px !important;
  stroke-dasharray: 5, 5 !important;
}

.dark .mermaid .cluster .label {
  fill: var(--mermaid-accent) !important;
  font-weight: 600 !important;
}

/* Special highlighted nodes */
.dark .mermaid .node.error rect,
.dark .mermaid .node.error circle {
  fill: #2a1a1a !important;
  stroke: #ff4444 !important;
}

.dark .mermaid .node.success rect,
.dark .mermaid .node.success circle {
  fill: #1a2a1a !important;
  stroke: var(--mermaid-primary) !important;
}

.dark .mermaid .node.warning rect,
.dark .mermaid .node.warning circle {
  fill: #2a2a1a !important;
  stroke: var(--mermaid-accent) !important;
}

/* Code font for better terminal feel */
.dark .mermaid {
  font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace !important;
}

/* Subtle glow effect */
.dark .mermaid .node rect,
.dark .mermaid .node circle {
  filter: drop-shadow(0 0 3px rgba(0, 255, 65, 0.3));
}

/* ================================ */
/* LIGHT MODE STYLES */
/* ================================ */

/* Mermaid diagram styling */
.mermaid {
  background: transparent !important;
}

.mermaid svg {
  background: transparent !important;
}

/* Flowchart nodes - Light */
.mermaid .node rect,
.mermaid .node circle,
.mermaid .node polygon {
  fill: var(--mermaid-tertiary) !important;
  stroke: var(--mermaid-primary) !important;
  stroke-width: 2px !important;
}

.mermaid .node .label,
.mermaid .nodeLabel {
  color: var(--mermaid-text) !important;
  fill: var(--mermaid-text) !important;
}

/* Decision nodes (diamonds) - Light */
.mermaid .node.decision polygon {
  fill: #e8f5e8 !important;
  stroke: var(--mermaid-accent) !important;
  stroke-width: 2px !important;
}

/* Edges/arrows - Light */
.mermaid .edgePath .path {
  stroke: var(--mermaid-stroke) !important;
  stroke-width: 2px !important;
}

.mermaid .edgeLabel {
  background-color: var(--mermaid-bg) !important;
  color: var(--mermaid-text) !important;
  fill: var(--mermaid-text) !important;
}

.mermaid marker {
  fill: var(--mermaid-stroke) !important;
  stroke: var(--mermaid-stroke) !important;
}

/* Git graph - Light */
.mermaid .commit-id,
.mermaid .commit-msg,
.mermaid .branch-label {
  fill: var(--mermaid-text) !important;
  color: var(--mermaid-text) !important;
}

.mermaid .commit {
  stroke: var(--mermaid-primary) !important;
  fill: var(--mermaid-tertiary) !important;
}

/* Sequence diagram - Light */
.mermaid .actor {
  fill: var(--mermaid-tertiary) !important;
  stroke: var(--mermaid-primary) !important;
}

.mermaid .actor-line {
  stroke: var(--mermaid-secondary) !important;
}

.mermaid .messageLine0,
.mermaid .messageLine1 {
  stroke: var(--mermaid-stroke) !important;
}

.mermaid .messageText {
  fill: var(--mermaid-text) !important;
  stroke: none !important;
}

.mermaid .note {
  fill: #fffef0 !important;
  stroke: var(--mermaid-accent) !important;
}

/* State diagram - Light */
.mermaid .statediagram-state rect {
  fill: var(--mermaid-tertiary) !important;
  stroke: var(--mermaid-primary) !important;
}

.mermaid .statediagram-state .state-title {
  fill: var(--mermaid-text) !important;
}

/* Subgraphs/clusters - Light */
.mermaid .cluster rect {
  fill: rgba(77, 139, 77, 0.05) !important;
  stroke: var(--mermaid-secondary) !important;
  stroke-width: 1px !important;
  stroke-dasharray: 5, 5 !important;
}

.mermaid .cluster .label {
  fill: var(--mermaid-accent) !important;
  font-weight: 600 !important;
}

/* Special highlighted nodes - Light */
.mermaid .node.error rect,
.mermaid .node.error circle {
  fill: #ffe8e8 !important;
  stroke: #cc0000 !important;
}

.mermaid .node.success rect,
.mermaid .node.success circle {
  fill: #e8f5e8 !important;
  stroke: var(--mermaid-primary) !important;
}

.mermaid .node.warning rect,
.mermaid .node.warning circle {
  fill: #fffef0 !important;
  stroke: var(--mermaid-accent) !important;
}

/* Code font */
.mermaid {
  font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace !important;
}

/* Subtle shadow for light mode */
.mermaid .node rect,
.mermaid .node circle {
  filter: drop-shadow(0 2px 4px rgba(45, 95, 46, 0.15));
}

/* Force black text color for spans inside diagrams (both modes) */
/* High specificity to override dynamic ID selectors like #R2b9d6 */
.mermaid svg [id] .label text,
.mermaid svg [id] .label span,
.mermaid svg [id] .label p,
.mermaid svg [id] span,
.mermaid svg span,
.mermaid svg .nodeLabel,
.mermaid svg .label text,
.mermaid svg .label span,
.mermaid svg .label p,
.mermaid svg foreignObject span,
.mermaid svg foreignObject div,
.mermaid svg g text,
.mermaid svg g span,
.mermaid svg g p {
  color: #000000 !important;
  fill: #000000 !important;
}

.dark .mermaid svg [id] .label text,
.dark .mermaid svg [id] .label span,
.dark .mermaid svg [id] .label p,
.dark .mermaid svg [id] span,
.dark .mermaid svg span,
.dark .mermaid svg .nodeLabel,
.dark .mermaid svg .label text,
.dark .mermaid svg .label span,
.dark .mermaid svg .label p,
.dark .mermaid svg foreignObject span,
.dark .mermaid svg foreignObject div,
.dark .mermaid svg g text,
.dark .mermaid svg g span,
.dark .mermaid svg g p {
  color: #000000 !important;
  fill: #000000 !important;
}

/* Ultimate override for Mermaid text colors - must be at the end */
/* This overrides even dynamically generated ID selectors */
.mermaid svg g[id] text,
.mermaid svg g[id] span,
.mermaid svg g[id] p,
.mermaid svg g[id] .nodeLabel,
.mermaid svg g[id] .label text,
.mermaid svg g[id] .label span,
.mermaid svg g[id] .label p,
.mermaid svg g[id] foreignObject text,
.mermaid svg g[id] foreignObject span,
.mermaid svg g[id] foreignObject p,
.mermaid svg g[id] foreignObject div {
  color: #000 !important;
  fill: #000 !important;
}

.dark .mermaid svg g[id] text,
.dark .mermaid svg g[id] span,
.dark .mermaid svg g[id] p,
.dark .mermaid svg g[id] .nodeLabel,
.dark .mermaid svg g[id] .label text,
.dark .mermaid svg g[id] .label span,
.dark .mermaid svg g[id] .label p,
.dark .mermaid svg g[id] foreignObject text,
.dark .mermaid svg g[id] foreignObject span,
.dark .mermaid svg g[id] foreignObject p,
.dark .mermaid svg g[id] foreignObject div {
  color: #000 !important;
  fill: #000 !important;
}

/* Global override for ALL text elements in Mermaid diagrams */
/* Place this at the very end to ensure cascade priority */
.mermaid svg * {
  color: #000 !important;
}

.dark .mermaid svg * {
  color: #000 !important;
}

/* Specifically target text rendering elements */
.mermaid svg text,
.mermaid svg tspan,
.mermaid svg foreignObject *,
.mermaid svg g * {
  color: #000 !important;
  fill: #000 !important;
}

.dark .mermaid svg text,
.dark .mermaid svg tspan,
.dark .mermaid svg foreignObject *,
.dark .mermaid svg g * {
  color: #000 !important;
  fill: #000 !important;
}
