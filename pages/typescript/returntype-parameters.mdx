## TypeScript: ReturnType –∏ Parameters ‚Äî –ò–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è –§—É–Ω–∫—Ü–∏–π

–ü—Ä–∏–≤–µ—Ç, –∫–æ–¥–µ—Ä! –°–µ–≥–æ–¥–Ω—è –º—ã —Å —Ç–æ–±–æ–π –Ω—ã—Ä–Ω–µ–º –≤ –≥–ª—É–±–∏–Ω—ã TypeScript, –≥–¥–µ —Ç–∏–ø—ã –º–æ–≥—É—Ç —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ —Å–µ–±–µ –µ—â–µ –±–æ–ª—å—à–µ. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è, –∏ —Ç—ã —Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å: "–ß—Ç–æ –æ–Ω–∞ –≤–µ—Ä–Ω–µ—Ç?" –∏–ª–∏ "–ö–∞–∫–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –µ–π –Ω—É–∂–Ω—ã?". –û–±—ã—á–Ω–æ, —Ç—ã –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –µ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ. –ù–æ —á—Ç–æ, –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —Å–∞–º TypeScript –º–æ–≥ "–ø—Ä–æ—á–∏—Ç–∞—Ç—å" —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö, –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Ç–∏–ø–æ–≤? –í–æ—Ç —Ç—É—Ç –Ω–∞ —Å—Ü–µ–Ω—É –∏ –≤—ã—Ö–æ–¥—è—Ç –Ω–∞—à–∏ –≥–µ—Ä–æ–∏: `ReturnType` –∏ `Parameters`.

–≠—Ç–æ –∫–∞–∫ –∏–º–µ—Ç—å —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–∏–π –∞–ø–ø–∞—Ä–∞—Ç –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π. –¢—ã –ø—Ä–æ—Å–≤–µ—á–∏–≤–∞–µ—à—å —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ–ª—É—á–∞–µ—à—å –¥–µ—Ç–∞–ª–∏ –æ –µ–µ "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ" —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–∏–ø–æ–≤. –≠—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –º–æ—â–Ω–æ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥–∏–±–∫–∏—Ö –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π, –æ–±–µ—Ä—Ç–æ–∫ –∏ —Ñ–∞–±—Ä–∏–∫ —Ñ—É–Ω–∫—Ü–∏–π. –î–∞–≤–∞–π —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è!

### –ß—Ç–æ —Ç–∞–∫–æ–µ `ReturnType<T>`?

`ReturnType<T>` ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ç–∏–ø (utility type), –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ç–∏–ø–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `T`. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ, –∏ —Ç–µ–±–µ –Ω—É–∂–µ–Ω —Ç–∏–ø –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—è –µ–≥–æ –≤—Ä—É—á–Ω—É—é.

**–ú–µ—Ç–∞—Ñ–æ—Ä–∞:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å `ReturnType` –∫–∞–∫ —Ä–æ–±–æ—Ç–∞-—Å–æ–º–µ–ª—å–µ. –¢—ã –¥–∞–µ—à—å –µ–º—É –±—É—Ç—ã–ª–∫—É (—Ñ—É–Ω–∫—Ü–∏—é), –∞ –æ–Ω –Ω–µ –ø—å–µ—Ç –µ–µ, –∞ "–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç" –∏ –≥–æ–≤–æ—Ä–∏—Ç —Ç–µ–±–µ, –∫–∞–∫–æ–π —Ç–∏–ø "–Ω–∞–ø–∏—Ç–∫–∞" –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ (—Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è).

```typescript
// –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è
function calculateSum(a: number, b: number): number {
  return a + b;
}

// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ calculateSum
type SumResult = ReturnType<typeof calculateSum>; // SumResult –±—É–¥–µ—Ç 'number'

const result: SumResult = 100;
// const invalidResult: SumResult = "hello"; // –û—à–∏–±–∫–∞: Type 'string' is not assignable to type 'number'.

console.log(`–¢–∏–ø SumResult: ${typeof result}`); // –í—ã–≤–æ–¥: number

// –ü—Ä–∏–º–µ—Ä 2: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise)
async function fetchData(url: string): Promise<{ data: string; status: number }> {
  // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  return new Promise(resolve => {
    setTimeout(() => {
      resolve({ data: `–î–∞–Ω–Ω—ã–µ —Å ${url}`, status: 200 });
    }, 100);
  });
}

// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ fetchData
type FetchPromiseResult = ReturnType<typeof fetchData>; // FetchPromiseResult –±—É–¥–µ—Ç 'Promise<{ data: string; status: number; }>'

// –ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–µ–Ω –†–ê–ó–í–ï–†–ù–£–¢–´–ô —Ç–∏–ø –∏–∑ Promise, –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:
type UnwrappedFetchResult = Awaited<FetchPromiseResult>; // UnwrappedFetchResult –±—É–¥–µ—Ç '{ data: string; status: number; }'

async function processData() {
  const data: UnwrappedFetchResult = await fetchData("https://api.example.com");
  console.log(`–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: ${data.data}, –°—Ç–∞—Ç—É—Å: ${data.status}`);
}
processData();

// –ü—Ä–∏–º–µ—Ä 3: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
const multiply = (x: number, y: number) => x * y;
type MultiplyResult = ReturnType<typeof multiply>; // MultiplyResult –±—É–¥–µ—Ç 'number'
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ `Parameters<T>`?

`Parameters<T>` ‚Äî —ç—Ç–æ –µ—â–µ –æ–¥–∏–Ω utility type, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `T` –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –≤–∏–¥–µ –∫–æ—Ä—Ç–µ–∂–∞ (tuple type). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è.

**–ú–µ—Ç–∞—Ñ–æ—Ä–∞:** –ï—Å–ª–∏ `ReturnType` ‚Äî —ç—Ç–æ —Å–æ–º–µ–ª—å–µ, —Ç–æ `Parameters` ‚Äî —ç—Ç–æ —Ä–æ–±–æ—Ç-–æ—Ñ–∏—Ü–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π, –≤–∑–≥–ª—è–Ω—É–≤ –Ω–∞ —Ä–µ—Ü–µ–ø—Ç (—Ñ—É–Ω–∫—Ü–∏—é), —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã) –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –µ–º—É –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å.

```typescript
// –ü—Ä–∏–º–µ—Ä 4: –§—É–Ω–∫—Ü–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
function greetUser(firstName: string, lastName: string, age: number): string {
  return `–ü—Ä–∏–≤–µ—Ç, ${firstName} ${lastName}! –¢–µ–±–µ ${age} –ª–µ—Ç.`;
}

// –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ greetUser
type GreetParams = Parameters<typeof greetUser>; // GreetParams –±—É–¥–µ—Ç '[firstName: string, lastName: string, age: number]'

const userDetails: GreetParams = ["–Ø—à–∞", "–ö–æ–¥–µ—Ä", 30];
// greetUser(...userDetails); // –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä spread –¥–ª—è –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏

// const invalidUserDetails: GreetParams = ["–ê–Ω–Ω–∞", 25]; // –û—à–∏–±–∫–∞: Tuple type '[string, string, number]' of length '3' has no element at index '2'.

// –ü—Ä–∏–º–µ—Ä 5: –§—É–Ω–∫—Ü–∏—è —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
function logMessage(message: string, level?: 'info' | 'warn' | 'error'): void {
  const actualLevel = level || 'info';
  console.log(`[${actualLevel.toUpperCase()}] ${message}`);
}

type LogParams = Parameters<typeof logMessage>; // LogParams –±—É–¥–µ—Ç '[message: string, level?: "info" | "warn" | "error" | undefined]'

const simpleLog: LogParams = ["–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –ª–æ–≥–∞"];
const warnLog: LogParams = ["–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫", "warn"];

logMessage(...simpleLog);
logMessage(...warnLog);

// –ü—Ä–∏–º–µ—Ä 6: –§—É–Ω–∫—Ü–∏—è —Å rest-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
function sumAll(...numbers: number[]): number {
  return numbers.reduce((acc, current) => acc + current, 0);
}

type SumAllParams = Parameters<typeof sumAll>; // SumAllParams –±—É–¥–µ—Ç '[numbers: number[]]'

const numbersToAdd: SumAllParams = [[1, 2, 3, 4, 5]]; // –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ 'numbers' —ç—Ç–æ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø–∞ 'number[]'
sumAll(...numbersToAdd[0]); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏

// –≠—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:
// sumAll(1, 2, 3, 4, 5);
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –°—Ü–µ–Ω–∞—Ä–∏–∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

`ReturnType` –∏ `Parameters` —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –º–æ—â–Ω—ã–º–∏, –∫–æ–≥–¥–∞ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö, —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π.

```typescript
// –ü—Ä–∏–º–µ—Ä 7: –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏-–æ–±–µ—Ä—Ç–∫–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
// –≠—Ç–∞ –æ–±–µ—Ä—Ç–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é,
// –∫–æ—Ç–æ—Ä–∞—è –ª–æ–≥–∏—Ä—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º —Ç–∏–ø—ã.

function withLogging<T extends (...args: any[]) => any>(
  func: T,
  funcName: string
): (...args: Parameters<T>) => ReturnType<T> {
  return (...args: Parameters<T>): ReturnType<T> => {
    console.log(`–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ "${funcName}" —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏:`, args);
    const result = func(...args);
    console.log(`–§—É–Ω–∫—Ü–∏—è "${funcName}" –≤–µ—Ä–Ω—É–ª–∞:`, result);
    return result;
  };
}

// –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
function addNumbers(a: number, b: number): number {
  return a + b;
}

// –û–±–µ—Ä—Ç—ã–≤–∞–µ–º –µ–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
const loggedAddNumbers = withLogging(addNumbers, "addNumbers");

const sum = loggedAddNumbers(5, 7); // –í—ã–≤–µ–¥–µ—Ç –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
console.log(`–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: ${sum}`); // –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: 12

// –ü—Ä–∏–º–µ—Ä 8: –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
// –î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –æ–±—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –Ω–æ –º—ã —Ö–æ—Ç–∏–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
// –µ–≥–æ —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.

type EventHandler<E extends Event> = (event: E) => void;

function createButtonClickHandler(
  buttonId: string
): EventHandler<MouseEvent> {
  return (event: MouseEvent) => {
    console.log(`–ö–Ω–æ–ø–∫–∞ ${buttonId} –±—ã–ª–∞ –Ω–∞–∂–∞—Ç–∞!`, event.type);
    // –î–µ–ª–∞–µ–º —á—Ç–æ-—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –¥–ª—è —ç—Ç–æ–π –∫–Ω–æ–ø–∫–∏
  };
}

// –ü—É—Å—Ç—å —É –Ω–∞—Å –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
function registerHandler<T extends EventHandler<any>>(
  elementId: string,
  handler: T
): void {
  const element = document.getElementById(elementId);
  if (element) {
    // –ó–¥–µ—Å—å –º—ã –¥–æ–ª–∂–Ω—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è `Parameters<T>[0]`
    // —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É —Å–æ–±—ã—Ç–∏—é.
    // –í —Ä–µ–∞–ª—å–Ω–æ–º DOM —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ, –Ω–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ —Å–æ–π–¥–µ—Ç.
    element.addEventListener('click', handler as any); // –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø—Ä–∏–º–µ—Ä–∞
  }
}

// –°–æ–∑–¥–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–Ω–æ–ø–∫–∏
const myButtonClickHandler = createButtonClickHandler("myButton");

// –ï—Å–ª–∏ –±—ã –º—ã —Ö–æ—Ç–µ–ª–∏ –∏–∑–≤–ª–µ—á—å —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è –∏–∑ myButtonClickHandler:
type ClickEventType = Parameters<typeof myButtonClickHandler>[0]; // MouseEvent

// registerHandler("myButtonElement", myButtonClickHandler); // –í —Ä–µ–∞–ª—å–Ω–æ–º DOM —ç—Ç–æ –±—ã —Ä–∞–±–æ—Ç–∞–ª–æ.

// –ü—Ä–∏–º–µ—Ä 9: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏–∑ –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–∞
class Calculator {
  value: number = 0;

  add(a: number, b: number): number {
    this.value = a + b;
    return this.value;
  }

  multiply(factor: number): number {
    this.value *= factor;
    return this.value;
  }
}

const calc = new Calculator();

// –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ 'add'
type AddMethodReturn = ReturnType<typeof calc.add>; // number

// –¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–µ—Ç–æ–¥–∞ 'multiply'
type MultiplyMethodParams = Parameters<typeof calc.multiply>; // [factor: number]

function callMethodWithLogging<T extends (...args: any[]) => any>(
  method: T,
  thisArg: ThisParameterType<T>, // –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 'this', —Ç–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –µ–≥–æ —Ç–∏–ø
  ...args: Parameters<T>
): ReturnType<T> {
  console.log(`–í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞:`, method.name || '–∞–Ω–æ–Ω–∏–º–Ω—ã–π –º–µ—Ç–æ–¥');
  console.log(`–ê—Ä–≥—É–º–µ–Ω—Ç—ã:`, args);
  // @ts-ignore: `thisArg` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—è–≤–Ω–æ `any` –µ—Å–ª–∏ T –Ω–µ –∏–º–µ–µ—Ç `this`
  const result = method.apply(thisArg, args);
  console.log(`–†–µ–∑—É–ª—å—Ç–∞—Ç:`, result);
  return result;
}

// –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
const resAdd = callMethodWithLogging(calc.add, calc, 10, 20); // –í—ã–≤–µ–¥–µ—Ç –ª–æ–≥–∏, –≤–µ—Ä–Ω–µ—Ç 30
console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ª–æ–≥–≥–µ—Ä:', resAdd);
```

### –¢–∏–ø–∏—á–Ω—ã–µ –û—à–∏–±–∫–∏ –∏ –ö–∞–∫ –ò—Ö –ò–∑–±–µ–∂–∞—Ç—å

1.  **–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ReturnType` –∏–ª–∏ `Parameters` —Å –Ω–µ-—Ñ—É–Ω–∫—Ü–∏—è–º–∏:**
    ```typescript
    type NotAFunction = string;
    // type ThisWillFail = ReturnType<NotAFunction>;
    // Error: 'NotAFunction' does not satisfy the constraint '(...args: any) => any'.
    // `ReturnType` –∏ `Parameters` –æ–∂–∏–¥–∞—é—Ç —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏.
    ```
    **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∏–ø, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π. –ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç `typeof` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏.

2.  **–†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:**
    –ö–æ–≥–¥–∞ —É —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞—Ç—É—Ä (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏), `Parameters` –∏ `ReturnType` –æ–±—ã—á–Ω–æ –∏–∑–≤–ª–µ–∫–∞—é—Ç —Ç–∏–ø—ã –∏–∑ *–ø–æ—Å–ª–µ–¥–Ω–µ–π* —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏–ª–∏ –∏–∑ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–æ, —á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç—Å—è.

    ```typescript
    function process(input: string): string;
    function process(input: number): number;
    function process(input: string | number): string | number {
      if (typeof input === 'string') return input.toUpperCase();
      return input * 2;
    }

    type ProcessParams = Parameters<typeof process>; // [input: string | number]
    type ProcessReturn = ReturnType<typeof process>; // string | number

    // –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫
    // –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–±—â–∏–µ —Ç–∏–ø—ã, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ.
    // –ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏–¥–µ—Ç—Å—è
    // –æ–±—ä—è–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä—ã.
    type ProcessStringInput = Parameters<(input: string) => string>; // [input: string]
    type ProcessStringReturn = ReturnType<(input: string) => string>; // string
    ```

3.  **–ó–∞–±—ã—Ç—ã–π `typeof` –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Ö—Ä–∞–Ω—è—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏:**
    ```typescript
    const myFunc = (value: boolean) => !value;
    // type IncorrectReturn = ReturnType<myFunc>; // Error: 'myFunc' refers to a value, but is being used as a type here.
    type CorrectReturn = ReturnType<typeof myFunc>; // boolean
    ```
    **–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `typeof` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ–µ *—Ç–∏–ø*, –∞ –Ω–µ *–∑–Ω–∞—á–µ–Ω–∏–µ*.

### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

1.  **`AsyncFunctionReturnType<F>`**: –°–æ–∑–¥–∞–π —Ç–∏–ø `AsyncFunctionReturnType<F>`, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø, —Ä–∞–∑—Ä–µ—à–∞–µ–º—ã–π –∏–∑ `Promise<T>` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

    ```typescript
    // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
    async function getUserData(id: string): Promise<{ id: string; name: string }> {
      return { id, name: "Test User" };
    }

    // type UserData = AsyncFunctionReturnType<typeof getUserData>;
    // UserData –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å { id: string; name: string }
    ```

2.  **`FirstParameter<F>`**: –†–µ–∞–ª–∏–∑—É–π —Ç–∏–ø `FirstParameter<F>`, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø *–ø–µ—Ä–≤–æ–≥–æ* –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏–∑ –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `F`. –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∏–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–∏–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `undefined`.

    ```typescript
    // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
    function processOrder(orderId: string, quantity: number): boolean { return true; }
    function greet(): string { return "Hello"; }

    // type OrderIdType = FirstParameter<typeof processOrder>; // string
    // type GreetFirstParam = FirstParameter<typeof greet>; // undefined
    ```

3.  **`withRetry<F>`**: –°–æ–∑–¥–∞–π –æ–±–æ–±—â–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `withRetry`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `F` –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ–≤—É—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –≤—ã–∑–æ–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `N` —Ä–∞–∑ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º —Ç–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `F`.

    ```typescript
    // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
    async function unstableApiCall(id: number): Promise<string> {
      if (Math.random() > 0.6) { // 40% —à–∞–Ω—Å —É—Å–ø–µ—Ö–∞
        return `Data for ${id}`;
      } else {
        throw new Error("Failed to fetch data");
      }
    }

    // const retriedApiCall = withRetry(unstableApiCall, 3);
    // retriedApiCall(123) –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å Promise<string> –∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –≤—ã–∑–æ–≤ –¥–æ 3 —Ä–∞–∑.
    ```

### üí° –°–æ–≤–µ—Ç

`ReturnType` –∏ `Parameters` ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è *–º–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤*. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ç–µ–±–µ –ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π *–¥—É–º–∞–µ—Ç –æ —Ç–∏–ø–∞—Ö* –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π —Ç–≤–æ–µ–≥–æ –∫–æ–¥–∞. –ò—Å–ø–æ–ª—å–∑—É–π –∏—Ö, –∫–æ–≥–¥–∞:
*   –¢—ã —Å–æ–∑–¥–∞–µ—à—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ–±–µ—Ä—Ç–∫–∏ –∏–ª–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ—Ç—Ä–∞–∏).
*   –°—Ç—Ä–æ–∏—à—å —Ñ–∞–±—Ä–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π, –≥–¥–µ –≤—ã—Ö–æ–¥–Ω–æ–π —Ç–∏–ø –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.
*   –¢–µ–±–µ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–ª–æ–∂–Ω–æ–≥–æ API –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
*   –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –Ω–æ —Ö–æ—á–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é.

–û–Ω–∏ –¥–µ–ª–∞—é—Ç —Ç–≤–æ–π –∫–æ–¥ –±–æ–ª–µ–µ DRY (Don't Repeat Yourself) –∏ —É–º–µ–Ω—å—à–∞—é—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ, —Ç–∞–∫ –∫–∞–∫ —Ç–∏–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –û—Å–≤–æ–π –∏—Ö, –∏ —Ç–≤–æ–∏ TypeScript-–Ω–∞–≤—ã–∫–∏ –≤—ã–π–¥—É—Ç –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!