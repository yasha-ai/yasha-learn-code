## TypeScript: –ü–∞—Ç—Ç–µ—Ä–Ω—ã Redux –¥–ª—è –°—Ç—Ä–æ–≥–æ–π –¢–∏–ø–∏–∑–∞—Ü–∏–∏

–ü—Ä–∏–≤–µ—Ç, –∫–æ–¥–µ—Ä—ã! –°–µ–≥–æ–¥–Ω—è –º—ã –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –≤ –º–∏—Ä–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ ‚Äî Redux, —É—Å–∏–ª–µ–Ω–Ω—ã–π —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π TypeScript. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ Redux ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–∫–ª–∞–¥, –≥–¥–µ –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞, –∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî —ç—Ç–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å. TypeScript –∂–µ ‚Äî —ç—Ç–æ –≤–∞—à —Å—É–ø–µ—Ä-–∏–Ω—Å–ø–µ–∫—Ç–æ—Ä –ø–æ –∫–∞—á–µ—Å—Ç–≤—É, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç –∑–∞ —Ç–µ–º, —á—Ç–æ–±—ã –∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –±—ã–ª–∞ –ø–æ–Ω—è—Ç–Ω–∞, –∞ –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –ª–µ–∂–∞–ª –Ω–∞ —Å–≤–æ—ë–º –º–µ—Å—Ç–µ –∏ –±—ã–ª —Ç–æ–≥–æ —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ.

–ó–∞—á–µ–º –Ω–∞–º TypeScript —Å Redux? –í—Å—ë –ø—Ä–æ—Å—Ç–æ: –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫, —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞, –æ–±–ª–µ–≥—á–µ–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏, –∫–æ–Ω–µ—á–Ω–æ, –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ IDE! –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, —Ä–µ–¥—é—Å–µ—Ä—ã, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å Redux Thunk –∏ –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –≤–∞—à –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "Ducks".

### ü¶Ü Redux Ducks –ü–∞—Ç—Ç–µ—Ä–Ω –∏ –ë–∞–∑–æ–≤–∞—è –¢–∏–ø–∏–∑–∞—Ü–∏—è

–ü–∞—Ç—Ç–µ—Ä–Ω "Ducks" –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–º–µ—â–∞—Ç—å –≤–µ—Å—å –∫–æ–¥, –æ—Ç–Ω–æ—Å—è—â–∏–π—Å—è –∫ –æ–¥–Ω–æ–π —Ñ–∏—á–µ Redux (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π, —Ä–µ–¥—é—Å–µ—Ä—ã, —Å–æ–∑–¥–∞—Ç–µ–ª–∏ –¥–µ–π—Å—Ç–≤–∏–π, –∏ –¥–∞–∂–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã), –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∞—à –∫–æ–¥ –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º –∏ –ª–µ–≥–∫–æ–¥–æ—Å—Ç—É–ø–Ω—ã–º.

–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –º–æ–¥—É–ª—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

```typescript
// users.ts
import { AnyAction } from 'redux'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º AnyAction –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

// 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π
export const ADD_USER = 'users/ADD_USER';
export const REMOVE_USER = 'users/REMOVE_USER';
export const UPDATE_USER = 'users/UPDATE_USER';

// 2. –¢–∏–ø—ã –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (State)
export interface User {
  id: string;
  name: string;
  email: string;
}

export interface UsersState {
  list: User[];
  isLoading: boolean;
  error: string | null;
}

const initialState: UsersState = {
  list: [],
  isLoading: false,
  error: null,
};

// 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
// –í–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `as const` –¥–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤, —á—Ç–æ–±—ã TS –º–æ–≥ –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ—á–Ω—ã–π —Ç–∏–ø.
interface AddUserAction {
  type: typeof ADD_USER;
  payload: User;
}

interface RemoveUserAction {
  type: typeof REMOVE_USER;
  payload: { id: string };
}

interface UpdateUserAction {
  type: typeof UPDATE_USER;
  payload: User;
}

// –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–¥–∏–Ω Union Type
export type UsersActionTypes = AddUserAction | RemoveUserAction | UpdateUserAction;

// 4. –°–æ–∑–¥–∞—Ç–µ–ª–∏ –¥–µ–π—Å—Ç–≤–∏–π (Action Creators)
export const addUser = (user: User): AddUserAction => ({
  type: ADD_USER,
  payload: user,
});

export const removeUser = (id: string): RemoveUserAction => ({
  type: REMOVE_USER,
  payload: { id },
});

export const updateUser = (user: User): UpdateUserAction => ({
  type: UPDATE_USER,
  payload: user,
});

// 5. –†–µ–¥—é—Å–µ—Ä
// –†–µ–¥—é—Å–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–µ–π—Å—Ç–≤–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
// –ó–¥–µ—Å—å TypeScript "—Å—É–∂–∞–µ—Ç" —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏ `switch` –±–ª–∞–≥–æ–¥–∞—Ä—è discriminated union.
export const usersReducer = (
  state: UsersState = initialState,
  action: UsersActionTypes // –¢–µ–ø–µ—Ä—å action –∏–º–µ–µ—Ç —Å—Ç—Ä–æ–≥–∏–π —Ç–∏–ø
): UsersState => {
  switch (action.type) {
    case ADD_USER:
      return { ...state, list: [...state.list, action.payload] };
    case REMOVE_USER:
      return { ...state, list: state.list.filter((user) => user.id !== action.payload.id) };
    case UPDATE_USER:
      return {
        ...state,
        list: state.list.map((user) => (user.id === action.payload.id ? action.payload : user)),
      };
    default:
      // –í Redux —Ç–∏–ø–∏—á–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
      // –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º AnyAction, —Ç–æ `action` –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–∏–ø `never` –∑–¥–µ—Å—å,
      // —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º —Å–∏–≥–Ω–∞–ª–æ–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤.
      return state;
  }
};
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
*   **`as const` –¥–ª—è `type`**: –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ TypeScript –ø–æ–Ω–∏–º–∞–µ—Ç `ADD_USER` –∫–∞–∫ —Å—Ç—Ä–æ–∫–æ–≤—ã–π –ª–∏—Ç–µ—Ä–∞–ª `'users/ADD_USER'`, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `string`. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –∏ discriminated unions.
*   **Discriminated Unions**: `UsersActionTypes` ‚Äî —ç—Ç–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π. TypeScript –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ `type` (–∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–µ–π—Å—Ç–≤–∏—è) –¥–ª—è —Å—É–∂–µ–Ω–∏—è —Ç–∏–ø–∞ –≤–Ω—É—Ç—Ä–∏ `switch` –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ `action.payload` –±–µ–∑ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤.

### üöÄ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –î–µ–π—Å—Ç–≤–∏—è —Å Redux Thunk

–ö–æ–≥–¥–∞ –¥–µ–ª–æ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API), –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç Redux Thunk. TypeScript –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—á–µ–Ω—å —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å thunk'–∏.

–î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Ç–∏–ø—ã –¥–ª—è `RootState` (–æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –∏ `AppDispatch` (—Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `dispatch`).

```typescript
// store.ts (–§–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ Redux-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞)
import { createStore, combineReducers, applyMiddleware } from 'redux';
import { thunk, ThunkAction, ThunkDispatch } from 'redux-thunk'; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–∏–ø—ã –∏–∑ redux-thunk
import { usersReducer, UsersActionTypes } from './users'; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—à —Ä–µ–¥—é—Å–µ—Ä –∏ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π

// –ö–æ—Ä–Ω–µ–≤–æ–π —Ä–µ–¥—é—Å–µ—Ä, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –≤—Å–µ –Ω–∞—à–∏ —Ä–µ–¥—é—Å–µ—Ä—ã
const rootReducer = combineReducers({
  users: usersReducer,
  // ... –¥—Ä—É–≥–∏–µ —Ä–µ–¥—é—Å–µ—Ä—ã
});

// 1. –¢–∏–ø–∏–∑–∏—Ä—É–µ–º RootState: —Ç–∏–ø –≤—Å–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
export type RootState = ReturnType<typeof rootReducer>;

// 2. –¢–∏–ø–∏–∑–∏—Ä—É–µ–º Dispatch:
// ThunkDispatch - —ç—Ç–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è dispatch, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ Action, –Ω–æ –∏ Thunk
export type AppDispatch = ThunkDispatch<RootState, unknown, UsersActionTypes>; // –í —Ç—Ä–µ—Ç—å–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

// –°–æ–∑–¥–∞–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
export const store = createStore(rootReducer, applyMiddleware(thunk));

// –¢–∏–ø –¥–ª—è –Ω–∞—à–∏—Ö Thunk'–æ–≤.
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
// R - —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è Thunk
// S - —Ç–∏–ø —Å–æ—Å—Ç–æ—è–Ω–∏—è (RootState)
// E - —Ç–∏–ø ExtraArgument (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å Thunk. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ unknown)
// A - —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è (UsersActionTypes –∏–ª–∏ AnyAction, –µ—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ —Ä–µ–¥—é—Å–µ—Ä–æ–≤)
export type AppThunk<ReturnType = void> = ThunkAction<
  ReturnType,
  RootState,
  unknown,
  UsersActionTypes // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AnyAction –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
>;
```

–¢–µ–ø–µ—Ä—å, –∏—Å–ø–æ–ª—å–∑—É—è —ç—Ç–∏ —Ç–∏–ø—ã, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π thunk –≤ –Ω–∞—à–µ–º `users.ts` —Ñ–∞–π–ª–µ.

```typescript
// users.ts (–¥–æ–±–∞–≤–ª—è–µ–º –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Ñ–∞–π–ª—É)
import { AppThunk, AppDispatch } from './store'; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º AppThunk –∏ AppDispatch

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
export const FETCH_USERS_START = 'users/FETCH_USERS_START';
export const FETCH_USERS_SUCCESS = 'users/FETCH_USERS_SUCCESS';
export const FETCH_USERS_FAILURE = 'users/FETCH_USERS_FAILURE';

interface FetchUsersStartAction {
  type: typeof FETCH_USERS_START;
}

interface FetchUsersSuccessAction {
  type: typeof FETCH_USERS_SUCCESS;
  payload: User[];
}

interface FetchUsersFailureAction {
  type: typeof FETCH_USERS_FAILURE;
  payload: string; // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
}

// –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞—à Union Type –¥–µ–π—Å—Ç–≤–∏–π
export type UsersActionTypes =
  | AddUserAction
  | RemoveUserAction
  | UpdateUserAction
  | FetchUsersStartAction
  | FetchUsersSuccessAction
  | FetchUsersFailureAction;

// –†–∞—Å—à–∏—Ä—è–µ–º —Ä–µ–¥—é—Å–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
export const usersReducer = (
  state: UsersState = initialState,
  action: UsersActionTypes
): UsersState => {
  switch (action.type) {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–µ–π—Å—ã
    case FETCH_USERS_START:
      return { ...state, isLoading: true, error: null };
    case FETCH_USERS_SUCCESS:
      return { ...state, isLoading: false, list: action.payload };
    case FETCH_USERS_FAILURE:
      return { ...state, isLoading: false, error: action.payload };
    default:
      return state;
  }
};

// –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π thunk –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
export const fetchUsers = (): AppThunk<Promise<void>> => {
  // Thunk –ø–æ–ª—É—á–∞–µ—Ç dispatch –∏ getState, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã!
  return async (dispatch, getState) => {
    dispatch({ type: FETCH_USERS_START });
    try {
      // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
      const response = await new Promise<User[]>((resolve) =>
        setTimeout(() => {
          const users: User[] = [
            { id: '1', name: 'Alice', email: 'alice@example.com' },
            { id: '2', name: 'Bob', email: 'bob@example.com' },
          ];
          resolve(users);
        }, 1000)
      );
      dispatch({ type: FETCH_USERS_SUCCESS, payload: response });
    } catch (error: any) {
      dispatch({ type: FETCH_USERS_FAILURE, payload: error.message || 'Failed to fetch users' });
    }
  };
};

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏–ª–∏ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ)
// import { store } from './store';
// store.dispatch(fetchUsers());
// store.dispatch(addUser({ id: '3', name: 'Charlie', email: 'charlie@example.com' }));
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
*   **`AppThunk`**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –≤—Å–µ—Ö thunk'–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è `ThunkAction` –∏–∑ `redux-thunk`. –≠—Ç–æ –¥–∞–µ—Ç –≤–∞–º —Ç–∏–ø–∏–∑–∞—Ü–∏—é –¥–ª—è `dispatch` –∏ `getState` –≤–Ω—É—Ç—Ä–∏ thunk'–∞.
*   **`AppDispatch`**: –≠—Ç–æ—Ç —Ç–∏–ø –Ω–µ–æ–±—Ö–æ–¥–∏–º, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å thunk'–∏ —á–µ—Ä–µ–∑ `dispatch` –≤ –≤–∞—à–µ–º –∫–æ–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö React —Å `useDispatch`). –û–Ω —Å–æ–æ–±—â–∞–µ—Ç TypeScript, —á—Ç–æ `dispatch` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π, –Ω–æ –∏ thunk'–∏.

### üîç –¢–∏–ø–∏–∑–∞—Ü–∏—è –°–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

–°–µ–ª–µ–∫—Ç–æ—Ä—ã ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç —á–∞—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. TypeScript –¥–µ–ª–∞–µ—Ç –∏—Ö –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏.

```typescript
// users.ts (–¥–æ–±–∞–≤–ª—è–µ–º –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Ñ–∞–π–ª—É)
import { RootState } from './store'; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º RootState

// –ë–∞–∑–æ–≤—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä: –ø–æ–ª—É—á–∞–µ–º –≤–µ—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –º–æ–¥—É–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
export const selectUsersState = (state: RootState) => state.users;

// –°–µ–ª–µ–∫—Ç–æ—Ä: –ø–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
export const selectAllUsers = (state: RootState) => selectUsersState(state).list;

// –°–µ–ª–µ–∫—Ç–æ—Ä: –ø–æ–ª—É—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
export const selectIsLoading = (state: RootState) => selectUsersState(state).isLoading;

// –°–µ–ª–µ–∫—Ç–æ—Ä: –ø–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID (–ø—Ä–∏–º–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º)
export const selectUserById = (state: RootState, id: string) =>
  selectUsersState(state).list.find((user) => user.id === id);

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
// import { store } from './store';
// import { selectAllUsers, selectUserById } from './users';
// const users = selectAllUsers(store.getState()); // users –±—É–¥–µ—Ç —Ç–∏–ø–∞ User[]
// const user = selectUserById(store.getState(), '1'); // user –±—É–¥–µ—Ç —Ç–∏–ø–∞ User | undefined
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
*   **`RootState`**: –ò—Å–ø–æ–ª—å–∑—É—è `RootState` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞, –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –ø–æ–ª–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∏ TypeScript –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –æ–±—ä–µ–∫—Ç—É —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –û—à–∏–±–∫–∏ –∏ –†–µ—à–µ–Ω–∏—è

1.  **–ó–∞–±—ã–ª–∏ `as const`**:
    *   –û—à–∏–±–∫–∞: `type: 'users/ADD_USER'` –≤–º–µ—Å—Ç–æ `type: typeof ADD_USER`.
    *   –ü—Ä–æ–±–ª–µ–º–∞: TypeScript –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å `type` –ø—Ä–æ—Å—Ç–æ `string`, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–º –ª–∏—Ç–µ—Ä–∞–ª–æ–º. –≠—Ç–æ —Å–ª–æ–º–∞–µ—Ç discriminated unions –∏ —Å—É–∂–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –≤ —Ä–µ–¥—é—Å–µ—Ä–µ.
    *   –†–µ—à–µ–Ω–∏–µ: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `as const` –¥–ª—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π:
        ```typescript
        export const ADD_USER = 'users/ADD_USER' as const; // –ü—Ä–∞–≤–∏–ª—å–Ω–æ
        ```

2.  **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è `dispatch` –¥–ª—è Thunk'–æ–≤**:
    *   –û—à–∏–±–∫–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Dispatch<AnyAction>` –≤–º–µ—Å—Ç–æ `AppDispatch` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏–ª–∏ —Ö—É–∫–∞—Ö.
    *   –ü—Ä–æ–±–ª–µ–º–∞: TypeScript –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ `dispatch` –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ (thunk'–∏), –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É, –∫–æ–≥–¥–∞ –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å –≤—ã–∑–≤–∞—Ç—å `dispatch(someThunk())`.
    *   –†–µ—à–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ `AppDispatch` –∫–∞–∫ `ThunkDispatch<RootState, unknown, AnyAction>` –∏–ª–∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ, –∫–∞–∫ –º—ã —Å–¥–µ–ª–∞–ª–∏, –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ:
        ```typescript
        // –í —Ö—É–∫–µ React
        // const dispatch: AppDispatch = useDispatch();
        // dispatch(fetchUsers()); // –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
        ```

3.  **–ß—Ä–µ–∑–º–µ—Ä–Ω–æ —à–∏—Ä–æ–∫–∏–π —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ä–µ–¥—é—Å–µ—Ä–µ**:
    *   –û—à–∏–±–∫–∞: `reducer(state: State, action: AnyAction): State`
    *   –ü—Ä–æ–±–ª–µ–º–∞: –í—ã —Ç–µ—Ä—è–µ—Ç–µ –≤—Å—é –ø–æ–ª—å–∑—É –æ—Ç discriminated unions. TypeScript –Ω–µ —Å–º–æ–∂–µ—Ç —Å—É–∑–∏—Ç—å —Ç–∏–ø `action.payload` –≤–Ω—É—Ç—Ä–∏ `switch`, –∏ –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ (`(action as AddUserAction).payload`).
    *   –†–µ—à–µ–Ω–∏–µ: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UsersActionTypes`) –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–¥—é—Å–µ—Ä–∞.

### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í–∞—à–µ –∑–∞–¥–∞–Ω–∏–µ, –º–æ–π —é–Ω—ã–π –ø–∞–¥–∞–≤–∞–Ω Redux-–º–∞—Å—Ç–µ—Ä!

1.  **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π "Ducks" –º–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ (Todos)**:
    *   –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Todo` (id, title, completed).
    *   –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ `TodosState` (—Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á, —Ñ–ª–∞–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏/–æ—à–∏–±–∫–∏).
    *   –°–æ–∑–¥–∞–π—Ç–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è: `ADD_TODO`, `TOGGLE_TODO`, `DELETE_TODO`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `as const`.
    *   –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —ç—Ç–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –∏—Ö –≤ `TodosActionTypes`.
    *   –ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –¥–µ–π—Å—Ç–≤–∏–π (action creators).
    *   –ù–∞–ø–∏—à–∏—Ç–µ `todosReducer`.

2.  **–î–æ–±–∞–≤—å—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –º–æ–¥—É–ª—å Todos**:
    *   –°–æ–∑–¥–∞–π—Ç–µ thunk `fetchTodos`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–∏—Ç–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á —Å —Å–µ—Ä–≤–µ—Ä–∞.
    *   –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π (`FETCH_TODOS_START`, `FETCH_TODOS_SUCCESS`, `FETCH_TODOS_FAILURE`) –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `TodosActionTypes` –∏ `todosReducer`.
    *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à thunk –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `dispatch` –∏ `getState`.

3.  **–°–æ–∑–¥–∞–π—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –º–æ–¥—É–ª—è Todos**:
    *   `selectAllTodos`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á.
    *   `selectCompletedTodos`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.
    *   `selectTodoById(id: string)`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–¥–∞—á—É –ø–æ –µ—ë ID.

4.  **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –≤ Root State**:
    *   –û–±–Ω–æ–≤–∏—Ç–µ `rootReducer` –≤ `store.ts`, –¥–æ–±–∞–≤–∏–≤ –≤–∞—à `todosReducer`.
    *   –û–±–Ω–æ–≤–∏—Ç–µ `RootState` –∏ `AppThunk`, —á—Ç–æ–±—ã –æ–Ω–∏ –≤–∫–ª—é—á–∞–ª–∏ –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### üí° –°–æ–≤–µ—Ç

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redux Toolkit (RTK) ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å Redux. RTK –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–¥—é—Å–µ—Ä–æ–≤, –¥–µ–π—Å—Ç–≤–∏–π –∏ thunk'–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—è –º–Ω–æ–≥–∏–µ boilerplate —Ç–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –≤—Ä—É—á–Ω—É—é. –ù–∞–ø—Ä–∏–º–µ—Ä, `createSlice` –∏–∑ RTK —Å–∞–º –≤—ã–≤–æ–¥–∏—Ç —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π –∏ —Ä–µ–¥—é—Å–µ—Ä–æ–≤, –∞ `createAsyncThunk` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

–•–æ—Ç—è –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –±–∞–∑–æ–≤—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é Redux, –∫–∞–∫ –º—ã —Å–µ–π—á–∞—Å –∏–∑—É—á–∏–ª–∏, –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Redux Toolkit ‚Äî –æ–Ω —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à—É –∂–∏–∑–Ω—å –≥–æ—Ä–∞–∑–¥–æ –ø—Ä–æ—â–µ –∏ –≤–∞—à –∫–æ–¥ –µ—â–µ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ!