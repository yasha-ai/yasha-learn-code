## TypeScript: –ú–∞–≥–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `infer`

–ü—Ä–∏–≤–µ—Ç, –∫–æ–¥–µ—Ä—ã –±—É–¥—É—â–µ–≥–æ! –° –≤–∞–º–∏ –Ø—à–∞, –∏ —Å–µ–≥–æ–¥–Ω—è –º—ã –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π TypeScript ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `infer`. –ï—Å–ª–∏ –≤—ã —É–∂–µ –æ—Å–≤–æ–∏–ª–∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏, —É—Å–ª–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ç–∏–ø—ã, —Ç–æ `infer` ‚Äî —ç—Ç–æ –≤–∞—à —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –≥–∏–±–∫–æ–≥–æ –∏ –º–æ—â–Ω–æ–≥–æ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–¥–∞.

### üïµÔ∏è‚Äç‚ôÄÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ `infer` –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã ‚Äî –¥–µ—Ç–µ–∫—Ç–∏–≤, –∏ –ø–µ—Ä–µ–¥ –≤–∞–º–∏ —Å–ª–æ–∂–Ω–æ–µ –¥–µ–ª–æ. –£ –≤–∞—Å –µ—Å—Ç—å –æ–±—â–∞—è "–∫–∞—Ä—Ç–∏–Ω–∞ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è" (–æ–±—â–∏–π —Ç–∏–ø), –Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã—Ö–≤–∞—Ç–∏—Ç—å –∏–∑ –Ω–µ—ë –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é, –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—É—é –¥–æ —ç—Ç–æ–≥–æ –¥–µ—Ç–∞–ª—å (–ø–æ–¥—Ç–∏–ø). –ò–º–µ–Ω–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏ –Ω—É–∂–µ–Ω `infer`!

–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `infer` –ø–æ–∑–≤–æ–ª—è–µ—Ç "–∑–∞—Ö–≤–∞—Ç–∏—Ç—å" –∏–ª–∏ "–∏–∑–≤–ª–µ—á—å" —Ç–∏–ø –∏–∑ –¥—Ä—É–≥–æ–π —á–∞—Å—Ç–∏ —Ç–∏–ø–∞ –≤ —Ä–∞–º–∫–∞—Ö **—É—Å–ª–æ–≤–Ω–æ–≥–æ —Ç–∏–ø–∞** (`conditional type`). –û–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –æ–±—ä—è–≤–ª—è–µ—Ç–µ –ø—Ä—è–º–æ "–Ω–∞ –ª–µ—Ç—É" –≤ —É—Å–ª–æ–≤–∏–∏ `extends`, —á—Ç–æ–±—ã –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–π —Ç–∏–ø –≤ –≤–µ—Ç–∫–∞—Ö `true` –∏–ª–∏ `false` —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ç–∏–ø–∞.

–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: `infer` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–¢–û–õ–¨–ö–û** –≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è `extends` –≤–Ω—É—Ç—Ä–∏ —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ç–∏–ø–∞. –î—É–º–∞–π—Ç–µ –æ–± —ç—Ç–æ–º –∫–∞–∫ –æ "–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–µ", –∫–æ—Ç–æ—Ä—ã–π TypeScript –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–∏—Ç—å, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç.

```typescript
// –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è infer
type MyConditionalType<T> = T extends SomePattern<infer U> ? U : FallbackType;
// –ó–¥–µ—Å—å 'U' - —ç—Ç–æ —Ç–∏–ø, –∫–æ—Ç–æ—Ä—ã–π TypeScript –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–≤–µ—Å—Ç–∏ –∏–∑ 'SomePattern'.
// –ï—Å–ª–∏ T —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç 'SomePattern<U>', —Ç–æ MyConditionalType<T> –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 'U'.
// –ò–Ω–∞—á–µ - FallbackType.
```

`infer` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã—Ö, –Ω–æ –∫—Ä–∞–π–Ω–µ –ø–æ–ª–µ–∑–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã, –¥–µ–ª–∞—è –≤–∞—à –∫–æ–¥ –±–æ–ª–µ–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º –∏ –≥–∏–±–∫–∏–º.

### üìö –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã: –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–∏–ø—ã

–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å –ø—Ä–æ—Å—Ç—ã—Ö, –Ω–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤.

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞

–û—á–µ–Ω—å —á–∞—Å—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–æ–π —Ç–∏–ø —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–∞.

```typescript
/**
 * ArrayElementType<T>
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞.
 * –ï—Å–ª–∏ T —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º, infer U –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–∏–ø –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
 */
type ArrayElementType<T> = T extends (infer U)[] ? U : T;

type StringArray = string[];
type NumberArray = number[];

type Element1 = ArrayElementType<StringArray>; // string
type Element2 = ArrayElementType<NumberArray>; // number
type Element3 = ArrayElementType<boolean>;     // boolean (–Ω–µ –º–∞—Å—Å–∏–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç T)

const myStrings: Element1[] = ["hello", "world"];
// const myNumbers: Element2[] = [1, "two"]; // –û—à–∏–±–∫–∞: –¢–∏–ø "string" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–∏–ø—É "number".
const myNumbers: Element2[] = [1, 2];

console.log(myStrings, myNumbers);
```

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏

–≠—Ç–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω–æ, —á—Ç–æ TypeScript –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `ReturnType<T>`, –Ω–æ –º—ã –Ω–∞–ø–∏—à–µ–º —Å–≤–æ—é –≤–µ—Ä—Å–∏—é, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

```typescript
/**
 * GetFunctionReturnType<T>
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏.
 * –ï—Å–ª–∏ T —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π, infer R –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –µ—ë –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø.
 */
type GetFunctionReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

function greet(name: string): string {
    return `Hello, ${name}`;
}

async function fetchData(): Promise<{ id: number; name: string }> {
    return { id: 1, name: "Yasha" };
}

type GreetResult = GetFunctionReturnType<typeof greet>;    // string
type FetchDataResult = GetFunctionReturnType<typeof fetchData>; // Promise<{ id: number; name: string }>
type NonFunctionResult = GetFunctionReturnType<number>; // never (–ø–æ—Ç–æ–º—É —á—Ç–æ number –Ω–µ —Ñ—É–Ω–∫—Ü–∏—è)

const message: GreetResult = "TypeScript rocks!";
// const data: FetchDataResult = { id: 2, name: "Alice" }; // –û—à–∏–±–∫–∞: –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è Promise, –∞ –Ω–µ –ø—Ä—è–º–æ–π –æ–±—ä–µ–∫—Ç
// –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–∏–ø resolved-–∑–Ω–∞—á–µ–Ω–∏—è Promise, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π infer
```

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏

–ê —á—Ç–æ, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω—ã —Ç–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏? –¢–æ–∂–µ –º–æ–∂–Ω–æ! TypeScript –∏–º–µ–µ—Ç `Parameters<T>`.

```typescript
/**
 * GetFunctionParameters<T>
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≤–∏–¥–µ –∫–æ—Ä—Ç–µ–∂–∞.
 * –ï—Å–ª–∏ T —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π, infer A –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–∏–ø—ã –µ—ë –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
 */
type GetFunctionParameters<T> = T extends (...args: infer A) => any ? A : never;

function sum(a: number, b: number): number {
    return a + b;
}

const log = (message: string, level: 'info' | 'warn' = 'info'): void => {
    console.log(`[${level.toUpperCase()}]: ${message}`);
};

type SumParams = GetFunctionParameters<typeof sum>; // [a: number, b: number]
type LogParams = GetFunctionParameters<typeof log>; // [message: string, level?: "info" | "warn"]

const sumArgs: SumParams = [10, 20];
const logArgs: LogParams = ["–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω", "info"];

// sum(...sumArgs); // (Parameter of type 'number' is not assignable to type 'number[]'.) - spread operator expects an array.
sum(sumArgs[0], sumArgs[1]); // Ok
log(logArgs[0], logArgs[1]); // Ok
```

### üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Å `infer`

`infer` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∫–ª–∞—Å—Å—ã.

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–∑ Promise (–∏ –µ–≥–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ)

–ö–∞–∫ –º—ã –≤–∏–¥–µ–ª–∏ –≤—ã—à–µ, `GetFunctionReturnType` –≤–µ—Ä–Ω–µ—Ç `Promise<T>` –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞. –ê –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ `T`?

```typescript
/**
 * PromiseResolvedType<T>
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç Promise.
 * –ï—Å–ª–∏ T —è–≤–ª—è–µ—Ç—Å—è PromiseLike (—Ç.–µ. –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ .then()), infer U –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –µ–≥–æ —Ç–∏–ø.
 * –ò–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç T –∫–∞–∫ –µ—Å—Ç—å.
 */
type PromiseResolvedType<T> = T extends PromiseLike<infer U> ? U : T;

type StringPromise = Promise<string>;
type NestedPromise = Promise<Promise<number>>;
type RegularNumber = number;

type ResolvedString = PromiseResolvedType<StringPromise>;  // string
type ResolvedNested = PromiseResolvedType<NestedPromise>;  // Promise<number> (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å!)
type ResolvedNumber = PromiseResolvedType<RegularNumber>;  // number

// –ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ "—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å" Promise:
type DeepPromiseResolvedType<T> = T extends PromiseLike<infer U>
    ? DeepPromiseResolvedType<U> // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–∏–ø –∫ U
    : T;

type DeepResolvedNested = DeepPromiseResolvedType<NestedPromise>; // number
type DeepResolvedTriple = DeepPromiseResolvedType<Promise<Promise<Promise<boolean>>>>; // boolean

const result1: ResolvedString = "Success";
// const result2: DeepResolvedNested = Promise.resolve(42); // –û—à–∏–±–∫–∞: –¢–∏–ø Promise<number> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω number
const result2: DeepResolvedNested = 42;
```

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞

–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ª–µ–∑–Ω—ã—Ö –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤, `InstanceType<T>`, –∫–∞–∫ —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `infer`. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–∏–ø —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ –∏–∑ —Ç–∏–ø–∞ —Å–∞–º–æ–≥–æ –∫–ª–∞—Å—Å–∞ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞).

```typescript
/**
 * GetInstanceType<T>
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏–∑ –∫–ª–∞—Å—Å–∞ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞).
 * –ï—Å–ª–∏ T —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º (new (...args: any) => infer I), infer I –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–∏–ø —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.
 * –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: T extends abstract new (...) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.
 */
type GetInstanceType<T extends abstract new (...args: any) => any> = T extends abstract new (...args: any) => infer I ? I : never;

class User {
    constructor(public name: string, public age: number) {}
    greet() { return `Hello, I'm ${this.name}`; }
}

abstract class BaseRepository<T> {
    abstract getById(id: number): Promise<T>;
}

class UserRepository extends BaseRepository<User> {
    async getById(id: number): Promise<User> {
        return Promise.resolve(new User(`User ${id}`, 30));
    }
}

type UserInstance = GetInstanceType<typeof User>; // User
type UserRepositoryInstance = GetInstanceType<typeof UserRepository>; // UserRepository

const user: UserInstance = new User("Alice", 28);
const repo: UserRepositoryInstance = new UserRepository();

console.log(user.greet());
```

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–∑ —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–∞, –≥–¥–µ —Å–≤–æ–π—Å—Ç–≤–æ - —Ñ—É–Ω–∫—Ü–∏—è

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å `infer` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–ø–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ–º –æ–±—ä–µ–∫—Ç–∞.

```typescript
/**
 * GetPropertyFunctionFirstArg<T, K>
 * –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø –ü–ï–†–í–û–ì–û –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ–º –æ–±—ä–µ–∫—Ç–∞ T.
 * –ï—Å–ª–∏ T[K] —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π, infer A –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ç–∏–ø –µ—ë –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞.
 */
type GetPropertyFunctionFirstArg<T, K extends keyof T> =
    T[K] extends (firstArg: infer A, ...args: any[]) => any ? A : never;

interface ApiService {
    getUserById(id: number): Promise<{ name: string }>;
    createPost(payload: { title: string; content: string }): Promise<boolean>;
    deleteItem(itemId: string, force: boolean): Promise<void>;
}

type UserIdParam = GetPropertyFunctionFirstArg<ApiService, 'getUserById'>; // number
type PostPayloadParam = GetPropertyFunctionFirstArg<ApiService, 'createPost'>; // { title: string; content: string }
type ItemIdParam = GetPropertyFunctionFirstArg<ApiService, 'deleteItem'>; // string
type NoFunctionParam = GetPropertyFunctionFirstArg<{ prop: string }, 'prop'>; // never

const userId: UserIdParam = 123;
const postPayload: PostPayloadParam = { title: "New Article", content: "..." };
const itemId: ItemIdParam = "abc-123";

// const invalidPayload: PostPayloadParam = { title: "Only title" }; // –û—à–∏–±–∫–∞: Missing 'content'
```

### üöß –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

1.  **`infer` —Ç–æ–ª—å–∫–æ –≤ `extends`:** –°–∞–º–∞—è —á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞ ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `infer` –≤–Ω–µ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ `extends`. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.

    ```typescript
    // –û–®–ò–ë–ö–ê: Infer declarations are only permitted in the 'extends' clause of a conditional type.
    // type BadInfer<T> = { value: infer U };
    ```

2.  **–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π `infer`:** –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ `extends` –Ω–µ —Å–æ–≤–ø–∞–ª–æ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º `infer`, —Ç–æ `infer` –Ω–µ —Å–º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ —Ç–∏–ø. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —É—Å–ª–æ–≤–Ω—ã–π —Ç–∏–ø –ø–µ—Ä–µ–π–¥–µ—Ç –∫ –≤–µ—Ç–∫–µ `false`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∞ `FallbackType` (–∏–ª–∏ `never`) –∞–¥–µ–∫–≤–∞—Ç–Ω–∞.

3.  **–ù–µ—Å–∫–æ–ª—å–∫–æ `infer` —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º:** –ï—Å–ª–∏ –≤ –æ–¥–Ω–æ–º —É—Å–ª–æ–≤–∏–∏ `extends` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ `infer` —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º, TypeScript –≤—ã–≤–æ–¥–∏—Ç *–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π* —Ç–∏–ø (`union type`) –∏–∑ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤—ã–≤–æ–¥–æ–≤. –û–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö `infer` –≤ –æ–¥–Ω–æ–º —É—Å–ª–æ–≤–∏–∏.

    ```typescript
    type MultipleInfer<T> = T extends { a: infer U, b: infer U } ? U : never;
    type Example1 = MultipleInfer<{ a: string, b: number }>; // string | number
    // –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –æ–±–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞:
    type CorrectMultipleInfer<T> = T extends { a: infer A, b: infer B } ? [A, B] : never;
    type Example2 = CorrectMultipleInfer<{ a: string, b: number }>; // [string, number]
    ```

### ### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í—Ä–µ–º—è –∑–∞–∫—Ä–µ–ø–∏—Ç—å –∑–Ω–∞–Ω–∏—è! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `infer` –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á.

#### –ó–∞–¥–∞–Ω–∏–µ 1: –ò–∑–≤–ª–µ—á—å —Ç–∏–ø `value` –∏–∑ –æ–±—ä–µ–∫—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ç–∏–ø `ExtractValue<T>`, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø —Å–≤–æ–π—Å—Ç–≤–∞ `value` –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Ç–∏–ø–∞ `{ type: string; value: TValue }`. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π —Ç–∏–ø `T` –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–æ–º—É —à–∞–±–ª–æ–Ω—É, –æ–Ω –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `never`.

```typescript
type ExtractValue<T> = /* –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å */

// –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
type DataPayload = { type: 'user'; value: { id: number; name: string } };
type ErrorPayload = { type: 'error'; value: string };
type SimpleObject = { id: number };

type UserData = ExtractValue<DataPayload>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: { id: number; name: string }
type ErrorMessage = ExtractValue<ErrorPayload>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: string
type NoValue = ExtractValue<SimpleObject>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: never
```

#### –ó–∞–¥–∞–Ω–∏–µ 2: –ò–∑–≤–ª–µ—á—å —Ç–∏–ø –≤—Ç–æ—Ä–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ—Ä—Ç–µ–∂–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ç–∏–ø `SecondTupleElement<T>`, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∏–ø –≤—Ç–æ—Ä–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –∫–æ—Ä—Ç–µ–∂–∞. –ï—Å–ª–∏ –∫–æ—Ä—Ç–µ–∂ –∏–º–µ–µ—Ç –º–µ–Ω—å—à–µ –¥–≤—É—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ç–µ–∂–µ–º, –≤–µ—Ä–Ω–∏—Ç–µ `never`.

```typescript
type SecondTupleElement<T> = /* –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å */

// –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
type TwoElements = [string, number];
type ThreeElements = [boolean, string, number];
type OneElement = [Date];
type NotATuple = string[];

type SecondOfTwo = SecondTupleElement<TwoElements>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: number
type SecondOfThree = SecondTupleElement<ThreeElements>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: string
type NoSecondElement = SecondTupleElement<OneElement>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: never
type NoSecondElementArray = SecondTupleElement<NotATuple>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: never
```

#### –ó–∞–¥–∞–Ω–∏–µ 3: –ò–∑–≤–ª–µ—á—å –∏–º—è —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ —Ç–∏–ø–∞ "Getters"

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –º–µ—Ç–æ–¥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω–∞ `get`. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∏–ø `GetterProperties<T>`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤ –∏–º–µ–Ω —ç—Ç–∏—Ö —Å–≤–æ–π—Å—Ç–≤, –Ω–æ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ "get". –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ `getUserId` –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å—Å—è `userId`.

```typescript
type GetterProperties<T> = /* –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å */

interface UserProfile {
    getUserId(): number;
    getUserName(): string;
    isActive(): boolean; // –ù–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞—Å—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    setId(id: number): void; // –ù–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞—Å—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
}

type UserProfileGetters = GetterProperties<UserProfile>; // –û–∂–∏–¥–∞–µ—Ç—Å—è: "UserId" | "UserName"
```

<details>
  <summary>–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è</summary>

```typescript
// –ó–∞–¥–∞–Ω–∏–µ 1: –ò–∑–≤–ª–µ—á—å —Ç–∏–ø `value` –∏–∑ –æ–±—ä–µ–∫—Ç–∞
type ExtractValue<T> = T extends { type: string; value: infer TValue } ? TValue : never;

type DataPayload = { type: 'user'; value: { id: number; name: string } };
type ErrorPayload = { type: 'error'; value: string };
type SimpleObject = { id: number };

type UserData = ExtractValue<DataPayload>; // { id: number; name: string }
type ErrorMessage = ExtractValue<ErrorPayload>; // string
type NoValue = ExtractValue<SimpleObject>; // never

const userObj: UserData = { id: 1, name: "Alice" };
const errorMsg: ErrorMessage = "Something went wrong";
// const noValueObj: NoValue = "hello"; // –û—à–∏–±–∫–∞, never

// –ó–∞–¥–∞–Ω–∏–µ 2: –ò–∑–≤–ª–µ—á—å —Ç–∏–ø –≤—Ç–æ—Ä–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ—Ä—Ç–µ–∂–∞
type SecondTupleElement<T> = T extends [any, infer S, ...any[]] ? S : never;

type TwoElements = [string, number];
type ThreeElements = [boolean, string, number];
type OneElement = [Date];
type NotATuple = string[];

type SecondOfTwo = SecondTupleElement<TwoElements>; // number
type SecondOfThree = SecondTupleElement<ThreeElements>; // string
type NoSecondElement = SecondTupleElement<OneElement>; // never
type NoSecondElementArray = SecondTupleElement<NotATuple>; // never

// const s2: SecondOfTwo = "hello"; // –û—à–∏–±–∫–∞
const s2: SecondOfTwo = 42;
const s3: SecondOfThree = "world";

// –ó–∞–¥–∞–Ω–∏–µ 3: –ò–∑–≤–ª–µ—á—å –∏–º—è —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ —Ç–∏–ø–∞ "Getters"
type GetterProperties<T> = {
    [K in keyof T]: K extends `get${infer PropName}` // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–∏ —Å–≤–æ–π—Å—Ç–≤–æ —Å 'get'
        ? T[K] extends (...args: any[]) => any // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è
            ? PropName // –ï—Å–ª–∏ –¥–∞, –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Å–≤–æ–π—Å—Ç–≤–∞ –±–µ–∑ 'get'
            : never
        : never;
}[keyof T] extends infer R // –¢–µ–ø–µ—Ä—å R - —ç—Ç–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö PropName | never
    ? Exclude<R, never> // –£–¥–∞–ª—è–µ–º 'never' –∏–∑ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
    : never;

interface UserProfile {
    getUserId(): number;
    getUserName(): string;
    isActive(): boolean;
    setId(id: number): void;
}

type UserProfileGetters = GetterProperties<UserProfile>; // "UserId" | "UserName"
// const getterName: UserProfileGetters = "userId"; // –û—à–∏–±–∫–∞: –æ–∂–∏–¥–∞–µ—Ç—Å—è "UserId"
const getterName: UserProfileGetters = "UserId";
const anotherGetter: UserProfileGetters = "UserName";
// const invalidGetter: UserProfileGetters = "isActive"; // –û—à–∏–±–∫–∞

```
</details>

### üí° –°–æ–≤–µ—Ç

`infer` ‚Äî —ç—Ç–æ –≤–∞—à –≤–µ—Ä–Ω—ã–π —Å–ø—É—Ç–Ω–∏–∫ –≤ –º–∏—Ä–µ —Å–ª–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π. –ö–æ–≥–¥–∞ –≤—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å —Å –∑–∞–¥–∞—á–µ–π, –≥–¥–µ –Ω—É–∂–Ω–æ "—Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å" —Ç–∏–ø –∏–ª–∏ –≤—ã—Ç–∞—â–∏—Ç—å –∏–∑ –Ω–µ–≥–æ –∫–∞–∫—É—é-—Ç–æ —Å–æ—Å—Ç–∞–≤–Ω—É—é —á–∞—Å—Ç—å, –≤ 99% —Å–ª—É—á–∞–µ–≤ –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏–¥–µ—Ç `infer`. –û–Ω –ª–µ–∂–∏—Ç –≤ –æ—Å–Ω–æ–≤–µ –º–Ω–æ–≥–∏—Ö –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ TypeScript (—Ç–∞–∫–∏—Ö –∫–∞–∫ `ReturnType`, `Parameters`, `InstanceType`) –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `infer` –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ, —Å–æ—á–µ—Ç–∞—è –µ–≥–æ —Å —É—Å–ª–æ–≤–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏, –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–∏—Å–∞—Ç—å —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ –≥–∏–±–∫–∏–µ –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã! –£–¥–∞—á–∏ –≤ –≤–∞—à–∏—Ö —Ç–∞–π–ø—Å–∫—Ä–∏–ø—Ç–æ–≤—ã—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö!