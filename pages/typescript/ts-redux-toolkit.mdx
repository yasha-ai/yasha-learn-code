## TypeScript: Redux Toolkit (RTK) + TypeScript

–ó–¥–∞—Ä–æ–≤–∞, –∫–æ–¥–µ—Ä—ã! –Ø—à–∞ —Å–Ω–æ–≤–∞ –Ω–∞ —Å–≤—è–∑–∏. –°–µ–≥–æ–¥–Ω—è –º—ã –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ –º–∏—Ä, –≥–¥–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—á–Ω—ã–º, –Ω–æ –∏ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—è—Ç–Ω—ã–º –±–ª–∞–≥–æ–¥–∞—Ä—è TypeScript. –ï—Å–ª–∏ –≤—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å Redux, —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–Ω–∞–µ—Ç–µ, —Å–∫–æ–ª—å–∫–æ boilerplate-–∫–æ–¥–∞ –æ–Ω –º–æ–∂–µ—Ç –ø–æ—Ä–æ–¥–∏—Ç—å. Redux Toolkit (RTK) ‚Äî —ç—Ç–æ –≤–∞—à —à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–æ–∂, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –Ω–æ –∏ –¥–µ–ª–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å Redux –≤ TypeScript –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π.

### –°—Ö–µ–º–∞ Redux Flow

```mermaid
flowchart LR
    UI[UI Component] -->|dispatch action| Store[(Redux Store)]
    Store -->|run| Reducer[Reducer]
    Reducer -->|update| State[State]
    State -->|subscribe| UI
    
    Middleware{{Middleware}} -.->|intercept| Store
    Thunk[Async Thunk] -.->|dispatch| Store
    
    style Store fill:#764abc,color:#fff
    style Reducer fill:#61dafb
    style State fill:#ffd700
    style UI fill:#e1f5ff
```

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –æ–≥—Ä–æ–º–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É –¥–∞–Ω–Ω—ã—Ö (–≤–∞—à Redux store). –†–∞–Ω—å—à–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç (—á–∞—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è) –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π, –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø–∏—Å–∞—Ç—å –∫—É—á—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ü–µ—Ö–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ (action types), –∫—É—á–∞ —Ä–∞–±–æ—á–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞—é—Ç –±—É–º–∞–≥–∏ (action creators), –∏ —Ü–µ–ª—ã–µ –æ—Ç–¥–µ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º–∏ –±—É–º–∞–≥–∞–º–∏ (reducers). –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–æ –±—ã–ª–æ –º–µ–¥–ª–µ–Ω–Ω–æ –∏ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ.

Redux Toolkit ‚Äî —ç—Ç–æ –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è —ç—Ç–æ–π —Ñ–∞–±—Ä–∏–∫–∏. –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–∏–Ω–∏–∏ —Å–±–æ—Ä–∫–∏ (—Å–ª–∞–π—Å—ã), –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª—è—é—Ç —Ä–∞–±–æ—á–∏–º–∏. –ê TypeScript? TypeScript ‚Äî —ç—Ç–æ –≤–∞—à –æ—Ç–¥–µ–ª –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –∫–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –±—ã–ª–∞ –Ω—É–∂–Ω–æ–≥–æ —Ç–∏–ø–∞, –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –æ–ø–∏—Å–∞–Ω, –∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ –≤—ã –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∏ –±–µ–∑–æ—à–∏–±–æ—á–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç. –í–º–µ—Å—Ç–µ RTK –∏ TypeScript –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç —Ä—É—Ç–∏–Ω—É –≤ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Ç–∞–Ω–µ—Ü –∫–æ–¥–∞.

### üõ†Ô∏è –û—Å–Ω–æ–≤—ã Redux Toolkit: –°–ª–∞–π—Å—ã –∏ –°—Ç–æ—Ä

–í –æ—Å–Ω–æ–≤–µ RTK –ª–µ–∂–∏—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—è **"—Å–ª–∞–π—Å–æ–≤" (slices)**. –°–ª–∞–π—Å ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤ —Å–µ–±–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ä–µ–¥—å—é—Å–µ—Ä—ã –∏ —ç–∫—à–µ–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —á–∞—Å—Ç–∏ –≤–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –≠—Ç–æ –∫–∞–∫ –º–∏–Ω–∏-–º–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, —Å–ø–∏—Å–∫–æ–º –ø–æ—Å—Ç–æ–≤, —Å—á–µ—Ç—á–∏–∫–æ–º).

#### –°–æ–∑–¥–∞–Ω–∏–µ –°–ª–∞–π—Å–∞

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–ª–∞–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–º, –∏—Å–ø–æ–ª—å–∑—É—è `createSlice`.

```typescript
// src/features/counter/counterSlice.ts
import { createSlice, PayloadAction } from '@reduxjs/toolkit';

// 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –Ω–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
interface CounterState {
  value: number;
  status: 'idle' | 'loading' | 'failed';
}

// 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState: CounterState = {
  value: 0,
  status: 'idle',
};

// 3. –°–æ–∑–¥–∞–µ–º —Å–ª–∞–π—Å —Å –ø–æ–º–æ—â—å—é createSlice
export const counterSlice = createSlice({
  name: 'counter', // –ò–º—è —Å–ª–∞–π—Å–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è action types
  initialState,   // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  reducers: {
    // Reducer –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞. RTK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç action creator 'counter/increment'.
    increment: (state) => {
      // –ó–¥–µ—Å—å –º—ã –º–æ–∂–µ–º "–º—É—Ç–∏—Ä–æ–≤–∞—Ç—å" —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é,
      // Immer.js –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å.
      state.value += 1;
    },
    // Reducer –¥–ª—è –¥–µ–∫—Ä–µ–º–µ–Ω—Ç–∞.
    decrement: (state) => {
      state.value -= 1;
    },
    // Reducer —Å payload. PayloadAction<T> —Ç–∏–ø–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É —ç–∫—à–µ–Ω–∞.
    incrementByAmount: (state, action: PayloadAction<number>) => {
      state.value += action.payload;
    },
    // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π "–∑–∞–≥–ª—É—à–∫–∞" –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
    setLoading: (state, action: PayloadAction<boolean>) => {
        state.status = action.payload ? 'loading' : 'idle';
    }
  },
});

// 4. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º action creators, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ createSlice
export const { increment, decrement, incrementByAmount, setLoading } = counterSlice.actions;

// 5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–¥—å—é—Å–µ—Ä –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ store
export default counterSlice.reducer;
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –°—Ç–æ—Ä–æ–Ω (Store)

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å —Å–ª–∞–π—Å, –µ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—à Redux Store. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º `configureStore`. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç DevTools, `thunk` middleware –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –≤–µ—â–∏.

```typescript
// src/app/store.ts
import { configureStore } from '@reduxjs/toolkit';
import counterReducer from '../features/counter/counterSlice'; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–¥—å—é—Å–µ—Ä –Ω–∞—à–µ–≥–æ —Å–ª–∞–π—Å–∞

export const store = configureStore({
  reducer: {
    counter: counterReducer, // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à —Å–ª–∞–π—Å –≤ —Å—Ç–æ—Ä
    // –ó–¥–µ—Å—å –º–æ–≥—É—Ç –±—ã—Ç—å –∏ –¥—Ä—É–≥–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–ª–∞–π—Å–æ–≤
  },
});

// 1. –í—ã–≤–æ–¥–∏–º —Ç–∏–ø—ã RootState –∏ AppDispatch –∏–∑ –Ω–∞—à–µ–≥–æ store.
// –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Ö—É–∫–æ–≤ useSelector –∏ useDispatch.
export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

`RootState` ‚Äî —ç—Ç–æ —Ç–∏–ø –≤—Å–µ–≥–æ –Ω–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞ `AppDispatch` ‚Äî —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏ `dispatch`, –∫–æ—Ç–æ—Ä–∞—è –∑–Ω–∞–µ—Ç –æ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —ç–∫—à–µ–Ω–∞—Ö –∏ thunk'–∞—Ö.

### ‚òÅÔ∏è –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å createAsyncThunk

–ß—Ç–æ –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞? Redux Toolkit –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `createAsyncThunk` –¥–ª—è —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```typescript
// src/features/users/usersSlice.ts
import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';

// 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
interface User {
  id: number;
  name: string;
  email: string;
}

// 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
interface UsersState {
  users: User[];
  status: 'idle' | 'loading' | 'failed' | 'succeeded';
  error: string | null;
}

const initialState: UsersState = {
  users: [],
  status: 'idle',
  error: null,
};

// 3. –°–æ–∑–¥–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π thunk –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// –¢–∏–ø—ã: <–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø, –¢–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –¥–ª—è thunk, –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è thunk API>
export const fetchUsers = createAsyncThunk<
  User[], // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø: –º–∞—Å—Å–∏–≤ User
  void,   // –¢–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞: void, —Ç.–∫. –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
  { rejectValue: string } // –¢–∏–ø –¥–ª—è rejectValue –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
>(
  'users/fetchUsers', // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è —ç–∫—à–µ–Ω–æ–≤ thunk'–∞
  async (_, { rejectWithValue }) => {
    try {
      const response = await fetch('https://jsonplaceholder.typicode.com/users');
      if (!response.ok) {
        throw new Error('Failed to fetch users');
      }
      const data = await response.json();
      return data as User[]; // –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∞—à–µ–º—É —Ç–∏–ø—É
    } catch (error: any) {
      return rejectWithValue(error.message); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É —á–µ—Ä–µ–∑ rejectWithValue
    }
  }
);

export const usersSlice = createSlice({
  name: 'users',
  initialState,
  reducers: {
    // –ó–¥–µ—Å—å –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã
  },
  // extraReducers –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç–∫—à–µ–Ω—ã, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ù–ï —ç—Ç–∏–º —Å–ª–∞–π—Å–æ–º.
  // –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ —ç–∫—à–µ–Ω—ã –æ—Ç createAsyncThunk.
  extraReducers: (builder) => {
    builder
      .addCase(fetchUsers.pending, (state) => {
        state.status = 'loading';
        state.error = null;
      })
      .addCase(fetchUsers.fulfilled, (state, action: PayloadAction<User[]>) => {
        state.status = 'succeeded';
        state.users = action.payload;
      })
      .addCase(fetchUsers.rejected, (state, action) => {
        state.status = 'failed';
        state.error = action.payload as string || 'An unknown error occurred';
      });
  },
});

export default usersSlice.reducer;
```

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `usersSlice.reducer` –≤ `store.ts`!

### üì° RTK Query: –£–ø—Ä–æ—â–∞–µ–º –ó–∞–ø—Ä–æ—Å—ã –∫ API

–î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã —Å API, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ö—É–∫–æ–≤, RTK –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç **RTK Query**. –≠—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ thunk'–æ–≤ –∏ —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤.

```typescript
// src/services/jsonplaceholderApi.ts
import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ—Å—Ç–∞
interface Post {
  userId: number;
  id: number;
  title: string;
  body: string;
}

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—à API —Å–µ—Ä–≤–∏—Å
export const jsonplaceholderApi = createApi({
  reducerPath: 'jsonplaceholderApi', // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è —Ä–µ–¥—å—é—Å–µ—Ä–∞ API
  baseQuery: fetchBaseQuery({ baseUrl: 'https://jsonplaceholder.typicode.com/' }), // –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  endpoints: (builder) => ({
    // Endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤
    getPosts: builder.query<Post[], void>({ // <–¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –¢–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞>
      query: () => 'posts', // –ü—É—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ baseUrl
    }),
    // Endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ –ø–æ ID
    getPostById: builder.query<Post, number>({
        query: (id) => `posts/${id}`,
    }),
    // Endpoint –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞ (–º—É—Ç–∞—Ü–∏—è)
    createPost: builder.mutation<Post, Omit<Post, 'id' | 'userId'>>({ // Omit - –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π
      query: (newPost) => ({
        url: 'posts',
        method: 'POST',
        body: newPost,
      }),
    }),
  }),
});

// RTK Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç React-—Ö—É–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
export const { useGetPostsQuery, useGetPostByIdQuery, useCreatePostMutation } = jsonplaceholderApi;
```

–î–æ–±–∞–≤—å—Ç–µ —Ä–µ–¥—å—é—Å–µ—Ä `jsonplaceholderApi.reducer` –≤ `store.ts` –∏ `jsonplaceholderApi.middleware` –≤ `middleware` –≤–∞—à–µ–≥–æ —Å—Ç–æ—Ä–∞:

```typescript
// src/app/store.ts (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)
import { configureStore } from '@reduxjs/toolkit';
import counterReducer from '../features/counter/counterSlice';
import usersReducer from '../features/users/usersSlice';
import { jsonplaceholderApi } from '../services/jsonplaceholderApi'; // –ò–º–ø–æ—Ä—Ç API —Å–µ—Ä–≤–∏—Å–∞

export const store = configureStore({
  reducer: {
    counter: counterReducer,
    users: usersReducer,
    [jsonplaceholderApi.reducerPath]: jsonplaceholderApi.reducer, // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–¥—å—é—Å–µ—Ä RTK Query
  },
  // –î–æ–±–∞–≤–ª—è–µ–º middleware RTK Query –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Ç.–¥.
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware().concat(jsonplaceholderApi.middleware),
});

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

### üîó –¢–∏–ø–∏–∑–∏—Ä—É–µ–º –•—É–∫–∏: useSelector –∏ useDispatch

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `useSelector` –∏ `useDispatch` –≤ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, —Å–æ–∑–¥–∞–π—Ç–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —ç—Ç–∏—Ö —Ö—É–∫–æ–≤.

**–°–º. —Ç–∞–∫–∂–µ:** [React Hooks](/react/hooks) | [useCallback](/react/use-callback) | [useMemo](/react/use-memo)

```typescript
// src/app/hooks.ts
import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';
import type { RootState, AppDispatch } from './store';

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö—É–∫–∏ –ø–æ –≤—Å–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω—ã—Ö useDispatch –∏ useSelector
export const useAppDispatch: () => AppDispatch = useDispatch;
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;
```

–¢–µ–ø–µ—Ä—å –≤ –≤–∞—à–∏—Ö React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useAppDispatch` –∏ `useAppSelector` –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π:

```typescript
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
import React from 'react';
import { useAppSelector, useAppDispatch } from '../../app/hooks';
import { increment, decrement, incrementByAmount } from './counterSlice';
import { fetchUsers } from '../users/usersSlice'; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —é–∑–µ—Ä—ã —Ç–æ–∂–µ —Ç—É—Ç

function CounterComponent() {
  const count = useAppSelector((state) => state.counter.value);
  const counterStatus = useAppSelector((state) => state.counter.status);
  const users = useAppSelector((state) => state.users.users);
  const usersStatus = useAppSelector((state) => state.users.status);
  const dispatch = useAppDispatch();

  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RTK Query
  // const { data: posts, error, isLoading } = useGetPostsQuery();

  return (
    <div>
      <p>–°—á–µ—Ç—á–∏–∫: {count} (–°—Ç–∞—Ç—É—Å: {counterStatus})</p>
      <button onClick={() => dispatch(increment())}>–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç</button>
      <button onClick={() => dispatch(decrement())}>–î–µ–∫—Ä–µ–º–µ–Ω—Ç</button>
      <button onClick={() => dispatch(incrementByAmount(5))}>–î–æ–±–∞–≤–∏—Ç—å 5</button>

      <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: {usersStatus}</p>
      <button onClick={() => dispatch(fetchUsers())}>–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
      {usersStatus === 'loading' && <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>}
      {usersStatus === 'succeeded' && (
        <ul>
          {users.map((user) => (
            <li key={user.id}>{user.name} ({user.email})</li>
          ))}
        </ul>
      )}
      {/* ... –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∏–∑ RTK Query ... */}
    </div>
  );
}

export default CounterComponent;
```

### üêõ –¢–∏–ø–∏—á–Ω—ã–µ –û—à–∏–±–∫–∏ –∏ –ö–∞–∫ –ò—Ö –ò–∑–±–µ–∂–∞—Ç—å

1.  **–ó–∞–±—ã–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `RootState` –∏ `AppDispatch`**: –ë–µ–∑ –Ω–∏—Ö `useSelector` –∏ `useDispatch` –Ω–µ –±—É–¥—É—Ç –∑–Ω–∞—Ç—å —Ç–∏–ø—ã –≤–∞—à–µ–≥–æ —Å—Ç–æ—Ä–∞, –∏ –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏–≤–æ–¥–∏—Ç—å —Ç–∏–ø—ã –≤–µ–∑–¥–µ. –í—Å–µ–≥–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –∏–∑ `store.ts` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤.
2.  **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è `PayloadAction`**: –ï—Å–ª–∏ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –≤ —Ä–µ–¥—å—é—Å–µ—Ä, –≤—Å–µ–≥–¥–∞ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–∏–ø `PayloadAction<YourType>`. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç TypeScript –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
3.  **–ù–µ–≤–µ—Ä–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è `createAsyncThunk`**: –°–∞–º–∞—è —á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞. –ü–æ–º–Ω–∏—Ç–µ –æ –ø–æ—Ä—è–¥–∫–µ –≥–µ–Ω–µ—Ä–∏–∫-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: `<–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π–¢–∏–ø, –¢–∏–ø–ê—Ä–≥—É–º–µ–Ω—Ç–∞, –¢–∏–ø–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏–¢–∞–Ω–∫–∞>`. –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–µ–Ω `–¢–∏–ø–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏–¢–∞–Ω–∫–∞` –¥–ª—è `rejectValue`.
4.  **–ú—É—Ç–∞—Ü–∏–∏ –≤–Ω–µ Redux Toolkit**: –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ "–º—É—Ç–∏—Ä–æ–≤–∞—Ç—å" —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `state.value += 1`) –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `createSlice` –±–ª–∞–≥–æ–¥–∞—Ä—è Immer.js. –í –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö) –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ –º–∞—Å—Å–∏–≤—ã.
5.  **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ `extraReducers`**: –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ `rejected` —Å–æ—Å—Ç–æ—è–Ω–∏–µ thunk'–æ–≤. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ—Ç–ª–∞–≤–ª–∏–≤–∞—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í—Ä–µ–º—è –∑–∞–∫—Ä–µ–ø–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª! –°–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ Redux –ª–æ–≥–∏–∫—É:

1.  **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `counterSlice`**: –î–æ–±–∞–≤—å—Ç–µ –≤ `counterSlice` –Ω–æ–≤—ã–π `reducer`:
    *   `reset`: —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `value` –¥–æ 0.
    *   `setCustomValue`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `PayloadAction<number | string>` –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `value`. –ï—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–∞, –ø–æ–ø—ã—Ç–∞–π—Ç–µ—Å—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –µ–µ –≤ —á–∏—Å–ª–æ; –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `value` –≤ 0 –∏ –≤—ã–≤–µ–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å (–∏–ª–∏ –≤ –ø–æ–ª–µ `error` —Å–æ—Å—Ç–æ—è–Ω–∏—è). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `CounterState` –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å `error` (—Ç–∏–ø `string | null`).
2.  **`todosSlice` —Å CRUD-–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é**:
    *   –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–ª–∞–π—Å `todosSlice` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á.
    *   –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Todo`: `{ id: string; text: string; completed: boolean; }`.
    *   –î–æ–±–∞–≤—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã:
        *   `addTodo`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `PayloadAction<string>` (—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏) –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º `id`, `completed: false`.
        *   `toggleTodo`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `PayloadAction<string>` (id –∑–∞–¥–∞—á–∏) –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç `completed` —É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞—á–∏.
        *   `removeTodo`: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `PayloadAction<string>` (id –∑–∞–¥–∞—á–∏) –∏ —É–¥–∞–ª—è–µ—Ç –∑–∞–¥–∞—á—É.
    *   –î–æ–±–∞–≤—å—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π thunk `fetchTodos` —Å –ø–æ–º–æ—â—å—é `createAsyncThunk`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∏–∑ —Ñ–∏–∫—Ç–∏–≤–Ω–æ–≥–æ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, `fetch('https://jsonplaceholder.typicode.com/todos?_limit=5')`). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ (pending, fulfilled, rejected) –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `todosSlice`.
3.  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RTK Query –¥–ª—è –ø–æ—Å—Ç–æ–≤**:
    *   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `jsonplaceholderApi` (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –¥–ª—è `json-server`) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤.
    *   –í React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useGetPostsQuery` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ –∏ `useGetPostByIdQuery` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –Ω–µ–≥–æ.
    *   –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç", –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useCreatePostMutation` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

### üí° –°–æ–≤–µ—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ TypeScript –ø–æ –º–∞–∫—Å–∏–º—É–º—É! –ß–µ–º —Ç–æ—á–Ω–µ–µ –≤—ã –æ–ø–∏—à–µ—Ç–µ —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, `PayloadAction` –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `createAsyncThunk`, —Ç–µ–º –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –≤—ã —Å–æ–≤–µ—Ä—à–∏—Ç–µ –∏ —Ç–µ–º –ª–µ–≥—á–µ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–∞—à –∫–æ–¥. Redux Toolkit + TypeScript ‚Äî —ç—Ç–æ –º–æ—â–Ω–µ–π—à–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Ç–æ–ª—å–∫–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –Ω–æ –∏ –¥–µ–ª–∞–µ—Ç –µ—ë –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π. –ù–µ –±–æ–π—Ç–µ—Å—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å RTK Query ‚Äî –æ–Ω –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ boilerplate-–∫–æ–¥–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API!


## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä

<Sandpack
  template="vanilla-ts"
  files={{
    "/index.ts": `
import './style.css';
import { configureStore, createSlice, PayloadAction } from '@reduxjs/toolkit';

// 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –Ω–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
interface CounterState {
  value: number;
  status: 'idle' | 'loading' | 'failed';
}

// 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const initialState: CounterState = {
  value: 0,
  status: 'idle',
};

// 3. –°–æ–∑–¥–∞–µ–º —Å–ª–∞–π—Å —Å –ø–æ–º–æ—â—å—é createSlice
export const counterSlice = createSlice({
  name: 'counter', // –ò–º—è —Å–ª–∞–π—Å–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è action types
  initialState,   // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  reducers: {
    // Reducer –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞. RTK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç action creator 'counter/increment'.
    increment: (state) => {
      // –ó–¥–µ—Å—å –º—ã –º–æ–∂–µ–º "–º—É—Ç–∏—Ä–æ–≤–∞—Ç—å" —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é, –±–ª–∞–≥–æ–¥–∞—Ä—è Immer.js
      state.value += 1;
    },
    // Reducer –¥–ª—è –¥–µ–∫—Ä–µ–º–µ–Ω—Ç–∞
    decrement: (state) => {
      state.value -= 1;
    },
    // Reducer –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –≤–µ–ª–∏—á–∏–Ω—É (payload)
    incrementByAmount: (state, action: PayloadAction<number>) => {
      state.value += action.payload;
    },
  },
});

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º action creators, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
export const { increment, decrement, incrementByAmount } = counterSlice.actions;

// –°–æ–∑–¥–∞–µ–º Redux store
const store = configureStore({
  reducer: {
    counter: counterSlice.reducer, // –ü–æ–¥–∫–ª—é—á–∞–µ–º reducer –∏–∑ —Å–ª–∞–π—Å–∞
  },
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –∏–∑ store
const getCounterValue = () => store.getState().counter.value;

// –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ store –∏ –æ–±–Ω–æ–≤–ª—è–µ–º UI
store.subscribe(() => {
  const counterValue = getCounterValue();
  document.getElementById('counter-value')!.innerText = counterValue.toString();
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
const updateUI = () => {
  const counterValue = getCounterValue();
  document.getElementById('counter-value')!.innerText = counterValue.toString();
};

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
document.getElementById('increment-button')!.addEventListener('click', () => {
  store.dispatch(increment());
});

document.getElementById('decrement-button')!.addEventListener('click', () => {
  store.dispatch(decrement());
});

document.getElementById('increment-by-amount-button')!.addEventListener('click', () => {
  const amount = parseInt((document.getElementById('amount-input') as HTMLInputElement).value) || 0;
  store.dispatch(incrementByAmount(amount));
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI
updateUI();
`
    ,
    "/style.css": `
body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 10px 20px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 5px;
}

button:hover {
  opacity: 0.8;
}

input[type=number] {
  padding: 10px;
  margin: 5px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

#counter-value {
  font-size: 2em;
  margin: 20px;
}
`
    ,
    "/index.html": `
<!DOCTYPE html>
<html>
<head>
  <title>Redux Toolkit + TypeScript</title>
  <meta charset="UTF-8" />
