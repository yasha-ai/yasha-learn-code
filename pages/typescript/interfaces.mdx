```markdown
# TypeScript: Броня - Интерфейсы


![Иллюстрация к уроку](/lessons/typescript-interfaces.png)
Интерфейсы в TypeScript — это мощный инструмент для определения структуры объектов. Они позволяют нам описывать, какие свойства и методы должны присутствовать в объекте, обеспечивая статическую типизацию и повышая надежность кода.

## Что такое интерфейс?

Интерфейс можно представить как контракт. Он говорит: "Все, кто хочет соответствовать этому интерфейсу, должны иметь определенные свойства и методы с определенными типами". Интерфейсы не создают экземпляры объектов, они просто описывают их форму.

```typescript
interface User {
  id: number;
  name: string;
  age: number;
  greet(phrase: string): string; // Метод, возвращающий строку
}
```

В этом примере мы определили интерфейс `User`.  Он требует, чтобы любой объект, реализующий этот интерфейс, имел:

*   свойство `id` типа `number`
*   свойство `name` типа `string`
*   свойство `age` типа `number`
*   метод `greet`, принимающий строку `phrase` и возвращающий строку.

## Реализация интерфейса

Чтобы объект соответствовал интерфейсу, нужно, чтобы он содержал все свойства и методы, описанные в интерфейсе, с правильными типами.

```typescript
const user1: User = {
  id: 1,
  name: "John Doe",
  age: 30,
  greet(phrase: string) {
    return `${phrase}, my name is ${this.name}`;
  },
};

console.log(user1.greet("Hello")); // Вывод: Hello, my name is John Doe
```

Если мы попытаемся создать объект, который не соответствует интерфейсу, TypeScript выдаст ошибку:

```typescript
// Ошибка: Отсутствует свойство 'greet' в типе '{ id: number; name: string; age: number; }', но требуется в типе 'User'.
// const user2: User = {
//   id: 2,
//   name: "Jane Doe",
//   age: 25,
// };
```

## Необязательные свойства

Интерфейсы также могут содержать необязательные свойства.  Они помечаются знаком вопроса `?`.

```typescript
interface Product {
  id: number;
  name: string;
  description?: string; // Необязательное свойство
  price: number;
}

const product1: Product = {
  id: 1,
  name: "Laptop",
  price: 1200,
};

const product2: Product = {
  id: 2,
  name: "Mouse",
  description: "Wireless mouse",
  price: 25,
};
```

## Жизненный пример

Интерфейсы широко используются в React, Angular и других фреймворках для определения структуры данных, передаваемых между компонентами. Например, в React можно использовать интерфейсы для определения типа props:

```typescript
interface Props {
  title: string;
  content: string;
}

const MyComponent: React.FC<Props> = ({ title, content }) => {
  return (
    <div>
      <h1>{title}</h1>
      <p>{content}</p>
    </div>
  );
};
```

Здесь интерфейс `Props` описывает структуру данных, которые компонент `MyComponent` принимает в качестве props. Это помогает гарантировать, что компонент получает ожидаемые данные и работает правильно.  Также, API запросы часто используют интерфейсы для типизации возвращаемых данных.

## Ключевые моменты

*   Интерфейсы определяют структуру объектов.
*   Все свойства и методы, указанные в интерфейсе, должны присутствовать в объекте, реализующем интерфейс.
*   Необязательные свойства помечаются знаком вопроса `?`.
*   Интерфейсы широко используются для типизации данных в React, Angular и других фреймворках.
*   Обеспечивают статическую типизацию и повышают надежность кода.
```


## Интерактивный пример

<Sandpack
  template="vanilla-ts"
  files={{
    "/index.ts": `
// TypeScript: Интерфейсы

// Определяем интерфейс User
interface User {
  id: number;
  name: string;
  age: number;
  greet(phrase: string): string;
  // Необязательное свойство:
  nickname?: string;
}

// Реализуем интерфейс User
const user1: User = {
  id: 1,
  name: "John Doe",
  age: 30,
  greet(phrase: string) {
    return \`\${phrase}, my name is \${this.name}\`;
  },
  nickname: "Johnny"
};

// Функция, принимающая User в качестве аргумента
function displayUserInfo(user: User) {
  let nicknameInfo = user.nickname ? \` (Nickname: \${user.nickname})\` : "";
  return \`ID: \${user.id}, Name: \${user.name}, Age: \${user.age}\${nicknameInfo}, Greeting: \${user.greet("Hello")}\`;
}

// Создаем элемент div для отображения информации о пользователе
const userInfoDiv = document.createElement("div");
userInfoDiv.style.padding = "20px";
userInfoDiv.style.fontFamily = "sans-serif";
userInfoDiv.style.backgroundColor = "#282c34";
userInfoDiv.style.color = "white";

userInfoDiv.innerHTML = \`
  <h2>User Information</h2>
  <p>\${displayUserInfo(user1)}</p>
\`;

// Добавляем div на страницу
document.body.appendChild(userInfoDiv);

// Создаем интерфейс для продукта
interface Product {
  id: number;
  name: string;
  price: number;
  description?: string; // Необязательное свойство
}

// Создаем массив продуктов, используя интерфейс Product
const products: Product[] = [
  { id: 1, name: "Laptop", price: 1200 },
  { id: 2, name: "Mouse", price: 25, description: "Wireless mouse" },
];

// Функция для отображения информации о продукте
function displayProductInfo(product: Product) {
  let descriptionInfo = product.description ? \` (Description: \${product.description})\` : "";
  return \`ID: \${product.id}, Name: \${product.name}, Price: \$\${product.price}\${descriptionInfo}\`;
}

// Создаем элемент div для отображения информации о продуктах
const productInfoDiv = document.createElement("div");
productInfoDiv.style.padding = "20px";
productInfoDiv.style.fontFamily = "sans-serif";
productInfoDiv.style.backgroundColor = "#3e4451";
productInfoDiv.style.color = "white";

productInfoDiv.innerHTML = \`
  <h2>Products</h2>
  <ul>
    \${products.map(product => \`<li>\${displayProductInfo(product)}</li>\`).join("")}
  </ul>
\`;

// Добавляем div на страницу
document.body.appendChild(productInfoDiv);

// Добавляем интерактивность: кнопка для изменения возраста пользователя
const changeAgeButton = document.createElement("button");
changeAgeButton.textContent = "Increase John's Age";
changeAgeButton.style.padding = "10px";
changeAgeButton.style.fontFamily = "sans-serif";
changeAgeButton.style.backgroundColor = "#61dafb";
changeAgeButton.style.border = "none";
changeAgeButton.style.borderRadius = "5px";
changeAgeButton.style.cursor = "pointer";
changeAgeButton.style.marginTop = "10px";

changeAgeButton.addEventListener("click", () => {
  user1.age += 1;
  userInfoDiv.innerHTML = \`
    <h2>User Information</h2>
    <p>\${displayUserInfo(user1)}</p>
  \`;
});

document.body.appendChild(changeAgeButton);

// Стили для body
document.body.style.backgroundColor = "#282c34";
document.body.style.color = "white";
`,
    "/index.html": `
<!DOCTYPE html>
<html>
<head>
  <title>TypeScript Interfaces Example</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #282c34;
      color: white;
    }
  </style>
</head>
<body>
  <div id="app"></div>
  <script src="./index.ts"></script>
</body>
</html>
`,
    "/sandbox.config.json": `{
      "infiniteLoopProtection": false,
      "hardReloadOnSandBoxChange": true,
      "view": "browser"
    }`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400,
    theme: 'dark'
  }}
/>
