## TypeScript: –ú–æ—â–Ω—ã–π –¥—É—ç—Ç —Å Express

–ü—Ä–∏–≤–µ—Ç, —è—à–∞-–ª–µ—Ä–Ω–µ—Ä—ã! –°–µ–≥–æ–¥–Ω—è –º—ã —É–≥–ª—É–±–∏–º—Å—è –≤ –º–∏—Ä –±—ç–∫–µ–Ω–¥–∞ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ TypeScript –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å Express –∏–∑ –¥–∏–∫–æ–π –∑–∞–ø–∞–¥–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ —Å `any` –≤ —Ö–æ—Ä–æ—à–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π —Å–∏–º—Ñ–æ–Ω–∏—á–µ—Å–∫–∏–π –æ—Ä–∫–µ—Å—Ç—Ä. –í—ã —É–∂–µ –≤–∏—Ä—Ç—É–æ–∑–Ω–æ –≤–ª–∞–¥–µ–µ—Ç–µ –±–∞–∑–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏, –∞ –∑–Ω–∞—á–∏—Ç, –≥–æ—Ç–æ–≤—ã –ø–æ–¥–Ω—è—Ç—å —Å–≤–æ–∏ Express-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### üöÄ –ó–∞—á–µ–º TypeScript –Ω—É–∂–µ–Ω Express?

Express —Å–∞–º –ø–æ —Å–µ–±–µ ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –Ω–µ—Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫. –û–Ω –∫–∞–∫ —á–∏—Å—Ç—ã–π —Ö–æ–ª—Å—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ. –ù–æ –∫–æ–≥–¥–∞ –≤–∞—à –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å—Ç–µ—Ç, —ç—Ç–æ—Ç —Ö–æ–ª—Å—Ç –º–æ–∂–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π –∫–ª—É–±–æ–∫ –Ω–∏—Ç–æ–∫. –ì–¥–µ –∫–∞–∫–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö? –ß—Ç–æ –≤–µ—Ä–Ω–µ—Ç —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è? –ö–∞–∫–∏–µ –ø–æ–ª—è –µ—Å—Ç—å —É `req.body`? –ë–µ–∑ TypeScript –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ —ç—Ç–æ –≤ –≥–æ–ª–æ–≤–µ –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ª–µ–∑—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é/–∏—Å—Ö–æ–¥–Ω–∏–∫–∏.

TypeScript –∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
1.  **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ç–∏–ø–∞–º–∏, –µ—â–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.
2.  **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ**: –í–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä (VS Code, –ø—Ä–∏–≤–µ—Ç!) –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤.
3.  **–õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–º, –∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ä–∞–∑–¥–æ –ª–µ–≥—á–µ –≤–Ω–æ—Å–∏—Ç—å –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ —Å–ª–æ–º–∞—Ç—å —á—Ç–æ-—Ç–æ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ.
4.  **–ß–µ—Ç–∫–∏–π API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç**: –í–∞—à–∏ —Ä–æ—É—Ç—ã –∏ –º–∏–¥–¥–ª–≤–∞—Ä—ã –±—É–¥—É—Ç —è–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ –æ–∂–∏–¥–∞—é—Ç –∏ —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç.

### üõ†Ô∏è –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è

–ü—Ä–µ–∂–¥–µ —á–µ–º –º—ã –Ω–∞—á–Ω–µ–º, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Express –∏ –µ–≥–æ —Ç–∏–ø–æ–≤—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:

```bash
npm install express
npm install --save-dev @types/express
```

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä:

```typescript
// src/app.ts
import express, { Request, Response, NextFunction } from 'express';

const app = express();
const PORT = 3000;

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const loggerMiddleware = (req: Request, res: Response, next: NextFunction) => {
    console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
    next(); // –ü–µ—Ä–µ–¥–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É middleware/—Ä–æ—É—Ç—É
};

app.use(loggerMiddleware);
app.use(express.json()); // Middleware –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

// –ü—Ä–æ—Å—Ç–æ–π GET —Ä–æ—É—Ç
app.get('/', (req: Request, res: Response) => {
    // TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–∏–ø—ã req –∏ res –∏–∑ –ø–∞–∫–µ—Ç–∞ @types/express
    res.send('–ü—Ä–∏–≤–µ—Ç, Yasha Learner! –°–µ—Ä–≤–µ—Ä Express —Å TypeScript —Ä–∞–±–æ—Ç–∞–µ—Ç!');
});

// –†–æ—É—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ POST –∑–∞–ø—Ä–æ—Å–∞ —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–ª–æ–º
interface CreateProductBody {
    name: string;
    price: number;
    description?: string;
}

app.post('/products', (req: Request<{}, {}, CreateProductBody>, res: Response) => {
    // req.body —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —Ç–∏–ø CreateProductBody!
    const { name, price, description } = req.body;

    if (!name || typeof price !== 'number') {
        return res.status(400).json({ message: '–ò–º—è –ø—Ä–æ–¥—É–∫—Ç–∞ –∏ —Ü–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.' });
    }

    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ –ë–î
    const newProduct = { id: Date.now().toString(), name, price, description };
    res.status(201).json(newProduct);
});

app.listen(PORT, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${PORT}`);
});
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ `Request`, `Response` –∏ `NextFunction` –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ `express`. TypeScript —Å—Ä–∞–∑—É –∂–µ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–º–æ–≥–∞—Ç—å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è `req.method`, `req.url`, `res.send` –∏ –¥—Ä—É–≥–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.
–î–ª—è `POST /products` –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–∂–µ–Ω–µ—Ä–∏–∫ `Request<{}, {}, CreateProductBody>` –¥–ª—è —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞. –ü—É—Å—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ –ø–µ—Ä–≤—ã—Ö –¥–≤—É—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö (`Params`, `ResBody`) –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ –º—ã –Ω–µ –æ–∂–∏–¥–∞–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URL –∏–ª–∏ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ (–ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –∏—Ö –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —è–≤–Ω–æ –≤ –¥–∂–µ–Ω–µ—Ä–∏–∫–µ `Request`).

### ‚ú® –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è: –†–∞—Å—à–∏—Ä—è–µ–º `Request`

–û—á–µ–Ω—å —á–∞—Å—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –æ–±—ä–µ–∫—Ç `req` –≤ middleware (–Ω–∞–ø—Ä–∏–º–µ—Ä, `req.user` –ø–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ `req.tenantId` –≤ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö). –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è _–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π_ (declaration merging) –≤ TypeScript.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `src/types/express.d.ts` (–∏–ª–∏ `index.d.ts` –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/types`), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω Express:

```typescript
// src/types/express.d.ts
// –í–∞–∂–Ω–æ: —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–º –º–æ–¥—É–ª–µ–º.
// –ï—Å–ª–∏ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç import/export –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è (–∫—Ä–æ–º–µ import { Request } from 'express'),
// TypeScript –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ,
// –ª–∏–±–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç export {} –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ, –ª–∏–±–æ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ `export {};`
// –¥–ª—è —è–≤–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –µ–≥–æ –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è import.

import { Request } from 'express'; // –ò–º–ø–æ—Ä—Ç –∑–¥–µ—Å—å - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

declare global {
  namespace Express {
    // –†–∞—Å—à–∏—Ä—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Request, –¥–æ–±–∞–≤–ª—è—è –Ω–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è
    interface Request {
      user?: {
        id: string;
        email: string;
        roles: string[];
      };
      tenantId?: string;
    }
  }
}

// –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã/—ç–∫—Å–ø–æ—Ä—Ç—ã –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ, –¥–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ:
// export {};
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `tsconfig.json` –≤–∫–ª—é—á–∞–µ—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª:

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "es2020",
    "module": "commonjs",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*.ts", "src/types/**/*.d.ts"], // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à d.ts —Ñ–∞–π–ª –≤–∫–ª—é—á–µ–Ω
  "exclude": ["node_modules"]
}
```

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ `Request` —Ä–∞—Å—à–∏—Ä–µ–Ω, –¥–∞–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ –≤ middleware –∏ —Ä–æ—É—Ç–µ:

```typescript
// src/app.ts (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)

// Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç req.user
const authMiddleware = (req: Request, res: Response, next: NextFunction) => {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞, —Å–µ—Å—Å–∏–∏ –∏ —Ç.–¥.
    const authToken = req.headers.authorization;

    if (authToken && authToken === 'Bearer mysecrettoken') {
        // –ú—ã –¥–æ–±–∞–≤–ª—è–µ–º user –∫ req, –∏ TypeScript —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç –µ–≥–æ —Ç–∏–ø!
        req.user = {
            id: 'user_123',
            email: 'admin@example.com',
            roles: ['admin', 'editor'],
        };
        next();
    } else {
        res.status(401).json({ message: '–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω' });
    }
};

// –†–æ—É—Ç, —Ç—Ä–µ–±—É—é—â–∏–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
app.get('/profile', authMiddleware, (req: Request, res: Response) => {
    // req.user —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —Ç–∏–ø { id: string; email: string; roles: string[]; } | undefined
    if (req.user) {
        res.json({
            message: `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${req.user.email}!`,
            yourRoles: req.user.roles,
        });
    } else {
        // –≠—Ç–æ—Ç else –±–ª–æ–∫ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º, –µ—Å–ª–∏ authMiddleware —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ,
        // –Ω–æ TypeScript —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —Ç.–∫. req.user –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω.
        res.status(401).json({ message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∑–∞–ø—Ä–æ—Å–µ.' });
    }
});
```

### üö® –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫

–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ –≤ Express –∏–º–µ—é—Ç 4 –∞—Ä–≥—É–º–µ–Ω—Ç–∞: `(err, req, res, next)`. TypeScript –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø `ErrorRequestHandler` –¥–ª—è –Ω–∏—Ö:

```typescript
// src/app.ts (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
import { ErrorRequestHandler } from 'express'; // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∏–º–ø–æ—Ä—Ç

// –û–ø—Ä–µ–¥–µ–ª–∏–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å
interface HttpError extends Error {
    statusCode?: number;
    data?: any;
}

// –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
const errorHandler: ErrorRequestHandler = (err: HttpError, req, res, next) => {
    console.error('–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—à–∏–±–∫–∞:', err);

    // –ï—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ —É–∂–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã, –ø–µ—Ä–µ–¥–∞–µ–º –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ
    // –≠—Ç–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ "Can't set headers after they are sent to the client"
    if (res.headersSent) {
        return next(err);
    }

    const statusCode = err.statusCode || 500;
    const message = err.message || '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';

    res.status(statusCode).json({
        message: message,
        data: err.data, // –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    });
};

// –ü—Ä–∏–º–µ—Ä —Ä–æ—É—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É
app.get('/error-test', (req: Request, res: Response, next: NextFunction) => {
    const error: HttpError = new Error('–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –Ω–∞ /error-test!');
    error.statusCode = 400;
    // –û—à–∏–±–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ next() –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º
    next(error);
});

// –í–∞–∂–Ω–æ: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ü–û–°–õ–ï –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤
// –∏ –¥—Ä—É–≥–∏—Ö middleware, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏.
app.use(errorHandler);
```

### üí° –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

1.  **–ó–∞–±—ã–ª–∏ `@types/express`**: `Error: Cannot find module 'express' or its corresponding type declarations.`
    *   **–†–µ—à–µ–Ω–∏–µ**: `npm install --save-dev @types/express`.
2.  **`req.body` –∏–ª–∏ `req.query` –∏–º–µ–µ—Ç —Ç–∏–ø `any`**: –ï—Å–ª–∏ –≤—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Ç–∏–ø—ã –≤ –¥–∂–µ–Ω–µ—Ä–∏–∫–µ `Request` –∏–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `express.json()`, TypeScript –±—É–¥–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–∏—á–∞—Ç—å.
    *   **–†–µ—à–µ–Ω–∏–µ**:
        *   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `app.use(express.json())` –∏ `app.use(express.urlencoded({ extended: true }))`.
        *   –Ø–≤–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä—É–π—Ç–µ `req.body`, `req.query`, `req.params` —Å –ø–æ–º–æ—â—å—é –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ `Request<Params, ResBody, ReqBody, ReqQuery>`.
        *   –ò–ª–∏ —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ `Request` —á–µ—Ä–µ–∑ declaration merging –¥–ª—è –æ–±—â–∏—Ö —Å–≤–æ–π—Å—Ç–≤.
3.  **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `Request`**: `Property 'user' does not exist on type 'Request<ParamsDictionary, any, any, ParsedQs, Record<string, any>>'.`
    *   **–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à `express.d.ts` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –≤–∫–ª—é—á–µ–Ω –≤ `tsconfig.json` —á–µ—Ä–µ–∑ `include`, –∏ —á—Ç–æ –æ–Ω —è–≤–ª—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º –º–æ–¥—É–ª–µ–º (–±–µ–∑ `import`/`export` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –∏–ª–∏ —Å `export {};` –≤ –∫–æ–Ω—Ü–µ).

### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í–∞—à —á–µ—Ä–µ–¥, —è—à–∞-–∫–æ–¥–µ—Ä! –£–∫—Ä–µ–ø–∏–º –∑–Ω–∞–Ω–∏—è:

1.  **–°–æ–∑–¥–∞–π—Ç–µ middleware –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ API –∫–ª—é—á–∞**:
    *   –û–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-api-key`.
    *   –ï—Å–ª–∏ –∫–ª—é—á –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SUPER_SECRET_KEY`), –æ–Ω –¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `req.apiKeyUser: { id: string; name: string; }` –≤ –æ–±—ä–µ–∫—Ç `Request` —á–µ—Ä–µ–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ (`src/types/express.d.ts`).
    *   –ï—Å–ª–∏ –∫–ª—é—á –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, middleware –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É 401 —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π API –∫–ª—é—á".
    *   –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç `/data` –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç middleware –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ `Hello, {req.apiKeyUser.name}!`.
2.  **–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–æ—É—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤**:
    *   –†–æ—É—Ç: `GET /search-products`
    *   –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (`req.query`): `query: string` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) –∏ `category?: string` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π).
    *   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ `{ id: string; name: string; category: string; }[]`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ "General".
    *   –í–µ—Ä–Ω–∏—Ç–µ 400, –µ—Å–ª–∏ `query` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–ü–∞—Ä–∞–º–µ—Ç—Ä 'query' –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω".
3.  **–°–æ–∑–¥–∞–π—Ç–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**:
    *   –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–ª–∞—Å—Å `UserController`.
    *   –í–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ —Å–æ–∑–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `getUsers(req: Request, res: Response)` –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π `{ id: string; username: string; }[]` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
    *   –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç `app.get('/users', UserController.getUsers)`.

### üí° –°–æ–≤–µ—Ç

–í—Å–µ–≥–¥–∞ —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏. –ß–µ–º –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ TypeScript –∑–Ω–∞–µ—Ç –æ –≤–∞—à–µ–º –∫–æ–¥–µ, —Ç–µ–º –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –≤—ã —Å–æ–≤–µ—Ä—à–∏—Ç–µ –∏ —Ç–µ–º –ª–µ–≥—á–µ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç. –î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å Express —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å —É—á–µ—Ç–æ–º TypeScript (–Ω–∞–ø—Ä–∏–º–µ—Ä, [NestJS](https://nestjs.com/) –∏–ª–∏ [TypeGraphQL](https://typegraphql.com/)), —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –µ—â–µ –±–æ–ª–µ–µ –º–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ API. –ù–æ –¥–∞–∂–µ "–≥–æ–ª—ã–π" Express —Å TypeScript ‚Äî —ç—Ç–æ —É–∂–µ –æ–≥—Ä–æ–º–Ω—ã–π —à–∞–≥ –≤–ø–µ—Ä–µ–¥!


## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä

<Sandpack
  template="vanilla-ts"
  files={{
    "/index.ts": `
import express, { Request, Response, NextFunction } from 'express';

const app = express();
const PORT = 3000;

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞
interface Product {
    id: string;
    name: string;
    price: number;
    description?: string;
}

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const loggerMiddleware = (req: Request, res: Response, next: NextFunction) => {
    console.log(\`[\${new Date().toISOString()}] \${req.method} \${req.url}\`);
    next(); // –ü–µ—Ä–µ–¥–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É middleware/—Ä–æ—É—Ç—É
};

app.use(loggerMiddleware);
app.use(express.json()); // Middleware –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

// –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—ã–ª–∞ –±—ã –ë–î)
let products: Product[] = [];

// GET —Ä–æ—É—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
app.get('/products', (req: Request, res: Response) => {
    res.json(products);
});

// –†–æ—É—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ POST –∑–∞–ø—Ä–æ—Å–∞ —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–ª–æ–º
interface CreateProductBody {
    name: string;
    price: number;
    description?: string;
}

app.post('/products', (req: Request<{}, {}, CreateProductBody>, res: Response) => {
    // req.body —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —Ç–∏–ø CreateProductBody!
    const { name, price, description } = req.body;

    if (!name || typeof price !== 'number') {
        return res.status(400).json({ message: '–ò–º—è –ø—Ä–æ–¥—É–∫—Ç–∞ –∏ —Ü–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.' });
    }

    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç
    const newProduct: Product = {
        id: Date.now().toString(),
        name,
        price,
        description
    };

    products.push(newProduct); // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–¥—É–∫—Ç –≤ –º–∞—Å—Å–∏–≤

    res.status(201).json(newProduct); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç
});

// –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
app.listen(PORT, () => {
    console.log(\`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É \${PORT}\`);
});

// --- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º ---
document.addEventListener('DOMContentLoaded', () => {
    const productList = document.getElementById('product-list');
    const addProductForm = document.getElementById('add-product-form');

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    const renderProducts = () => {
        if (!productList) return;
        productList.innerHTML = '';
        products.forEach(product => {
            const listItem = document.createElement('li');
            listItem.textContent = \`\${product.name} - \${product.price} —Ä—É–±.\`;
            productList.appendChild(listItem);
        });
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    const handleAddProduct = async (event: Event) => {
        event.preventDefault();
        if (!addProductForm) return;

        const nameInput = (addProductForm.querySelector('#product-name') as HTMLInputElement);
        const priceInput = (addProductForm.querySelector('#product-price') as HTMLInputElement);
        const descriptionInput = (addProductForm.querySelector('#product-description') as HTMLInputElement);

        const name = nameInput.value;
        const price = parseFloat(priceInput.value);
        const description = descriptionInput.value;

        try {
            const response = await fetch('/products', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name, price, description })
            });

            if (!response.ok) {
                throw new Error(\`–û—à–∏–±–∫–∞: \${response.status}\`);
            }

            const newProduct = await response.json();
            products.push(newProduct);
            renderProducts();

            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            nameInput.value = '';
            priceInput.value = '';
            descriptionInput.value = '';

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞:', error);
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å.');
        }
    };

    // –í–µ—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
    if (addProductForm) {
        addProductForm.addEventListener('submit', handleAddProduct);
    }

    // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–¥—É–∫—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
    const fetchProducts = async () => {
        try {
            const response = await fetch('/products');
            if (response.ok) {
                products = await response.json();
                renderProducts();
            } else {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:', response.status);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:', error);
        }
    };

    fetchProducts();
});
`
    ,
    "/index.html": `
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeScript + Express</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            background-color: #222;
            color: #eee;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #444;
            background-color: #333;
            color: #eee;
            border-radius: 4px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #3e8e41;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>TypeScript + Express</h1>

    <h2>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</h2>
    <form id="add-product-form">
        <label for="product-name">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
        <input type="text" id="product-name" required>

        <label for="product-price">–¶–µ–Ω–∞:</label>
        <input type="number" id="product-price" required>

        <label for="product-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea id="product-description"></textarea>

        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>

    <h2>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</h2>
    <ul id="product-list"></ul>

    <script src="/index.ts"></script>
</body>
</html>
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400,
    preview: {
      port: 3000
    }
  }}
/>
