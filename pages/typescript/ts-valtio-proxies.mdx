## TypeScript: Valtio Proxies –∏ TypeScript

### üí° –í–≤–µ–¥–µ–Ω–∏–µ: –ú–∞–≥–∏—è –ü—Ä–æ–∫—Å–∏ –¥–ª—è –†–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –°–æ—Å—Ç–æ—è–Ω–∏—è

–ü—Ä–∏–≤–µ—Ç, –∫–æ–¥–µ—Ä! –°–µ–≥–æ–¥–Ω—è –º—ã –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ –º–∏—Ä **Valtio** ‚Äì —ç—Ç–æ –∫–∞–∫ –Ω–∏–Ω–¥–∑—è-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏–ª—É –Ω–∞—Ç–∏–≤–Ω—ã—Ö JavaScript **Proxies**. –ó–∞–±—É–¥—å—Ç–µ –æ —Å–∫—É—á–Ω—ã—Ö –±–æ–π–ª–µ—Ä–ø–ª–µ–π—Ç–∞—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö —Ä–µ–¥—é—Å–µ—Ä–∞—Ö. Valtio –¥–µ–ª–∞–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–∫–∏–º –∂–µ –ø—Ä–æ—Å—Ç—ã–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞ —Å –æ–±—ã—á–Ω—ã–º JavaScript-–æ–±—ä–µ–∫—Ç–æ–º.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–≤–æ–π –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî —ç—Ç–æ —Å–≤—è—â–µ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞ —Å —Ü–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏. Valtio —Å–æ–∑–¥–∞–µ—Ç **–≤–æ–ª—à–µ–±–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ** (—ç—Ç–æ –∏ –µ—Å—Ç—å Proxy) —ç—Ç–æ–π –∫–Ω–∏–≥–∏. –ö–æ–≥–¥–∞ —Ç—ã –º–µ–Ω—è–µ—à—å —á—Ç–æ-—Ç–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –∫–Ω–∏–≥–µ (—Ç–≤–æ–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏), –∑–µ—Ä–∫–∞–ª–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ. –ò –≤—Å–µ, –∫—Ç–æ —Å–º–æ—Ç—Ä–∏—Ç –≤ —ç—Ç–æ –∑–µ—Ä–∫–∞–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–≤–æ–∏ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã), –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–∏–¥—è—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –Ω–∏—Ö.

–ó–∞—á–µ–º –Ω–∞–º TypeScript –≤ —ç—Ç–æ–π –º–∞–≥–∏–∏? –ü–æ—Ç–æ–º—É —á—Ç–æ –¥–∞–∂–µ —Å–∞–º–∞—è –º–æ—â–Ω–∞—è –º–∞–≥–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π. TypeScript ‚Äî —ç—Ç–æ —Ç–≤–æ–π –≤–µ—Ä–Ω—ã–π —â–∏—Ç –∏ –º–µ—á. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫–∏–µ –≥–ª–∞–≤—ã –µ—Å—Ç—å –≤ —Ç–≤–æ–µ–π –∫–Ω–∏–≥–µ, –∫–∞–∫–æ–π —Ç–∏–ø –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç, –∏ –∫–∞–∫–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è (–¥–µ–π—Å—Ç–≤–∏—è) —Ç—ã –º–æ–∂–µ—à—å –Ω–∞–¥ –Ω–∏–º–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å. –û–Ω –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç —Ç–µ–±–µ —Å–ª—É—á–∞–π–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å —Ç–∏–ø "—Å—á–µ—Ç—á–∏–∫–∞" –Ω–∞ "—Å—Ç—Ä–æ–∫—É" –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –ø–ª–∞–Ω–µ.

–î–∞–≤–∞–π –∂–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —ç—Ç–∞ –º–∞–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ!

### üß† –ë–∞–∑–æ–≤–∞—è –¢–µ–æ—Ä–∏—è: –°–æ–∑–¥–∞–µ–º –ü—Ä–æ–∫—Å–∏-–°–æ—Å—Ç–æ—è–Ω–∏–µ

–í —Å–µ—Ä–¥—Ü–µ Valtio –ª–µ–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏—è `proxy()`. –û–Ω–∞ –±–µ—Ä–µ—Ç –æ–±—ã—á–Ω—ã–π JavaScript-–æ–±—ä–µ–∫—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é Proxy-–≤–µ—Ä—Å–∏—é. –ö–æ–≥–¥–∞ —Ç—ã –∏–∑–º–µ–Ω—è–µ—à—å —Å–≤–æ–π—Å—Ç–≤–æ —ç—Ç–æ–≥–æ –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç–∞, Valtio —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö "–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤" (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `useSnapshot`), —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –∏ –æ–Ω–∏ –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–∏—Ç—å—Å—è.

```typescript
import { proxy } from 'valtio';

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
// –≠—Ç–æ —Ö–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–æ–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–∏–ø–æ–≤.
interface CounterState {
  count: number;
  message: string;
  history: number[]; // –î–æ–±–∞–≤–∏–º —á—Ç–æ-—Ç–æ –ø–æ—Å–ª–æ–∂–Ω–µ–µ
}

// –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç. TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–µ–¥–µ—Ç —Ç–∏–ø
// –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –Ω–æ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —á–µ—Ä–µ–∑ <CounterState>
// –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º.
const counterState = proxy<CounterState>({
  count: 0,
  message: '–ü—Ä–∏–≤–µ—Ç, Valtio!',
  history: [0],
});

console.log('–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:', counterState.count, counterState.message); // 0 –ü—Ä–∏–≤–µ—Ç, Valtio!

// –ò–∑–º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é - —ç—Ç–æ –∫–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å Valtio!
// TypeScript –∑–¥–µ—Å—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º—ã –º–µ–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞
// –∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤.
counterState.count++;
counterState.message = '–°—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–∏–ª—Å—è!';
counterState.history.push(counterState.count); // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é

console.log('–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:', counterState.count, counterState.message); // 1 –°—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–∏–ª—Å—è!
console.log('–ò—Å—Ç–æ—Ä–∏—è:', counterState.history); // [0, 1]

// –ó–∞–º–µ—Ç—å: –∑–¥–µ—Å—å –Ω–µ—Ç –≤—ã–∑–æ–≤–æ–≤ `setState` –∏–ª–∏ —Å–ª–æ–∂–Ω—ã—Ö —Ä–µ–¥—é—Å–µ—Ä–æ–≤.
// –ü—Ä–æ—Å—Ç–æ –ø—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª –æ–±—ã—á–Ω—ã–π JS-–æ–±—ä–µ–∫—Ç.
```

### üöÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–∏–º–µ—Ä—ã: –û—Ç –ü—Ä–æ—Å—Ç–æ–≥–æ –∫ –°–ª–æ–∂–Ω–æ–º—É

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –ø–æ–Ω—è–ª–∏ –æ—Å–Ω–æ–≤—ã, –¥–∞–≤–∞–π—Ç–µ —É–≥–ª—É–±–∏–º—Å—è –≤ –±–æ–ª–µ–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.

#### ### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

–ü–æ–∫–∞–∂–µ–º, –∫–∞–∫ Valtio —Å TypeScript –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.

```typescript
import { proxy } from 'valtio';

interface Todo {
  id: string;
  text: string;
  completed: boolean;
  dueDate?: string; // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ
}

interface TodoState {
  todos: Todo[];
  filter: 'all' | 'active' | 'completed';
}

const todoState = proxy<TodoState>({
  todos: [],
  filter: 'all',
});

// –§—É–Ω–∫—Ü–∏–∏-–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
const addTodo = (text: string, dueDate?: string) => {
  todoState.todos.push({
    id: `todo-${todoState.todos.length + 1}-${Date.now()}`, // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
    text,
    completed: false,
    dueDate,
  });
};

const toggleTodo = (id: string) => {
  const todo = todoState.todos.find(t => t.id === id);
  if (todo) {
    todo.completed = !todo.completed; // TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ todo.completed - boolean
  }
};

const setFilter = (newFilter: TodoState['filter']) => {
  todoState.filter = newFilter; // TypeScript –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ newFilter - –≤–∞–ª–∏–¥–Ω—ã–π —Ç–∏–ø
};

// –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á–∏
addTodo('–ò–∑—É—á–∏—Ç—å Valtio', '2023-12-31');
addTodo('–ù–∞–ø–∏—Å–∞—Ç—å –∫–ª–∞—Å—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ TypeScript', '2024-01-15');
addTodo('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∑–Ω–∞–Ω–∏—è–º–∏ —Å –¥—Ä—É–∑—å—è–º–∏');

// –ò–∑–º–µ–Ω—è–µ–º –∑–∞–¥–∞—á–∏
toggleTodo(todoState.todos[0].id); // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É
setFilter('active');

console.log('–í—Å–µ –∑–∞–¥–∞—á–∏:', JSON.stringify(todoState.todos, null, 2));
console.log('–¢–µ–∫—É—â–∏–π —Ñ–∏–ª—å—Ç—Ä:', todoState.filter); // active
console.log('–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ª–∏ –ø–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞:', todoState.todos[0].completed); // true
```

#### ### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useSnapshot` –¥–ª—è React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Valtio –≤ React. `useSnapshot` ‚Äì —ç—Ç–æ —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –¥–≤–µ –≤–µ—â–∏:
1.  –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π —Å–Ω–∏–º–æ–∫** —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç–∞.
2.  –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ–∫—Å–∏, –≤—ã–∑—ã–≤–∞—è –µ–≥–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏.

**–í–∞–∂–Ω–æ**: –í—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–Ω–∏–º–æ–∫! –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç. TypeScript –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å —ç—Ç–∏–º, —Å–¥–µ–ª–∞–≤ —Ç–∏–ø —Å–Ω–∏–º–∫–∞ `Readonly<T>`.

```typescript
import { proxy, useSnapshot } from 'valtio';
// –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ useSnapshot –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ 'valtio/react' –∏–ª–∏ 'valtio/utils'
// –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ useSnapshot –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ö—É–∫.

interface UserProfile {
  name: string;
  email: string;
  age: number;
  address: {
    street: string;
    city: string;
    zipCode: string;
  };
}

const userProfileState = proxy<UserProfile>({
  name: '–Ø—à–∞ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç',
  email: 'yasha@example.com',
  age: 30,
  address: {
    street: '–£–ª–∏—Ü–∞ –ö–æ–¥–∞, 101',
    city: 'TypeScriptville',
    zipCode: 'TS1 0TS',
  },
});

// –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
const userProfileActions = {
  updateName: (newName: string) => {
    userProfileState.name = newName;
  },
  updateEmail: (newEmail: string) => {
    userProfileState.email = newEmail;
  },
  updateAddress: (newStreet: string, newCity: string, newZipCode: string) => {
    // TypeScript –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
    userProfileState.address.street = newStreet;
    userProfileState.address.city = newCity;
    userProfileState.address.zipCode = newZipCode;
  },
};

// --- –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —ç—Ç–æ –≤–Ω—É—Ç—Ä–∏ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ---
// const UserDisplay = () => {
//   // useSnapshot –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Readonly<UserProfile>, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ø—Ä—è–º—ã–µ –º—É—Ç–∞—Ü–∏–∏
//   const snapshot = useSnapshot(userProfileState);

//   // snapshot.name = '–ù–æ–≤–æ–µ –ò–º—è'; // –û–®–ò–ë–ö–ê –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò! –°–Ω–∏–º–æ–∫ Readonly.

//   return (
//     <div>
//       <h3>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {snapshot.name}</h3>
//       <p>Email: {snapshot.email}</p>
//       <p>–í–æ–∑—Ä–∞—Å—Ç: {snapshot.age}</p>
//       <p>–ê–¥—Ä–µ—Å: {snapshot.address.street}, {snapshot.address.city}, {snapshot.address.zipCode}</p>
//       <button onClick={() => userProfileActions.updateName('–Ø–∫–æ–≤ –¶—É–∫–µ—Ä–º–∞–Ω')}>
//         –û–±–Ω–æ–≤–∏—Ç—å –∏–º—è
//       </button>
//       <button onClick={() => userProfileActions.updateAddress('–ü—Ä–æ—Å–ø–µ–∫—Ç –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏, 42', 'JS-–°–∏—Ç–∏', 'JS2 0JS')}>
//         –û–±–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å
//       </button>
//     </div>
//   );
// };
// console.log(<UserDisplay />); // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏, –≤ React —ç—Ç–æ –±—ã–ª –±—ã —Ä–µ–Ω–¥–µ—Ä
console.log('–ò–º—è –¥–æ:', userProfileState.name); // –Ø—à–∞ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç
userProfileActions.updateName('–Ø–∫–æ–≤ –¶—É–∫–µ—Ä–º–∞–Ω');
console.log('–ò–º—è –ø–æ—Å–ª–µ:', userProfileState.name); // –Ø–∫–æ–≤ –¶—É–∫–µ—Ä–º–∞–Ω
```

#### ### 3. –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (Computed Properties)

Valtio –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ—Ç—Ç–µ—Ä—ã –≤ –æ–±—ä–µ–∫—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –û–Ω–∏ –±—É–¥—É—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏, –∏ TypeScript –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö —Ç–∏–ø. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```typescript
import { proxy } from 'valtio';

interface Product {
  id: string;
  name: string;
  price: number;
}

interface CartItem extends Product {
  quantity: number;
}

interface ShopState {
  products: Product[];
  cart: CartItem[];
  readonly totalItemsInCart: number; // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
  readonly cartTotalPrice: number;   // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
  readonly hasItemsInCart: boolean;  // –í—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
}

const shopState = proxy<ShopState>({
  products: [
    { id: 'p1', name: '–ö–Ω–∏–≥–∞ "TypeScript Deep Dive"', price: 49.99 },
    { id: 'p2', name: '–ö—Ä—É–∂–∫–∞ "–Ø –ª—é–±–ª—é TS"', price: 15.00 },
    { id: 'p3', name: '–§—É—Ç–±–æ–ª–∫–∞ "Code is Art"', price: 29.99 },
  ],
  cart: [],
  // –ì–µ—Ç—Ç–µ—Ä—ã –¥–ª—è –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö —Å–≤–æ–π—Å—Ç–≤.
  // Valtio –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (this.cart)
  get totalItemsInCart() {
    return this.cart.reduce((sum, item) => sum + item.quantity, 0);
  },
  get cartTotalPrice() {
    return parseFloat(this.cart.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2));
  },
  get hasItemsInCart() {
    return this.cart.length > 0;
  }
});

const shopActions = {
  addProductToCart: (productId: string) => {
    const product = shopState.products.find(p => p.id === productId);
    if (!product) return;

    const existingCartItem = shopState.cart.find(item => item.id === productId);
    if (existingCartItem) {
      existingCartItem.quantity++;
    } else {
      shopState.cart.push({ ...product, quantity: 1 });
    }
  },
  removeProductFromCart: (productId: string) => {
    shopState.cart = shopState.cart.filter(item => item.id !== productId);
  },
  clearCart: () => {
    shopState.cart = [];
  },
};

shopActions.addProductToCart('p1');
shopActions.addProductToCart('p2');
shopActions.addProductToCart('p1'); // –î–æ–±–∞–≤–ª—è–µ–º –µ—â–µ –æ–¥–Ω—É –∫–Ω–∏–≥—É

console.log('–ö–æ—Ä–∑–∏–Ω–∞:', JSON.stringify(shopState.cart, null, 2));
console.log('–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ:', shopState.totalItemsInCart); // 3 (1+1+1)
console.log('–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ—Ä–∑–∏–Ω—ã:', shopState.cartTotalPrice); // (49.99 * 2) + (15.00 * 1) = 114.98
console.log('–ï—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ?', shopState.hasItemsInCart); // true

shopActions.clearCart();
console.log('–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ - –≤—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤:', shopState.totalItemsInCart); // 0
console.log('–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ - –æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', shopState.cartTotalPrice); // 0
console.log('–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ - –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä—ã?', shopState.hasItemsInCart); // false
```

### üéì –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –¢–µ—Ö–Ω–∏–∫–∏: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –°–æ—Å—Ç–æ—è–Ω–∏—è

–î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —É–¥–æ–±–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ "–º–æ–¥—É–ª–∏" –∏–ª–∏ "—Å–ª–∞–π—Å—ã". –ö–∞–∂–¥—ã–π —Ç–∞–∫–æ–π –º–æ–¥—É–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–æ–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç–æ–º, —á—Ç–æ —É–ª—É—á—à–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—é.

```typescript
import { proxy } from 'valtio';

// --- –ú–æ–¥—É–ª—å –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ---
interface AuthState {
  isAuthenticated: boolean;
  user: { id: string; username: string; email: string } | null;
  token: string | null;
}

const authState = proxy<AuthState>({
  isAuthenticated: false,
  user: null,
  token: null,
});

export const authActions = {
  login: (userData: Omit<AuthState['user'], 'id'>, token: string) => {
    authState.isAuthenticated = true;
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ID –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
    authState.user = { id: 'usr-123', ...userData };
    authState.token = token;
  },
  logout: () => {
    authState.isAuthenticated = false;
    authState.user = null;
    authState.token = null;
  },
};

// --- –ú–æ–¥—É–ª—å –ù–∞—Å—Ç—Ä–æ–µ–∫ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ---
interface UserSettingsState {
  theme: 'light' | 'dark';
  notificationsEnabled: boolean;
  language: 'en' | 'ru' | 'es';
}

const userSettingsState = proxy<UserSettingsState>({
  theme: 'light',
  notificationsEnabled: true,
  language: 'en',
});

export const userSettingsActions = {
  toggleTheme: () => {
    userSettingsState.theme = userSettingsState.theme === 'light' ? 'dark' : 'light';
  },
  setLanguage: (lang: UserSettingsState['language']) => {
    userSettingsState.language = lang;
  },
};

// --- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π ---
console.log('–î–æ –ª–æ–≥–∏–Ω–∞:', authState.isAuthenticated); // false
authActions.login({ username: 'yasha_dev', email: 'yasha@code.com' }, 'my_jwt_token_123');
console.log('–ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞:', authState.isAuthenticated, authState.user?.username); // true yasha_dev

console.log('–¢–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:', userSettingsState.theme); // light
userSettingsActions.toggleTheme();
console.log('–¢–µ–º–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:', userSettingsState.theme); // dark
userSettingsActions.setLanguage('ru');
console.log('–Ø–∑—ã–∫:', userSettingsState.language); // ru

authActions.logout();
console.log('–ü–æ—Å–ª–µ –ª–æ–≥–∞—É—Ç–∞:', authState.isAuthenticated); // false
```

### üêû –¢–∏–ø–∏—á–Ω—ã–µ –û—à–∏–±–∫–∏ –∏ –ö–∞–∫ –ò—Ö –ò–∑–±–µ–∂–∞—Ç—å

1.  **–ó–∞–±—ã–ª–∏ `useSnapshot` –≤ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö**:
    *   **–û—à–∏–±–∫–∞**: –í–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–∫—Å–∏.
    *   **–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `const snapshot = useSnapshot(myProxyState);` –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ React, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Å–Ω–∏–º–æ–∫ –∏ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
    *   **–ö–∞–∫ –ø–æ–º–æ–≥–∞–µ—Ç TypeScript**: `useSnapshot` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Readonly<T>`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω—ã–º —Å–∏–≥–Ω–∞–ª–æ–º –æ–± –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏.
2.  **–ü–æ–ø—ã—Ç–∫–∞ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–Ω–∏–º–æ–∫ (snapshot)**:
    *   **–û—à–∏–±–∫–∞**: `snapshot.prop = 'new value';` –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ TypeScript (–≤ —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ) –∏–ª–∏ runtime –æ—à–∏–±–∫–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–Ω–∏–º–æ–∫ –∏–º–º—É—Ç–∞–±–µ–ª–µ–Ω.
    *   **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: `myProxyState.prop = 'new value';` –∏–ª–∏ `myActions.updateProp('new value');`.
3.  **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**:
    *   **–û—à–∏–±–∫–∞**: –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ TypeScript –º–æ–∂–µ—Ç –∏–Ω–æ–≥–¥–∞ "—Ç–µ—Ä—è—Ç—å" —Ç–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ, –µ—Å–ª–∏ –≤—ã –Ω–µ —É–∫–∞–∑–∞–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π.
    *   **–†–µ—à–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ —á–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏–ª–∏ —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π –≤–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –¥–∞–∂–µ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤.

### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ! –°–æ–∑–¥–∞–π—Ç–µ MDX-—Ñ–∞–π–ª —Å —Ä–µ—à–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏.

#### 1. –°–∏–º—É–ª—è—Ç–æ—Ä –ú–∞–≥–∞–∑–∏–Ω–∞

*   –°–æ–∑–¥–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ —Å –¥–≤—É–º—è –ø—Ä–æ–∫—Å–∏:
    *   `productsState`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ `Product` (—Å `id`, `name`, `price`). –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏.
    *   `cartState`: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ `CartItem` (—Å `id` –ø—Ä–æ–¥—É–∫—Ç–∞, `name`, `price`, `quantity`).
*   –†–µ–∞–ª–∏–∑—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è:
    *   `addProductToCart(productId: string)`: –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–¥—É–∫—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É. –ï—Å–ª–∏ –ø—Ä–æ–¥—É–∫—Ç —É–∂–µ –µ—Å—Ç—å, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.
    *   `removeProductFromCart(productId: string)`: –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–¥—É–∫—Ç –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.
    *   `decreaseProductQuantity(productId: string)`: —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞ 1. –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0, —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–¥—É–∫—Ç.
    *   `clearCart()`: –æ—á–∏—â–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É.
*   –í `cartState` –¥–æ–±–∞–≤—å—Ç–µ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:
    *   `totalItemsInCart` (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ *—à—Ç—É–∫* –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤).
    *   `cartTotalPrice` (–æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ, –æ–∫—Ä—É–≥–ª–µ–Ω–Ω–∞—è –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π).
*   –û–±–µ—Å–ø–µ—á—å—Ç–µ –ø–æ–ª–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é –≤—Å–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏–π. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—Ç—É –¥–µ–π—Å—Ç–≤–∏–π, –≤—ã–≤–æ–¥—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å.

#### 2. –†–µ–¥–∞–∫—Ç–æ—Ä –ü—Ä–æ—Ñ–∏–ª—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

*   –°–æ–∑–¥–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `userProfileState` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
    *   `id: string`
    *   `username: string`
    *   `email: string`
    *   `settings`: –≤–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å `theme: 'light' | 'dark'`, `newsletterSubscription: boolean`.
    *   `bio?: string` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ).
*   –†–µ–∞–ª–∏–∑—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
    *   `updateUsername(newUsername: string)`
    *   `updateEmail(newEmail: string)`
    *   `toggleTheme()`: –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ç–µ–º—É –º–µ–∂–¥—É 'light' –∏ 'dark'.
    *   `toggleNewsletterSubscription()`
    *   `updateBio(newBio: string)`
    *   `clearBio()`: —É–¥–∞–ª—è–µ—Ç –ø–æ–ª–µ `bio` –∏–ª–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –µ–≥–æ –≤ `undefined`.
*   –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ `theme` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Union Type. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, –≤–∫–ª—é—á–∞—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—Ç—É.

#### 3. –°–ø–∏—Å–æ–∫ –î–µ–ª —Å –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

*   –°–æ–∑–¥–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `taskListState` —Å –º–∞—Å—Å–∏–≤–æ–º –æ–±—ä–µ–∫—Ç–æ–≤ `Task`. –ö–∞–∂–¥—ã–π `Task` –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:
    *   `id: string`
    *   `description: string`
    *   `completed: boolean`
    *   `priority: 'low' | 'medium' | 'high'`
    *   `createdAt: Date`
*   –†–µ–∞–ª–∏–∑—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è:
    *   `addTask(description: string, priority: Task['priority'])`: —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É.
    *   `toggleTaskCompletion(id: string)`
    *   `removeTask(id: string)`
    *   `setTaskPriority(id: string, newPriority: Task['priority'])`
*   –î–æ–±–∞–≤—å—Ç–µ –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `pendingTasksCount` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á).
*   –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ –≤—ã—á–∏—Å–ª—è–µ–º–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞.

### üí° –°–æ–≤–µ—Ç

*   **–ú–∞–ª–µ–Ω—å–∫–∏–µ –∏ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–∫—Å–∏**: –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –æ–≥—Ä–æ–º–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö, –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ (–∫–∞–∫ –º—ã —Å–¥–µ–ª–∞–ª–∏ —Å `authState` –∏ `userSettingsState`). –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, –æ–±–ª–µ–≥—á–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ª–∞–µ—Ç —Ç–∏–ø–∏–∑–∞—Ü–∏—é –±–æ–ª–µ–µ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π.
*   **–î–µ–π—Å—Ç–≤–∏—è –∫–∞–∫ "—Ñ–∞—Å–∞–¥—ã"**: –í—Å–µ–≥–¥–∞ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö (–¥–µ–π—Å—Ç–≤–∏—è—Ö). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∞—à –∫–æ–¥ –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º –∏ –ª–µ–≥–∫–∏–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç.
*   **–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Å–Ω–∏–º–∫–æ–≤**: –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ `useSnapshot` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç. –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏. TypeScript, –±–ª–∞–≥–æ–¥–∞—Ä—è `Readonly<T>`, –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —ç—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å.
*   **–Ø–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏**: –•–æ—Ç—è Valtio —á–∞—Å—Ç–æ –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ —Ç–∏–ø—ã, —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä) –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ–º–æ–≥–∞–µ—Ç TypeScript –¥–∞—Ç—å –≤–∞–º –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –æ—à–∏–±–∫–∏.
*   **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, –±—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –∫ —Ç–æ–º—É, –∫–∞–∫–∏–µ —á–∞—Å—Ç–∏ –≤—ã –¥–µ–ª–∞–µ—Ç–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏. Valtio –æ–±—ã—á–Ω–æ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä, –Ω–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ Proxy –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤—Å–µ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ.



## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä

<Playground
  template="vanilla-ts"
  files={{
    "/index.html": `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valtio Counter</title>
    <style>
        body { background-color: #282c34; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background-color: #61dafb; border: none; border-radius: 5px; color: #282c34; }
    <\/style>
</head>
<body>
    <div id="app"></div>
    <script type="module">
        import { proxy, useSnapshot } from 'valtio';

        const state = proxy({ count: 0 });

        function App() {
            const snap = useSnapshot(state);

            const increment = () => {
                state.count++;
            };

            return \`
                <h1>Count: \${snap.count}</h1>
                <button onclick="\${increment}">Increment</button>
            \`;
        }

        function render() {
            document.getElementById('app').innerHTML = App();
        }

        render();
        state.subscribe(render);
    <\/script>
</body>
</html>
`
  }}
/>
