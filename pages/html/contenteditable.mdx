## HTML: Скелет. Урок 4: ContentEditable


![Иллюстрация к уроку](/lessons/html-contenteditable.png)
ContentEditable - это HTML атрибут, который делает элемент на веб-странице редактируемым прямо в браузере. Это простой способ добавить интерактивность и позволить пользователям вносить изменения в контент без необходимости использования форм или сложного JavaScript.

### Концепция ContentEditable

Атрибут `contenteditable` может принимать три значения:

*   `true`: Элемент и его содержимое становятся редактируемыми.
*   `false`: Элемент не редактируется.
*   `inherit`: Наследует значение от родительского элемента.

Если атрибут просто присутствует в HTML-теге без указания значения, он автоматически считается `true`.

### Практические примеры

Вот несколько примеров использования `contenteditable`:

**Пример 1: Редактируемый параграф**

```html
<p contenteditable="true">Этот параграф можно редактировать.</p>
```

В этом примере любой пользователь, просматривающий страницу, сможет кликнуть на параграф и изменить его текст.

**Пример 2: Редактируемый заголовок**

```html
<h1 contenteditable>Этот заголовок тоже можно редактировать!</h1>
```

Как видите, можно не указывать `contenteditable="true"`, просто наличие атрибута делает элемент редактируемым.

**Пример 3: Отключение редактирования**

```html
<div contenteditable="false">
    <p>Этот параграф не редактируется, даже если он находится внутри редактируемого блока.</p>
</div>
```

В этом примере, даже если родительский элемент имеет атрибут `contenteditable="true"`, дочерний элемент с `contenteditable="false"` останется нередактируемым.

**Пример 4: Редактируемый div с стилями**

```html
<div contenteditable="true" style="border: 1px solid black; padding: 10px;">
    <h2>Редактируемый раздел</h2>
    <p>Вы можете редактировать текст, добавлять новые элементы и т.д.</p>
</div>
```

Этот пример демонстрирует, как можно стилизовать редактируемый элемент.

### Жизненный пример

Атрибут `contenteditable` широко используется в различных веб-приложениях и фреймворках:

*   **WYSIWYG редакторы (What You See Is What You Get):** Многие текстовые редакторы, такие как TinyMCE и CKEditor, используют `contenteditable` в качестве основы для редактирования текста в браузере. Они добавляют JavaScript для обработки форматирования, добавления изображений и других функций.
*   **Онлайн-заметки и редакторы документов:** Приложения для создания заметок, такие как Google Docs, используют `contenteditable` для реализации возможности редактирования текста непосредственно в браузере.
*   **Фреймворки для создания контента (CMS):** Многие системы управления контентом (CMS) позволяют пользователям редактировать контент страниц прямо в браузере, используя `contenteditable` и добавляя свои собственные инструменты для управления контентом.
*   **Редактирование "на месте" (In-place editing):** В некоторых веб-приложениях, например, в административных панелях, `contenteditable` используется для быстрого редактирования данных непосредственно на странице, без необходимости переходить в форму редактирования.

### Ключевые моменты

*   `contenteditable` позволяет делать элементы веб-страницы редактируемыми прямо в браузере.
*   Атрибут принимает значения `true`, `false` или `inherit`.
*   Можно не указывать значение `true`, просто наличие атрибута делает элемент редактируемым.
*   Атрибут можно использовать для создания простых текстовых редакторов или для редактирования данных "на месте".
*   JavaScript часто используется в сочетании с `contenteditable` для добавления расширенных функций, таких как форматирование текста, добавление изображений и т.д.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ContentEditable Пример</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Редактируемый заголовок</h1>
    <h1 contenteditable="true">Кликните сюда, чтобы изменить заголовок!</h1>

    <h2>Редактируемый параграф</h2>
    <p contenteditable="true">Этот параграф можно редактировать. Попробуйте изменить текст.</p>

    <h2>Редактируемый список</h2>
    <ul contenteditable="true">
      <li>Элемент 1</li>
      <li>Элемент 2</li>
      <li>Элемент 3</li>
    </ul>

    <h2>Редактируемый div с кнопками</h2>
    <div contenteditable="true" class="editable-div">
      <p>Этот div можно редактировать. Добавьте текст, удалите его или нажмите кнопки ниже.</p>
      <button id="bold-button"><b>Жирный</b></button>
      <button id="italic-button"><i>Курсив</i></button>
      <button id="underline-button"><u>Подчеркнутый</u></button>
    </div>

    <h2>Нередактируемый элемент</h2>
    <div contenteditable="false">
      <p>Этот параграф нельзя редактировать.</p>
    </div>
  </div>

  <script src="/index.js"></script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  width: 80%;
  max-width: 800px;
  padding: 20px;
  background-color: #333;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

h1, h2, p, ul {
  margin-bottom: 15px;
}

.editable-div {
  border: 1px solid #555;
  padding: 10px;
  margin-bottom: 15px;
}

button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 5px 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 4px;
}
`,
    "/index.js": `// Получаем ссылки на кнопки
const boldButton = document.getElementById('bold-button');
const italicButton = document.getElementById('italic-button');
const underlineButton = document.getElementById('underline-button');

// Добавляем обработчики событий для кнопок
boldButton.addEventListener('click', () => {
  document.execCommand('bold', false, null);
});

italicButton.addEventListener('click', () => {
  document.execCommand('italic', false, null);
});

underlineButton.addEventListener('click', () => {
  document.execCommand('underline', false, null);
});

// Функция для отображения текущего выделения (для отладки)
function logSelection() {
  const selection = window.getSelection();
  console.log('Выделенный текст:', selection.toString());
}

// Добавляем слушатель событий для отслеживания выделения (необязательно)
document.addEventListener('mouseup', logSelection);
document.addEventListener('keyup', logSelection);
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
