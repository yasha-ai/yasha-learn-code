## HTML: Скелет. Урок: ARIA Basics


![Иллюстрация к уроку](/lessons/html-aria-basics.png)
В этом уроке мы познакомимся с ARIA – набором атрибутов, которые делают веб-контент более доступным для людей с ограниченными возможностями. ARIA расширяет HTML, позволяя нам описывать роли, состояния и свойства элементов, которые иначе могут быть не понятны вспомогательным технологиям, таким как скринридеры.

### Что такое ARIA?

ARIA (Accessible Rich Internet Applications) – это набор атрибутов HTML, которые предоставляют дополнительную информацию о роли, состоянии и свойствах элементов пользовательского интерфейса.  Представьте, что у вас есть нестандартный элемент, например, кастомный выпадающий список, который скринридер не может правильно интерпретировать. ARIA позволяет "объяснить" скринридеру, что это за элемент, как с ним взаимодействовать и в каком состоянии он находится.

### Основные атрибуты ARIA

ARIA использует три основных типа атрибутов:

*   **role:** Определяет роль элемента, например, `button`, `menu`, `alert`.
*   **aria-\*state:** Описывает текущее состояние элемента, например, `aria-expanded="true"` (элемент развернут) или `aria-disabled="true"` (элемент отключен).
*   **aria-\*property:** Определяет свойства элемента, например, `aria-label="Close"` (метка для кнопки закрытия) или `aria-describedby="elementId"` (элемент, содержащий описание текущего элемента).

### Практические примеры кода

**Пример 1: Кастомный выпадающий список**

Предположим, у нас есть кастомный выпадающий список, реализованный с помощью `<div>` и JavaScript.

```html
<div role="combobox" aria-expanded="false" aria-haspopup="listbox" aria-owns="listbox1" aria-label="Выберите опцию">
  <button role="button" aria-labelledby="combobox">Выберите опцию</button>
  <ul role="listbox" id="listbox1">
    <li role="option">Опция 1</li>
    <li role="option">Опция 2</li>
    <li role="option">Опция 3</li>
  </ul>
</div>
```

В этом примере:

*   `role="combobox"` говорит скринридеру, что это поле для ввода с выпадающим списком.
*   `aria-expanded="false"` указывает, что список изначально свернут. JavaScript должен изменять это значение на `true`, когда список развернут.
*   `aria-haspopup="listbox"` указывает, что у элемента есть всплывающее окно типа `listbox`.
*   `aria-owns="listbox1"` связывает combobox с элементом списка `listbox` с идентификатором `listbox1`.
*   `aria-label="Выберите опцию"` предоставляет текстовую метку для элемента.
*   `role="button"` указывает роль кнопки.
*   `role="listbox"` указывает роль списка.
*   `role="option"` указывает роль элемента списка.

**Пример 2: Кнопка "Закрыть"**

```html
<button aria-label="Закрыть окно">X</button>
```

Здесь `aria-label` предоставляет альтернативный текст для кнопки, который будет прочитан скринридером. Вместо "X" скринридер прочитает "Закрыть окно", что более информативно.

**Пример 3: Сообщение об ошибке**

```html
<label for="email">Email:</label>
<input type="email" id="email" aria-describedby="email-error">
<p id="email-error" role="alert">Пожалуйста, введите корректный email.</p>
```

Здесь `aria-describedby` связывает поле ввода с сообщением об ошибке.  `role="alert"` сообщает скринридеру, что это важное сообщение, требующее внимания.

### Жизненный пример

Многие современные JavaScript фреймворки (React, Vue, Angular) активно используют ARIA атрибуты.  Например, библиотеки компонентов пользовательского интерфейса часто предоставляют компоненты с уже настроенными ARIA атрибутами для обеспечения доступности.  На сайтах, где важна доступность (например, государственные сайты, образовательные платформы), использование ARIA является обязательным.  Кроме того, большинство популярных веб-сайтов (например, Google, Facebook, Wikipedia) используют ARIA для улучшения доступности своего контента.

### Ключевые моменты

*   ARIA улучшает доступность веб-контента для людей с ограниченными возможностями.
*   ARIA атрибуты предоставляют дополнительную информацию о роли, состоянии и свойствах элементов.
*   Используйте ARIA, когда стандартные HTML элементы не предоставляют достаточной информации для вспомогательных технологий.
*   Важно тестировать ваш веб-сайт с использованием скринридеров, чтобы убедиться, что ARIA атрибуты работают правильно.
*   Не используйте ARIA для дублирования функциональности HTML.  Используйте HTML элементы семантически правильно, и только потом дополняйте их ARIA, если это необходимо.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARIA Basics Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>ARIA Basics Example</h1>

    <h2>Кастомный выпадающий список</h2>
    <div role="combobox" aria-expanded="false" aria-haspopup="listbox" aria-owns="listbox1" aria-label="Выберите опцию" id="my-combobox">
      <button role="button" aria-labelledby="combobox" id="combobox-button">Выберите опцию</button>
      <ul role="listbox" id="listbox1" style="display: none;">
        <li role="option" aria-selected="false" data-value="option1">Опция 1</li>
        <li role="option" aria-selected="false" data-value="option2">Опция 2</li>
        <li role="option" aria-selected="false" data-value="option3">Опция 3</li>
      </ul>
    </div>

    <h2>Кнопка "Закрыть"</h2>
    <button aria-label="Закрыть окно" id="close-button">X</button>

    <h2>Сообщение об ошибке</h2>
    <label for="email">Email:</label>
    <input type="email" id="email" aria-describedby="email-error">
    <div id="email-error" class="error-message" role="alert"></div>

  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #fff;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

h1, h2 {
  color: #ddd;
}

.error-message {
  color: #ff4d4d;
  margin-top: 5px;
}

#my-combobox {
  margin-bottom: 20px;
}

#my-combobox button {
  padding: 10px;
  background-color: #333;
  color: #fff;
  border: none;
  cursor: pointer;
}

#my-combobox ul {
  list-style: none;
  padding: 0;
  margin: 0;
  background-color: #444;
}

#my-combobox li {
  padding: 10px;
  cursor: pointer;
}

#my-combobox li:hover {
  background-color: #555;
}

#my-combobox li[aria-selected="true"] {
  background-color: #666;
}
`,
    "/index.js": `// Кастомный выпадающий список
const comboboxButton = document.getElementById('combobox-button');
const listbox = document.getElementById('listbox1');
const combobox = document.getElementById('my-combobox');

comboboxButton.addEventListener('click', () => {
  const expanded = combobox.getAttribute('aria-expanded') === 'true';
  combobox.setAttribute('aria-expanded', !expanded);
  listbox.style.display = expanded ? 'none' : 'block';
});

listbox.addEventListener('click', (event) => {
  if (event.target.getAttribute('role') === 'option') {
    const selectedValue = event.target.dataset.value;
    comboboxButton.textContent = event.target.textContent;
    combobox.setAttribute('aria-expanded', 'false');
    listbox.style.display = 'none';

    // Сброс aria-selected для всех элементов
    const options = listbox.querySelectorAll('[role="option"]');
    options.forEach(option => option.setAttribute('aria-selected', 'false'));

    // Установка aria-selected для выбранного элемента
    event.target.setAttribute('aria-selected', 'true');

    console.log(\`Выбрана опция: \${'}selectedValue\${'}\`);
  }
});


// Кнопка "Закрыть"
const closeButton = document.getElementById('close-button');
closeButton.addEventListener('click', () => {
  alert('Окно закрыто!'); // Простое действие для демонстрации
});

// Сообщение об ошибке
const emailInput = document.getElementById('email');
const emailError = document.getElementById('email-error');

emailInput.addEventListener('blur', () => {
  if (!emailInput.value.includes('@')) {
    emailError.textContent = 'Пожалуйста, введите корректный email.';
  } else {
    emailError.textContent = '';
  }
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
