## HTML: Скелет - Data Attributes


![Иллюстрация к уроку](/lessons/html-data-attributes.png)
Data attributes - это мощный инструмент в HTML, позволяющий хранить дополнительную информацию непосредственно в HTML-элементах. Эта информация может быть использована JavaScript для динамического изменения поведения или внешнего вида страницы.

### Что такое Data Attributes?

Data attributes позволяют добавлять собственные атрибуты к HTML-элементам, начиная с префикса `data-`. Они предоставляют удобный способ связать произвольные данные с элементами, не нарушая при этом валидность HTML.

Пример:

```html
<div id="myElement" data-user-id="123" data-username="JohnDoe">
  Этот элемент хранит данные о пользователе.
</div>
```

В этом примере мы добавили два data attributes: `data-user-id` и `data-username`.

### Как использовать Data Attributes в JavaScript

Доступ к data attributes можно получить через свойство `dataset` элемента в JavaScript.  Название атрибута после префикса `data-` преобразуется в camelCase.

```javascript
const element = document.getElementById("myElement");

// Получаем значение data-user-id
const userId = element.dataset.userId; // userId будет равен "123"

// Получаем значение data-username
const username = element.dataset.username; // username будет равен "JohnDoe"

console.log(`User ID: ${userId}, Username: ${username}`);
```

Мы можем также изменить значение data attribute:

```javascript
element.dataset.userId = "456";
console.log(element.dataset.userId); // Выведет "456"
```

### Практические примеры

1.  **Фильтрация элементов списка:**

```html
<ul id="myList">
  <li data-category="fruits">Apple</li>
  <li data-category="vegetables">Carrot</li>
  <li data-category="fruits">Banana</li>
  <li data-category="vegetables">Broccoli</li>
</ul>

<button onclick="filterList('fruits')">Показать фрукты</button>

<script>
function filterList(category) {
  const listItems = document.querySelectorAll("#myList li");
  listItems.forEach(item => {
    if (item.dataset.category === category) {
      item.style.display = "block";
    } else {
      item.style.display = "none";
    }
  });
}
</script>
```

2.  **Хранение конфигурационных данных:**

```html
<button data-api-endpoint="/api/users" data-request-method="GET">
  Загрузить пользователей
</button>

<script>
const button = document.querySelector("button");
button.addEventListener("click", () => {
  const endpoint = button.dataset.apiEndpoint;
  const method = button.dataset.requestMethod;

  // Здесь можно использовать endpoint и method для отправки запроса
  console.log(`Отправляем ${method} запрос на ${endpoint}`);
});
</script>
```

### Жизненный пример

Data attributes широко используются в различных JavaScript-фреймворках и библиотеках, таких как React, Vue.js и Angular. Они применяются для хранения информации о состоянии компонента, идентификаторов элементов списка, настроек конфигурации и многого другого.

Например, Bootstrap использует data attributes для управления поведением компонентов, таких как модальные окна и выпадающие списки.

### Ключевые моменты

*   Data attributes начинаются с префикса `data-`.
*   Доступ к ним осуществляется через свойство `dataset` элемента в JavaScript.
*   Название атрибута после префикса `data-` преобразуется в camelCase.
*   Они позволяют хранить произвольные данные, связанные с HTML-элементами.
*   Широко используются в JavaScript-фреймворках для управления поведением компонентов.
*   Улучшают читаемость и поддерживаемость кода, позволяя хранить конфигурацию непосредственно в HTML.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Attributes Пример</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Data Attributes Пример</h1>

    <div id="product-list">
      <h2>Список продуктов</h2>
      <ul>
        <li data-product-id="1" data-price="25">Яблоко</li>
        <li data-product-id="2" data-price="50">Банан</li>
        <li data-product-id="3" data-price="75">Апельсин</li>
      </ul>
    </div>

    <div id="product-details">
      <h2>Детали продукта</h2>
      <p>Выбран продукт: <span id="selected-product">Нет</span></p>
      <p>Цена: <span id="product-price">0</span> руб.</p>
      <button id="buy-button" data-product-id="" disabled>Купить</button>
    </div>

    <div id="config">
      <h2>Конфигурация</h2>
      <label for="api-url">API URL:</label>
      <input type="text" id="api-url" data-default-url="https://example.com/api" value="https://example.com/api">
      <button id="save-config">Сохранить</button>
    </div>
  </div>

  <script src="/index.js"></script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

#product-list ul {
  list-style: none;
  padding: 0;
}

#product-list li {
  cursor: pointer;
  padding: 5px;
  border-bottom: 1px solid #444;
}

#product-list li:hover {
  background-color: #333;
}

#product-details {
  margin-top: 20px;
  padding: 10px;
  border: 1px solid #444;
}

#config {
  margin-top: 20px;
  padding: 10px;
  border: 1px solid #444;
}

#config input {
  background-color: #333;
  color: #eee;
  border: none;
  padding: 5px;
  margin-bottom: 10px;
}
`,
    "/index.js": `// Получаем элементы DOM
const productList = document.getElementById("product-list");
const selectedProductElement = document.getElementById("selected-product");
const productPriceElement = document.getElementById("product-price");
const buyButton = document.getElementById("buy-button");
const apiUrlInput = document.getElementById("api-url");
const saveConfigButton = document.getElementById("save-config");

// Функция для обновления деталей продукта
function updateProductDetails(productId, price) {
  selectedProductElement.textContent = productId;
  productPriceElement.textContent = price;
  buyButton.dataset.productId = productId;
  buyButton.disabled = false;
}

// Обработчик клика по элементу списка продуктов
productList.addEventListener("click", (event) => {
  if (event.target.tagName === "LI") {
    const productId = event.target.dataset.productId;
    const price = event.target.dataset.price;
    updateProductDetails(productId, price);
  }
});

// Обработчик клика по кнопке "Купить"
buyButton.addEventListener("click", () => {
  const productId = buyButton.dataset.productId;
  const apiUrl = apiUrlInput.value; // Получаем URL из input, а не data attribute

  // Отправляем запрос на API (заглушка)
  console.log(\`Отправляем запрос на \${'apiUrl'}/products/\${'productId'}\`);
  alert(\`Товар \${'productId'} успешно куплен!\`);
});

// Обработчик клика по кнопке "Сохранить"
saveConfigButton.addEventListener("click", () => {
  const newApiUrl = apiUrlInput.value;
  // Здесь можно сохранить newApiUrl в localStorage или другом месте
  console.log(\`API URL сохранен: \${'newApiUrl'}\`);
  alert("Настройки сохранены!");
});

// Инициализация API URL из data attribute
apiUrlInput.value = apiUrlInput.dataset.defaultUrl;
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
