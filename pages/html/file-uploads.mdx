## HTML: Загрузка файлов


![Иллюстрация к уроку](/lessons/html-file-uploads.png)
В этом уроке мы рассмотрим, как добавить на веб-страницу возможность загрузки файлов с помощью HTML. Эта функциональность позволяет пользователям отправлять файлы (например, изображения, документы) на сервер.

### Концепция загрузки файлов

HTML предоставляет элемент `<input>` с атрибутом `type="file"` для создания поля выбора файла. Когда пользователь выбирает файл, его можно отправить на сервер для дальнейшей обработки (например, сохранения в базе данных или на диске). Важно помнить, что сам HTML не обрабатывает загрузку файлов на сервер. Он лишь предоставляет интерфейс для выбора файла. Обработка загрузки файла на сервере требует использования языков программирования, таких как Python, PHP, Node.js и т.д.

### Пример кода

Вот пример простого поля для загрузки файла:

```html
<!DOCTYPE html>
<html>
<head>
  <title>Загрузка файла</title>
</head>
<body>

  <form action="/upload" method="post" enctype="multipart/form-data">
    <label for="fileUpload">Выберите файл:</label>
    <input type="file" id="fileUpload" name="myFile">
    <button type="submit">Загрузить</button>
  </form>

</body>
</html>
```

Разберем этот код:

*   `<form>`:  Элемент формы, который содержит поле для загрузки файла и кнопку отправки.
    *   `action="/upload"`:  Указывает URL-адрес, на который будут отправлены данные формы (в данном случае, `/upload`). Это должен быть скрипт на стороне сервера, который будет обрабатывать загруженный файл.
    *   `method="post"`:  Указывает метод отправки данных формы. Для загрузки файлов рекомендуется использовать метод `post`.
    *   `enctype="multipart/form-data"`:  Критически важный атрибут для загрузки файлов. Он указывает, как данные формы будут закодированы при отправке. Значение `multipart/form-data` необходимо для правильной отправки файлов.
*   `<input type="file" id="fileUpload" name="myFile">`:  Элемент для выбора файла.
    *   `type="file"`:  Определяет, что это поле для загрузки файла.
    *   `id="fileUpload"`:  Уникальный идентификатор элемента.
    *   `name="myFile"`:  Имя поля, которое будет использоваться на стороне сервера для доступа к загруженному файлу.

### Дополнительные атрибуты

Атрибут `accept` позволяет указать, какие типы файлов пользователь может загружать. Например, чтобы разрешить загрузку только изображений формата JPEG и PNG:

```html
<input type="file" id="fileUpload" name="myFile" accept="image/jpeg, image/png">
```

Атрибут `multiple` позволяет пользователю выбрать несколько файлов для загрузки:

```html
<input type="file" id="fileUpload" name="myFile" multiple>
```

### Жизненный пример

Загрузка файлов используется повсеместно:

*   **Социальные сети:** Загрузка фотографий и видео.
*   **Облачные хранилища:** Загрузка и скачивание файлов.
*   **Системы управления контентом (CMS):** Загрузка изображений для статей, документов и других медиафайлов.
*   **Веб-приложения:** Загрузка аватаров пользователей, отчетов и других документов.
*   **Фреймворки:** Многие JavaScript фреймворки (React, Angular, Vue.js) предоставляют компоненты или библиотеки для упрощения работы с загрузкой файлов, но базовый HTML остается тем же.

### Ключевые моменты

*   Элемент `<input type="file">` создает поле для выбора файла.
*   Атрибут `enctype="multipart/form-data"` необходим для отправки файлов через форму.
*   Атрибут `accept` позволяет ограничить типы файлов, которые можно загрузить.
*   Атрибут `multiple` позволяет пользователю выбрать несколько файлов.
*   Обработка загруженного файла происходит на стороне сервера.
*   `name` атрибут в элементе input необходим для доступа к файлу на стороне сервера.



## Интерактивный пример

<Playground
  template="vanilla"
  files={{
    "/index.html": `
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Upload Demo</title>
  <style>
    body { background-color: #282c34; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; }
    input[type="file"] { margin-bottom: 10px; color: white; }
    button { background-color: #61dafb; border: none; padding: 5px 10px; cursor: pointer; }
    #preview { margin-top: 10px; }
  </style>
</head>
<body>

  <form id="uploadForm">
    <label for="fileInput">Выберите файл:</label>
    <input type="file" id="fileInput" name="myFile">
    <button type="submit">Предпросмотр</button>
  </form>

  <img id="preview" src="" alt="Предпросмотр" style="max-width: 200px; display: none;">

  <script>
    const form = document.getElementById('uploadForm');
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const file = fileInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          preview.src = e.target.result;
          preview.style.display = 'block';
        }
        reader.readAsDataURL(file);
      }
    });
  <\/script>

</body>
</html>
`
  }}
/>
