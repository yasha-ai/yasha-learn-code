import { Sandpack } from '@codesandbox/sandpack-react'

import { Playground } from '../../components/Playground'

# $.getJSON() - —Ä–∞–±–æ—Ç–∞ —Å JSON

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è JSON –¥–∞–Ω–Ω—ã—Ö.

## –ó–∞–≥—Ä—É–∑–∫–∞ JSON

–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ó–∞–≥—Ä—É–∑–∫–∞ JSON
$('.example').text('Hello from –ó–∞–≥—Ä—É–∑–∫–∞ JSON');
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
$('.example').text('Hello from –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö');
```

## –†–∞–±–æ—Ç–∞ —Å API

–ü—É–±–ª–∏—á–Ω—ã–µ API –ø—Ä–∏–º–µ—Ä—ã

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –†–∞–±–æ—Ç–∞ —Å API
$('.example').text('Hello from –†–∞–±–æ—Ç–∞ —Å API');
```

## üöÄ –ü—Ä–∞–∫—Ç–∏–∫–∞

<Sandpack 
  template="static"
  files={{
    'index.html': `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$.getJSON() Demo</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    h2 {
      color: #fa709a;
      margin-top: 0;
    }
    .api-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin: 20px 0;
    }
    .api-btn {
      padding: 15px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s;
      color: white;
      text-align: left;
    }
    .api-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .btn-users {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .btn-todos {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    .btn-photos {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    .btn-comments {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    .loading {
      text-align: center;
      padding: 30px;
      color: #fa709a;
      display: none;
    }
    .loading.show {
      display: block;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #fa709a;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .result {
      margin-top: 30px;
    }
    .result h3 {
      color: #fa709a;
      margin-bottom: 15px;
    }
    .data-grid {
      display: grid;
      gap: 15px;
    }
    .data-card {
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      animation: slideIn 0.4s ease-out;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .data-card h4 {
      margin: 0 0 10px 0;
      color: #d63031;
      font-size: 16px;
    }
    .data-card p {
      margin: 5px 0;
      font-size: 14px;
      color: #2d3436;
    }
    .json-raw {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      max-height: 400px;
      overflow-y: auto;
      margin-top: 15px;
    }
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      margin-left: 8px;
    }
    .badge-success {
      background: #d4edda;
      color: #155724;
    }
    .badge-warning {
      background: #fff3cd;
      color: #856404;
    }
    .photo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 12px;
    }
    .photo-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .photo-card:hover {
      transform: scale(1.05);
    }
    .photo-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    .photo-card .title {
      padding: 10px;
      font-size: 12px;
      color: #555;
      line-height: 1.3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üì¶ $.getJSON() - –†–∞–±–æ—Ç–∞ —Å JSON API</h2>
    
    <p style="color: #666; margin-bottom: 20px;">
      –í—ã–±–µ—Ä–∏—Ç–µ API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ JSON –¥–∞–Ω–Ω—ã—Ö:
    </p>
    
    <div class="api-buttons">
      <button class="api-btn btn-users">
        üë• Random Users<br>
        <small style="opacity: 0.8;">–°–ª—É—á–∞–π–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</small>
      </button>
      <button class="api-btn btn-todos">
        ‚úÖ Todo List<br>
        <small style="opacity: 0.8;">–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</small>
      </button>
      <button class="api-btn btn-photos">
        üì∏ Photo Gallery<br>
        <small style="opacity: 0.8;">–ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ</small>
      </button>
      <button class="api-btn btn-comments">
        üí¨ Comments<br>
        <small style="opacity: 0.8;">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</small>
      </button>
    </div>
    
    <div class="loading">
      <div class="spinner"></div>
      <div>–ó–∞–≥—Ä—É–∑–∫–∞ JSON –¥–∞–Ω–Ω—ã—Ö...</div>
    </div>
    
    <div id="result"></div>
  </div>

  <script>
    // 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    $('.btn-users').click(function() {
      showLoading();
      
      $.getJSON('https://jsonplaceholder.typicode.com/users')
        .done(function(users) {
          hideLoading();
          
          let html = '<div class="result"><h3>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ø–µ—Ä–≤—ã–µ 5):</h3><div class="data-grid">';
          
          users.slice(0, 5).forEach(function(user) {
            html += \`
              <div class="data-card">
                <h4>\${user.name} <span class="badge badge-success">ID: \${user.id}</span></h4>
                <p><strong>Email:</strong> \${user.email}</p>
                <p><strong>Username:</strong> @\${user.username}</p>
                <p><strong>Company:</strong> \${user.company.name}</p>
                <p><strong>Website:</strong> <a href="http://\${user.website}" target="_blank">\${user.website}</a></p>
              </div>
            \`;
          });
          
          html += '</div>';
          html += '<div class="json-raw"><strong>Raw JSON (–ø–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):</strong><br><pre>' + 
                  JSON.stringify(users[0], null, 2) + '</pre></div>';
          html += '</div>';
          
          $('#result').html(html);
        })
        .fail(function() {
          hideLoading();
          $('#result').html('<div style="color: #e74c3c; padding: 20px;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</div>');
        });
    });
    
    // 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
    $('.btn-todos').click(function() {
      showLoading();
      
      $.getJSON('https://jsonplaceholder.typicode.com/todos', { userId: 1 })
        .done(function(todos) {
          hideLoading();
          
          let html = '<div class="result"><h3>‚úÖ –ó–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #1:</h3><div class="data-grid">';
          
          todos.slice(0, 8).forEach(function(todo) {
            const status = todo.completed ? 
              '<span class="badge badge-success">‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>' : 
              '<span class="badge badge-warning">‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>';
            
            html += \`
              <div class="data-card" style="opacity: \${todo.completed ? '0.8' : '1'}">
                <h4 style="text-decoration: \${todo.completed ? 'line-through' : 'none'}">
                  \${todo.title}
                </h4>
                <p>ID: \${todo.id} \${status}</p>
              </div>
            \`;
          });
          
          const completed = todos.filter(t => t.completed).length;
          const total = todos.length;
          
          html += \`</div>
            <div style="margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 8px; text-align: center;">
              <strong>–ü—Ä–æ–≥—Ä–µ—Å—Å:</strong> \${completed} –∏–∑ \${total} –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ 
              (\${Math.round(completed/total*100)}%)
            </div>
          </div>\`;
          
          $('#result').html(html);
        });
    });
    
    // 3. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    $('.btn-photos').click(function() {
      showLoading();
      
      $.getJSON('https://jsonplaceholder.typicode.com/photos', { _limit: 12 })
        .done(function(photos) {
          hideLoading();
          
          let html = '<div class="result"><h3>üì∏ –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ:</h3><div class="photo-grid">';
          
          photos.forEach(function(photo) {
            html += \`
              <div class="photo-card">
                <img src="\${photo.thumbnailUrl}" alt="\${photo.title}">
                <div class="title">\${photo.title}</div>
              </div>
            \`;
          });
          
          html += '</div></div>';
          $('#result').html(html);
        });
    });
    
    // 4. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    $('.btn-comments').click(function() {
      showLoading();
      
      $.getJSON('https://jsonplaceholder.typicode.com/comments', { postId: 1 })
        .done(function(comments) {
          hideLoading();
          
          let html = '<div class="result"><h3>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É #1:</h3><div class="data-grid">';
          
          comments.forEach(function(comment) {
            html += \`
              <div class="data-card">
                <h4>\${comment.name}</h4>
                <p style="font-style: italic; color: #555;">"\${comment.body}"</p>
                <p style="font-size: 12px; color: #888;">
                  ‚úâÔ∏è \${comment.email}
                </p>
              </div>
            \`;
          });
          
          html += \`</div>
            <div class="json-raw">
              <strong>üí° –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è $.getJSON():</strong><br><br>
              <pre style="color: #3498db;">$.getJSON('https://api.example.com/data', { param: 'value' })
  .done(function(data) {
    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã:', data);
  })
  .fail(function() {
    console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
  });</pre>
            </div>
          </div>\`;
          
          $('#result').html(html);
        });
    });
    
    function showLoading() {
      $('.loading').addClass('show');
      $('#result').html('');
    }
    
    function hideLoading() {
      $('.loading').removeClass('show');
    }
  </script>
</body>
</html>`,
  }}
/>

---

**–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫:** [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ AJAX ‚Üí](/jquery/ajax-errors)
