import { Playground } from '../../components/Playground'

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ö–∞–∫ –ø–∏—Å–∞—Ç—å –±—ã—Å—Ç—Ä—ã–π jQuery –∫–æ–¥.

## –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

–ù–µ –∏—â–∏ –¥–≤–∞–∂–¥—ã

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
$('.example').text('Hello from –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤');
```

## –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è DOM –æ–ø–µ—Ä–∞—Ü–∏–π

Batch updates

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è DOM –æ–ø–µ—Ä–∞—Ü–∏–π
$('.example').text('Hello from –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è DOM –æ–ø–µ—Ä–∞—Ü–∏–π');
```

## Debounce –∏ throttle

–ö–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è Debounce –∏ throttle
$('.example').text('Hello from Debounce –∏ throttle');
```

## –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

Chrome DevTools

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
$('.example').text('Hello from –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ');
```

## üöÄ –ü—Ä–∞–∫—Ç–∏–∫–∞

<Sandpack 
  template="static"
  files={{
    'index.html': `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jQuery Performance</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è jQuery</h1>
  
  <div class="section">
    <h2>1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤</h2>
    <div class="demo-block">
      <button id="badSelector">‚ùå –ë–µ–∑ –∫–µ—à–∞ (–º–µ–¥–ª–µ–Ω–Ω–æ)</button>
      <button id="goodSelector">‚úÖ –° –∫–µ—à–µ–º (–±—ã—Å—Ç—Ä–æ)</button>
      <div id="result1" class="result"></div>
    </div>
    <pre><code>// ‚ùå –ü–ª–æ—Ö–æ - —Å–µ–ª–µ–∫—Ç–æ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 1000 —Ä–∞–∑
for (let i = 0; i < 1000; i++) {
  $('.box').text(i);
}

// ‚úÖ –•–æ—Ä–æ—à–æ - —Å–µ–ª–µ–∫—Ç–æ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 1 —Ä–∞–∑
const $box = $('.box');
for (let i = 0; i < 1000; i++) {
  $box.text(i);
}</code></pre>
  </div>

  <div class="section">
    <h2>2. Batch DOM –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
    <div class="demo-block">
      <button id="badBatch">‚ùå –ü–æ –æ–¥–Ω–æ–º—É (–º–µ–¥–ª–µ–Ω–Ω–æ)</button>
      <button id="goodBatch">‚úÖ Batch (–±—ã—Å—Ç—Ä–æ)</button>
      <div id="list" class="list"></div>
      <div id="result2" class="result"></div>
    </div>
    <pre><code>// ‚ùå –ü–ª–æ—Ö–æ - 100 DOM –æ–ø–µ—Ä–∞—Ü–∏–π
for (let i = 0; i < 100; i++) {
  $('#list').append('<li>Item ' + i + '</li>');
}

// ‚úÖ –•–æ—Ä–æ—à–æ - 1 DOM –æ–ø–µ—Ä–∞—Ü–∏—è
let html = '';
for (let i = 0; i < 100; i++) {
  html += '<li>Item ' + i + '</li>';
}
$('#list').html(html);</code></pre>
  </div>

  <div class="section">
    <h2>3. Debounce & Throttle</h2>
    <div class="demo-block">
      <input type="text" id="searchInput" placeholder="–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—á–∞—Ç–∞—Ç—å...">
      <div class="counters">
        <div class="counter">
          <div class="label">‚ùå –ë–µ–∑ debounce</div>
          <div class="count" id="normalCount">0</div>
        </div>
        <div class="counter">
          <div class="label">‚úÖ –° debounce (300ms)</div>
          <div class="count" id="debounceCount">0</div>
        </div>
        <div class="counter">
          <div class="label">‚ö° –° throttle (300ms)</div>
          <div class="count" id="throttleCount">0</div>
        </div>
      </div>
    </div>
    <pre><code>// Debounce - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–∞—É–∑—ã
function debounce(fn, delay) {
  let timer;
  return function() {
    clearTimeout(timer);
    timer = setTimeout(() => fn.apply(this, arguments), delay);
  };
}

// Throttle - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ N –º—Å
function throttle(fn, delay) {
  let last = 0;
  return function() {
    const now = Date.now();
    if (now - last >= delay) {
      last = now;
      fn.apply(this, arguments);
    }
  };
}</code></pre>
  </div>

  <div class="section">
    <h2>4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π</h2>
    <div class="demo-block">
      <div class="scroll-demo" id="scrollDemo">
        <p>üìú –°–∫—Ä–æ–ª–ª—å –º–µ–Ω—è!</p>
        <div style="height: 500px;"></div>
        <p>‚¨áÔ∏è –ü—Ä–æ–¥–æ–ª–∂–∞–π —Å–∫—Ä–æ–ª–ª–∏—Ç—å...</p>
        <div style="height: 500px;"></div>
        <p>üéâ –ü–æ—á—Ç–∏ –¥–æ—à–µ–ª!</p>
      </div>
      <div class="counters">
        <div class="counter">
          <div class="label">‚ùå –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</div>
          <div class="count" id="scrollCount">0</div>
        </div>
        <div class="counter">
          <div class="label">‚úÖ –° throttle</div>
          <div class="count" id="scrollThrottle">0</div>
        </div>
      </div>
    </div>
  </div>

  <div class="section tips">
    <h2>üí° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
    <ul>
      <li>üéØ <strong>–ö–µ—à–∏—Ä—É–π—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã</strong> - –Ω–µ –∏—â–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ</li>
      <li>üì¶ <strong>Batch DOM –æ–ø–µ—Ä–∞—Ü–∏–∏</strong> - –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</li>
      <li>‚è±Ô∏è <strong>Debounce/Throttle</strong> - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É –≤—ã–∑–æ–≤–æ–≤</li>
      <li>üé™ <strong>Event Delegation</strong> - –æ–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–º–µ—Å—Ç–æ —Ç—ã—Å—è—á</li>
      <li>üîç <strong>–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã</strong> - #id –±—ã—Å—Ç—Ä–µ–µ .class</li>
      <li>üìè <strong>–ò–∑–º–µ—Ä—è–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</strong> - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DevTools</li>
    </ul>
  </div>

  <script src="script.js"></script>
</body>
</html>`,
    'styles.css': `body {
  font-family: Arial, sans-serif;
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  color: #fff;
}

h1 {
  text-align: center;
  margin-bottom: 30px;
}

.section {
  background: rgba(255, 255, 255, 0.1);
  padding: 25px;
  margin-bottom: 20px;
  border-radius: 10px;
  backdrop-filter: blur(10px);
}

h2 {
  margin-top: 0;
  font-size: 1.3em;
}

.demo-block {
  margin: 20px 0;
}

button {
  background: #fff;
  color: #3b82f6;
  border: none;
  padding: 12px 24px;
  margin: 5px;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}

button:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

button:active {
  transform: scale(0.95);
}

pre {
  background: rgba(0, 0, 0, 0.3);
  padding: 15px;
  border-radius: 8px;
  overflow-x: auto;
  margin-top: 15px;
}

code {
  color: #a5f3fc;
  font-size: 0.9em;
  line-height: 1.6;
}

.result {
  background: rgba(16, 185, 129, 0.2);
  padding: 15px;
  margin-top: 15px;
  border-radius: 8px;
  font-weight: bold;
  min-height: 20px;
}

.list {
  background: rgba(255, 255, 255, 0.1);
  padding: 15px;
  margin-top: 15px;
  border-radius: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.list li {
  padding: 5px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

input[type="text"] {
  width: 100%;
  padding: 12px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 8px;
  font-size: 1.1em;
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}

input[type="text"]::placeholder {
  color: rgba(255, 255, 255, 0.6);
}

.counters {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
  margin-top: 20px;
}

.counter {
  background: rgba(255, 255, 255, 0.1);
  padding: 20px;
  border-radius: 8px;
  text-align: center;
}

.label {
  font-size: 0.9em;
  margin-bottom: 10px;
  opacity: 0.9;
}

.count {
  font-size: 3em;
  font-weight: bold;
  color: #fbbf24;
}

.scroll-demo {
  background: rgba(255, 255, 255, 0.1);
  height: 300px;
  overflow-y: scroll;
  padding: 20px;
  border-radius: 8px;
  border: 2px solid rgba(255, 255, 255, 0.2);
}

.scroll-demo p {
  font-size: 1.2em;
  font-weight: bold;
  text-align: center;
}

.tips {
  background: rgba(16, 185, 129, 0.2);
  border: 2px solid rgba(16, 185, 129, 0.3);
}

.tips ul {
  line-height: 1.8;
  font-size: 1.05em;
}

.tips strong {
  color: #fbbf24;
}`,
    'script.js': `$(document).ready(function() {
  // 1. Selector caching demo
  $('#badSelector').click(function() {
    const start = performance.now();
    
    // Bad - selector called 1000 times
    for (let i = 0; i < 1000; i++) {
      $('.result').attr('data-count', i);
    }
    
    const time = (performance.now() - start).toFixed(2);
    $('#result1').html(\`‚è±Ô∏è –í—Ä–µ–º—è: <strong>\${time}ms</strong> (1000 –≤—ã–∑–æ–≤–æ–≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞)\`);
  });
  
  $('#goodSelector').click(function() {
    const start = performance.now();
    
    // Good - selector called once
    const $result = $('.result');
    for (let i = 0; i < 1000; i++) {
      $result.attr('data-count', i);
    }
    
    const time = (performance.now() - start).toFixed(2);
    $('#result1').html(\`‚ö° –í—Ä–µ–º—è: <strong>\${time}ms</strong> (1 –≤—ã–∑–æ–≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞)\`);
  });

  // 2. Batch DOM operations
  $('#badBatch').click(function() {
    const start = performance.now();
    $('#list').empty();
    
    // Bad - 100 DOM operations
    for (let i = 0; i < 100; i++) {
      $('#list').append(\`<li>Item \${i}</li>\`);
    }
    
    const time = (performance.now() - start).toFixed(2);
    $('#result2').html(\`‚è±Ô∏è –í—Ä–µ–º—è: <strong>\${time}ms</strong> (100 DOM –æ–ø–µ—Ä–∞—Ü–∏–π)\`);
  });
  
  $('#goodBatch').click(function() {
    const start = performance.now();
    
    // Good - 1 DOM operation
    let html = '';
    for (let i = 0; i < 100; i++) {
      html += \`<li>Item \${i}</li>\`;
    }
    $('#list').html(html);
    
    const time = (performance.now() - start).toFixed(2);
    $('#result2').html(\`‚ö° –í—Ä–µ–º—è: <strong>\${time}ms</strong> (1 DOM –æ–ø–µ—Ä–∞—Ü–∏—è)\`);
  });

  // 3. Debounce & Throttle
  let normalCount = 0;
  let debounceCount = 0;
  let throttleCount = 0;
  
  function debounce(fn, delay) {
    let timer;
    return function() {
      clearTimeout(timer);
      timer = setTimeout(() => fn.apply(this, arguments), delay);
    };
  }
  
  function throttle(fn, delay) {
    let last = 0;
    return function() {
      const now = Date.now();
      if (now - last >= delay) {
        last = now;
        fn.apply(this, arguments);
      }
    };
  }
  
  const debouncedHandler = debounce(() => {
    debounceCount++;
    $('#debounceCount').text(debounceCount);
  }, 300);
  
  const throttledHandler = throttle(() => {
    throttleCount++;
    $('#throttleCount').text(throttleCount);
  }, 300);
  
  $('#searchInput').on('input', function() {
    normalCount++;
    $('#normalCount').text(normalCount);
    
    debouncedHandler();
    throttledHandler();
  });

  // 4. Scroll optimization
  let scrollCount = 0;
  let scrollThrottleCount = 0;
  
  const throttledScroll = throttle(() => {
    scrollThrottleCount++;
    $('#scrollThrottle').text(scrollThrottleCount);
  }, 100);
  
  $('#scrollDemo').on('scroll', function() {
    scrollCount++;
    $('#scrollCount').text(scrollCount);
    
    throttledScroll();
  });
});`
  }}
/>

---

**–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫:** [–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Vanilla JS ‚Üí](/jquery/vanilla-migration)
