import { Sandpack } from '@codesandbox/sandpack-react'

import { Playground } from '../../components/Playground'

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## .trigger()

–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è .trigger()
$('.example').text('Hello from .trigger()');
```

## –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
$('.example').text('Hello from –ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
```

## Namespace events

–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è Namespace events
$('.example').text('Hello from Namespace events');
```

## üöÄ –ü—Ä–∞–∫—Ç–∏–∫–∞

<Sandpack 
  template="static"
  files={{
    'index.html': `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jQuery Custom Events</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      min-height: 100vh;
      padding: 30px 20px;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      text-align: center;
      color: #fa709a;
      margin-bottom: 15px;
    }
    .subtitle {
      text-align: center;
      color: #888;
      margin-bottom: 35px;
      font-size: 14px;
    }
    .section {
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      padding: 30px;
      margin-bottom: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .section h2 {
      color: #d63031;
      margin-bottom: 20px;
      font-size: 20px;
    }
    button {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s;
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      margin: 5px;
    }
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    .demo-area {
      background: white;
      padding: 30px;
      border-radius: 12px;
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .event-log {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 20px;
      border-radius: 10px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 250px;
      overflow-y: auto;
      margin-top: 15px;
    }
    .log-entry {
      padding: 8px 12px;
      margin: 5px 0;
      background: rgba(52, 152, 219, 0.2);
      border-left: 4px solid #3498db;
      border-radius: 4px;
      animation: slideIn 0.3s ease-out;
    }
    .log-entry.trigger {
      border-left-color: #e74c3c;
      background: rgba(231, 76, 60, 0.2);
    }
    .log-entry.listen {
      border-left-color: #2ecc71;
      background: rgba(46, 204, 113, 0.2);
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .code-block {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      margin: 15px 0;
      overflow-x: auto;
    }
    .code-keyword {
      color: #e74c3c;
    }
    .code-method {
      color: #3498db;
    }
    .code-string {
      color: #2ecc71;
    }
    .component {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      padding: 20px;
      border-radius: 10px;
      margin: 10px 0;
      border: 3px solid transparent;
      transition: all 0.3s;
    }
    .component.active {
      border-color: #fa709a;
      box-shadow: 0 8px 25px rgba(250, 112, 154, 0.4);
      transform: scale(1.02);
    }
    .component h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 18px;
    }
    .component p {
      color: #666;
      font-size: 14px;
      margin: 5px 0;
    }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 25px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      display: none;
      animation: slideInRight 0.5s ease-out;
      max-width: 300px;
    }
    .notification.show {
      display: block;
    }
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(100px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin: 15px 0;
    }
    input[type="text"],
    input[type="number"] {
      padding: 10px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
    }
    input:focus {
      outline: none;
      border-color: #fa709a;
    }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .stat-box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .stat-value {
      font-size: 32px;
      font-weight: bold;
      color: #fa709a;
    }
    .stat-label {
      font-size: 14px;
      color: #888;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé™ –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</h1>
    <p class="subtitle">–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã</p>
    
    <!-- Basic .trigger() -->
    <div class="section">
      <h2>üîî .trigger() - –í—ã–∑–æ–≤ —Å–æ–±—ã—Ç–∏–π</h2>
      <div class="code-block">
<span class="code-keyword">$</span>(<span class="code-string">'#myElement'</span>).<span class="code-method">on</span>(<span class="code-string">'customEvent'</span>, <span class="code-keyword">function</span>() {
  console.log(<span class="code-string">'–°–æ–±—ã—Ç–∏–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ!'</span>);
});

<span class="code-keyword">$</span>(<span class="code-string">'#myElement'</span>).<span class="code-method">trigger</span>(<span class="code-string">'customEvent'</span>);
      </div>
      <div class="demo-area">
        <div id="triggerTarget" class="component">
          <h3>üéØ –¶–µ–ª–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç</h3>
          <p>–°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ: <strong>myCustomEvent</strong></p>
        </div>
      </div>
      <div class="controls">
        <button onclick="triggerBasic()">üöÄ Trigger Event</button>
        <button onclick="triggerMultiple()">‚ú® Trigger Multiple Times</button>
        <button onclick="clearLog()">üßπ Clear Log</button>
      </div>
      <div class="event-log" id="triggerLog"></div>
    </div>
    
    <!-- Custom Data -->
    <div class="section">
      <h2>üì¶ –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ–±—ã—Ç–∏—è–º–∏</h2>
      <div class="code-block">
<span class="code-keyword">$</span>(<span class="code-string">'#elem'</span>).<span class="code-method">on</span>(<span class="code-string">'dataEvent'</span>, <span class="code-keyword">function</span>(event, data) {
  console.log(<span class="code-string">'–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ:'</span>, data);
});

<span class="code-keyword">$</span>(<span class="code-string">'#elem'</span>).<span class="code-method">trigger</span>(<span class="code-string">'dataEvent'</span>, { name: <span class="code-string">'John'</span>, age: <span class="code-string">30</span> });
      </div>
      <div class="demo-area">
        <input type="text" id="userName" placeholder="–ò–º—è" style="margin-right: 10px;">
        <input type="number" id="userAge" placeholder="–í–æ–∑—Ä–∞—Å—Ç" min="1" max="120">
        <div style="margin-top: 15px;">
          <div id="userDisplay" class="component">
            <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
            <p id="profileInfo">–î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã</p>
          </div>
        </div>
      </div>
      <div class="controls">
        <button onclick="sendUserData()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <button onclick="sendNotification()">üîî –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
      </div>
      <div class="event-log" id="dataLog"></div>
    </div>
    
    <!-- Namespaced Events -->
    <div class="section">
      <h2>üè∑Ô∏è Namespace Events (–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è)</h2>
      <div class="code-block">
<span class="code-comment">// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ namespace –∫ —Å–æ–±—ã—Ç–∏—è–º</span>
<span class="code-keyword">$</span>(<span class="code-string">'#elem'</span>).<span class="code-method">on</span>(<span class="code-string">'click.myApp'</span>, handler1);
<span class="code-keyword">$</span>(<span class="code-string">'#elem'</span>).<span class="code-method">on</span>(<span class="code-string">'click.otherApp'</span>, handler2);

<span class="code-comment">// –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è myApp</span>
<span class="code-keyword">$</span>(<span class="code-string">'#elem'</span>).<span class="code-method">off</span>(<span class="code-string">'.myApp'</span>);
      </div>
      <div class="demo-area">
        <div class="component" id="nsTarget">
          <h3>üéØ –≠–ª–µ–º–µ–Ω—Ç —Å namespace —Å–æ–±—ã—Ç–∏—è–º–∏</h3>
          <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π</p>
        </div>
      </div>
      <div class="controls">
        <button onclick="addNamespacedEvents()">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏—è (.app1 –∏ .app2)</button>
        <button onclick="removeApp1()">‚ûñ –£–¥–∞–ª–∏—Ç—å .app1</button>
        <button onclick="removeApp2()">‚ûñ –£–¥–∞–ª–∏—Ç—å .app2</button>
        <button onclick="removeAllNs()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ</button>
      </div>
      <div class="event-log" id="nsLog"></div>
    </div>
    
    <!-- Event Bus Pattern -->
    <div class="section">
      <h2>üöå Event Bus Pattern</h2>
      <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
        –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é —à–∏–Ω—É —Å–æ–±—ã—Ç–∏–π
      </p>
      <div class="stats">
        <div class="stat-box">
          <div class="stat-value" id="cartCount">0</div>
          <div class="stat-label">üõí –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="totalPrice">$0</div>
          <div class="stat-label">üí∞ –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="eventCount">0</div>
          <div class="stat-label">üì° –°–æ–±—ã—Ç–∏—è</div>
        </div>
      </div>
      <div class="controls">
        <button onclick="addToCart('Laptop', 999)">üíª –î–æ–±–∞–≤–∏—Ç—å Laptop ($999)</button>
        <button onclick="addToCart('Mouse', 29)">üñ±Ô∏è –î–æ–±–∞–≤–∏—Ç—å Mouse ($29)</button>
        <button onclick="addToCart('Keyboard', 79)">‚å®Ô∏è –î–æ–±–∞–≤–∏—Ç—å Keyboard ($79)</button>
        <button onclick="clearCart()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>
      <div class="event-log" id="busLog"></div>
    </div>
  </div>
  
  <div class="notification" id="notification"></div>

  <script>
    // Event Bus
    const eventBus = $({});
    
    // Basic trigger
    $('#triggerTarget').on('myCustomEvent', function(event) {
      $(this).addClass('active');
      setTimeout(() => $(this).removeClass('active'), 500);
      logEvent('triggerLog', '‚úì –°–æ–±—ã—Ç–∏–µ myCustomEvent –ø–æ–ª—É—á–µ–Ω–æ!', 'listen');
    });
    
    function triggerBasic() {
      logEvent('triggerLog', '‚Üí –í—ã–∑–æ–≤ .trigger("myCustomEvent")', 'trigger');
      $('#triggerTarget').trigger('myCustomEvent');
    }
    
    function triggerMultiple() {
      for (let i = 1; i <= 3; i++) {
        setTimeout(() => {
          logEvent('triggerLog', \`‚Üí –í—ã–∑–æ–≤ #\${i}\`, 'trigger');
          $('#triggerTarget').trigger('myCustomEvent');
        }, i * 500);
      }
    }
    
    // Custom data
    $('#userDisplay').on('userUpdate', function(event, userData) {
      $(this).addClass('active');
      $('#profileInfo').html(\`
        <strong>–ò–º—è:</strong> \${userData.name}<br>
        <strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> \${userData.age} –ª–µ—Ç
      \`);
      setTimeout(() => $(this).removeClass('active'), 1000);
      
      logEvent('dataLog', \`‚úì –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ: \${JSON.stringify(userData)}\`, 'listen');
    });
    
    function sendUserData() {
      const name = $('#userName').val() || '–ê–Ω–æ–Ω–∏–º';
      const age = $('#userAge').val() || 18;
      const userData = { name, age };
      
      logEvent('dataLog', \`‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö: \${JSON.stringify(userData)}\`, 'trigger');
      $('#userDisplay').trigger('userUpdate', userData);
    }
    
    function sendNotification() {
      const message = '–≠—Ç–æ –∫–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!';
      logEvent('dataLog', \`‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\`, 'trigger');
      showNotification(message);
    }
    
    function showNotification(message) {
      $('#notification').html(\`
        <strong>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</strong><br>
        <div style="margin-top: 10px;">\${message}</div>
      \`).addClass('show');
      
      setTimeout(() => $('#notification').removeClass('show'), 3000);
    }
    
    // Namespaced events
    function addNamespacedEvents() {
      $('#nsTarget')
        .off('.app1 .app2')
        .on('click.app1', function() {
          logEvent('nsLog', '‚úì –û–±—Ä–∞–±–æ—Ç—á–∏–∫ .app1 —Å—Ä–∞–±–æ—Ç–∞–ª', 'listen');
        })
        .on('click.app2', function() {
          logEvent('nsLog', '‚úì –û–±—Ä–∞–±–æ—Ç—á–∏–∫ .app2 —Å—Ä–∞–±–æ—Ç–∞–ª', 'listen');
        });
      logEvent('nsLog', '‚ûï –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è click.app1 –∏ click.app2', 'trigger');
    }
    
    function removeApp1() {
      $('#nsTarget').off('.app1');
      logEvent('nsLog', '‚ûñ –£–¥–∞–ª–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è .app1', 'trigger');
    }
    
    function removeApp2() {
      $('#nsTarget').off('.app2');
      logEvent('nsLog', '‚ûñ –£–¥–∞–ª–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è .app2', 'trigger');
    }
    
    function removeAllNs() {
      $('#nsTarget').off('.app1 .app2');
      logEvent('nsLog', 'üóëÔ∏è –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ namespaced —Å–æ–±—ã—Ç–∏—è', 'trigger');
    }
    
    $('#nsTarget').on('click', function() {
      $(this).addClass('active');
      setTimeout(() => $(this).removeClass('active'), 300);
    });
    
    // Event Bus Pattern
    let cartItems = 0;
    let totalPrice = 0;
    let eventCount = 0;
    
    eventBus.on('cart:add', function(event, item) {
      cartItems++;
      totalPrice += item.price;
      eventCount++;
      
      $('#cartCount').text(cartItems);
      $('#totalPrice').text('$' + totalPrice);
      $('#eventCount').text(eventCount);
      
      logEvent('busLog', \`‚úì –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω: \${item.name} ($\${item.price})\`, 'listen');
    });
    
    eventBus.on('cart:clear', function() {
      cartItems = 0;
      totalPrice = 0;
      eventCount++;
      
      $('#cartCount').text(cartItems);
      $('#totalPrice').text('$' + totalPrice);
      $('#eventCount').text(eventCount);
      
      logEvent('busLog', '‚úì –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞', 'listen');
    });
    
    function addToCart(name, price) {
      logEvent('busLog', \`‚Üí –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏—è cart:add\`, 'trigger');
      eventBus.trigger('cart:add', { name, price });
    }
    
    function clearCart() {
      logEvent('busLog', \`‚Üí –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏—è cart:clear\`, 'trigger');
      eventBus.trigger('cart:clear');
    }
    
    // Utility
    function logEvent(logId, message, type = '') {
      const time = new Date().toLocaleTimeString('ru-RU');
      const $log = $('#' + logId);
      $log.prepend(\`<div class="log-entry \${type}">[\${time}] \${message}</div>\`);
      
      // Limit log entries
      if ($log.children().length > 20) {
        $log.children().last().remove();
      }
    }
    
    function clearLog() {
      $('#triggerLog').html('');
    }
  </script>
</body>
</html>`,
  }}
/>

---

**–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫:** [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤ ‚Üí](/jquery/plugins-usage)
