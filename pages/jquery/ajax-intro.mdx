import { Sandpack } from '@codesandbox/sandpack-react'

import { Playground } from '../../components/Playground'

# –í–≤–µ–¥–µ–Ω–∏–µ –≤ AJAX

AJAX –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

## –ß—Ç–æ —Ç–∞–∫–æ–µ AJAX

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ß—Ç–æ —Ç–∞–∫–æ–µ AJAX
$('.example').text('Hello from –ß—Ç–æ —Ç–∞–∫–æ–µ AJAX');
```

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω AJAX

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –ó–∞—á–µ–º –Ω—É–∂–µ–Ω AJAX
$('.example').text('Hello from –ó–∞—á–µ–º –Ω—É–∂–µ–Ω AJAX');
```

## JSON —Ñ–æ—Ä–º–∞—Ç

–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è JSON —Ñ–æ—Ä–º–∞—Ç
$('.example').text('Hello from JSON —Ñ–æ—Ä–º–∞—Ç');
```

## üöÄ –ü—Ä–∞–∫—Ç–∏–∫–∞

<Sandpack 
  template="static"
  files={{
    'index.html': `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AJAX Intro</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    h2 {
      color: #667eea;
      margin-top: 0;
    }
    .info-box {
      background: #e3f2fd;
      padding: 15px 20px;
      border-radius: 8px;
      border-left: 4px solid #2196f3;
      margin-bottom: 20px;
      font-size: 14px;
    }
    .info-box strong {
      color: #1565c0;
    }
    button {
      padding: 14px 28px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transition: all 0.3s;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .loading {
      text-align: center;
      padding: 40px;
      color: #667eea;
      display: none;
    }
    .loading.show {
      display: block;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e0e0e0;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .users-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .user-card {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s;
      animation: fadeIn 0.5s ease-out;
    }
    .user-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }
    .user-card h4 {
      margin: 0 0 10px 0;
      color: #667eea;
      font-size: 16px;
    }
    .user-card p {
      margin: 5px 0;
      font-size: 13px;
      color: #555;
    }
    .user-card .email {
      font-size: 12px;
      color: #888;
      word-break: break-all;
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .json-viewer {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin-top: 20px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      max-height: 300px;
      overflow-y: auto;
    }
    .json-key {
      color: #e74c3c;
    }
    .json-string {
      color: #2ecc71;
    }
    .json-number {
      color: #3498db;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üåê –í–≤–µ–¥–µ–Ω–∏–µ –≤ AJAX</h2>
    
    <div class="info-box">
      <strong>AJAX</strong> = Asynchronous JavaScript And XML<br>
      –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö <strong>–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</strong> üöÄ
    </div>
    
    <button id="loadUsers">üë• –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
    <button id="loadPost">üìÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Å—Ç</button>
    <button id="showJson">üìã –ü–æ–∫–∞–∑–∞—Ç—å JSON</button>
    
    <div class="loading">
      <div class="spinner"></div>
      <div>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    </div>
    
    <div id="content"></div>
  </div>

  <script>
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    $('#loadUsers').click(function() {
      const $btn = $(this);
      $btn.prop('disabled', true);
      $('.loading').addClass('show');
      $('#content').html('');
      
      // AJAX –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ jQuery
      $.ajax({
        url: 'https://jsonplaceholder.typicode.com/users',
        method: 'GET',
        dataType: 'json',
        success: function(users) {
          $('.loading').removeClass('show');
          $btn.prop('disabled', false);
          
          // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
          const $grid = $('<div class="users-grid"></div>');
          
          users.forEach(function(user) {
            const $card = $(\`
              <div class="user-card">
                <h4>\${user.name}</h4>
                <p><strong>Username:</strong> @\${user.username}</p>
                <p><strong>City:</strong> \${user.address.city}</p>
                <p class="email">‚úâÔ∏è \${user.email}</p>
              </div>
            \`);
            $grid.append($card);
          });
          
          $('#content').append(\`
            <h3 style="color: #667eea; margin-top: 30px;">
              –ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: \${users.length}
            </h3>
          \`).append($grid);
        },
        error: function(jqXHR, textStatus, errorThrown) {
          $('.loading').removeClass('show');
          $btn.prop('disabled', false);
          $('#content').html(\`
            <div style="color: #e74c3c; padding: 20px; text-align: center;">
              ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: \${textStatus}
            </div>
          \`);
        }
      });
    });
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
    $('#loadPost').click(function() {
      const $btn = $(this);
      $btn.prop('disabled', true);
      $('.loading').addClass('show');
      $('#content').html('');
      
      $.ajax({
        url: 'https://jsonplaceholder.typicode.com/posts/1',
        method: 'GET',
        dataType: 'json'
      })
      .done(function(post) {
        $('.loading').removeClass('show');
        $btn.prop('disabled', false);
        
        $('#content').html(\`
          <div style="background: #f5f7fa; padding: 25px; border-radius: 10px; margin-top: 20px; animation: fadeIn 0.5s;">
            <h3 style="color: #667eea; margin-top: 0;">\${post.title}</h3>
            <p style="color: #555; line-height: 1.6;">\${post.body}</p>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #e0e0e0; color: #888; font-size: 13px;">
              Post ID: \${post.id} | User ID: \${post.userId}
            </div>
          </div>
        \`);
      })
      .fail(function() {
        $('.loading').removeClass('show');
        $btn.prop('disabled', false);
        $('#content').html('<div style="color: #e74c3c;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–∞</div>');
      });
    });
    
    // –ü–æ–∫–∞–∑–∞—Ç—å JSON –¥–∞–Ω–Ω—ã–µ
    $('#showJson').click(function() {
      const $btn = $(this);
      $btn.prop('disabled', true);
      $('.loading').addClass('show');
      $('#content').html('');
      
      $.get('https://jsonplaceholder.typicode.com/posts/1', function(data) {
        $('.loading').removeClass('show');
        $btn.prop('disabled', false);
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
        const jsonString = JSON.stringify(data, null, 2);
        const highlighted = jsonString
          .replace(/"([^"]+)":/g, '<span class="json-key">"$1"</span>:')
          .replace(/: "([^"]+)"/g, ': <span class="json-string">"$1"</span>')
          .replace(/: (\d+)/g, ': <span class="json-number">$1</span>');
        
        $('#content').html(\`
          <div>
            <h3 style="color: #667eea; margin-top: 30px;">üìã JSON Response:</h3>
            <div class="json-viewer"><pre>\${highlighted}</pre></div>
            <div style="margin-top: 15px; padding: 15px; background: #fffbea; border-left: 4px solid #f39c12; border-radius: 6px; font-size: 14px;">
              <strong>üí° JSON</strong> (JavaScript Object Notation) - —Ñ–æ—Ä–º–∞—Ç –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º.
            </div>
          </div>
        \`);
      });
    });
  </script>
</body>
</html>`,
  }}
/>

---

**–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫:** [$.ajax() - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å ‚Üí](/jquery/ajax-full)
