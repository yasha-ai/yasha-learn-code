# CSS Селекторы

![Иллюстрация к уроку](/lessons/selectors.png)

Селекторы — это способ «нацелиться» на HTML-элементы, чтобы применить к ним стили. Понимание селекторов — фундамент CSS.

## Базовые селекторы

### Селектор по тегу

Выбирает все элементы с указанным тегом:

```css
p {
  color: blue;
}

h1 {
  font-size: 32px;
}
```

### Селектор по классу

Выбирает элементы с указанным классом (начинается с точки):

```css
.highlight {
  background: yellow;
}

.btn {
  padding: 10px 20px;
  border-radius: 4px;
}
```

```html
<p class="highlight">Этот текст будет с жёлтым фоном</p>
<button class="btn">Кнопка</button>
```

### Селектор по ID

Выбирает элемент с уникальным идентификатором (начинается с `#`):

```css
#header {
  font-size: 24px;
}

#main-content {
  max-width: 1200px;
  margin: 0 auto;
}
```

### Универсальный селектор

Выбирает ВСЕ элементы на странице:

```css
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
```

## Комбинации селекторов

### Несколько классов

Элемент может иметь несколько классов:

```css
.btn.primary {
  background: blue;
  color: white;
}

.btn.danger {
  background: red;
  color: white;
}
```

```html
<button class="btn primary">Основная</button>
<button class="btn danger">Удалить</button>
```

### Селектор потомков (пробел)

Выбирает элементы внутри другого элемента (на любом уровне вложенности):

```css
nav a {
  text-decoration: none;
}

.card p {
  color: gray;
}
```

### Дочерний селектор (>)

Выбирает только прямых потомков:

```css
ul > li {
  list-style: none;
}

.menu > .item {
  display: inline-block;
}
```

### Соседний селектор (+)

Выбирает элемент, идущий сразу после указанного:

```css
h2 + p {
  font-size: 18px;
  color: gray;
}
```

### Общий сиблинг (~)

Выбирает все элементы после указанного на том же уровне:

```css
h2 ~ p {
  margin-left: 20px;
}
```

## Селекторы атрибутов

```css
/* Есть атрибут */
[disabled] {
  opacity: 0.5;
}

/* Точное значение */
[type="email"] {
  border-color: blue;
}

/* Начинается с */
[href^="https"] {
  color: green;
}

/* Заканчивается на */
[href$=".pdf"] {
  color: red;
}

/* Содержит */
[class*="btn"] {
  cursor: pointer;
}
```

## Псевдоклассы

Псевдоклассы описывают состояние элемента:

```css
/* Наведение мыши */
a:hover {
  color: red;
}

/* Фокус (для форм) */
input:focus {
  border-color: blue;
  outline: none;
}

/* Первый/последний ребёнок */
li:first-child {
  font-weight: bold;
}

li:last-child {
  border-bottom: none;
}

/* Каждый чётный/нечётный */
tr:nth-child(even) {
  background: #f5f5f5;
}

tr:nth-child(odd) {
  background: white;
}

/* Каждый N-й элемент */
li:nth-child(3n) {
  color: blue;  /* Каждый 3-й */
}

/* Пустой элемент */
div:empty {
  display: none;
}

/* Отрицание */
button:not(.disabled) {
  cursor: pointer;
}
```

## Псевдоэлементы

Псевдоэлементы создают «виртуальные» элементы:

```css
/* Контент до элемента */
.required::before {
  content: "* ";
  color: red;
}

/* Контент после элемента */
.external-link::after {
  content: " ↗";
}

/* Первая буква */
p::first-letter {
  font-size: 2em;
  font-weight: bold;
}

/* Первая строка */
p::first-line {
  font-style: italic;
}

/* Выделенный текст */
::selection {
  background: yellow;
  color: black;
}
```

## Специфичность (Вес селекторов)

Когда несколько правил применяются к одному элементу, браузер определяет приоритет по **специфичности**.

### Формула веса: (A, B, C, D)

| Категория | Вес | Примеры |
|-----------|-----|---------|
| A: Inline стили | 1000 | `style="..."` |
| B: ID | 100 | `#header` |
| C: Классы, атрибуты, псевдоклассы | 10 | `.btn`, `[type]`, `:hover` |
| D: Теги, псевдоэлементы | 1 | `div`, `::before` |

### Примеры расчёта

```css
p { }                    /* 0,0,0,1 = 1 */
.intro { }               /* 0,0,1,0 = 10 */
#header { }              /* 0,1,0,0 = 100 */
p.intro { }              /* 0,0,1,1 = 11 */
#header .nav a { }       /* 0,1,1,1 = 111 */
#header .nav a:hover { } /* 0,1,2,1 = 121 */
```

### Правила приоритета

1. `!important` побеждает всё (избегайте его!)
2. Inline стили > ID > Классы > Теги
3. При равной специфичности — побеждает последнее правило

```css
/* Специфичность: 10 */
.btn {
  background: blue;
}

/* Специфичность: 100 — победит! */
#submit {
  background: green;
}

/* !important — плохая практика */
.btn {
  background: red !important;  /* Победит, но так делать не надо */
}
```

## Жизненный пример

Представьте интернет-магазин. У вас есть карточки товаров:

```css
/* Базовые стили карточки */
.product-card {
  border: 1px solid #ddd;
  padding: 20px;
}

/* Карточка со скидкой */
.product-card.sale {
  border-color: red;
}

/* Цена внутри карточки */
.product-card .price {
  font-size: 24px;
  font-weight: bold;
}

/* Старая цена (зачёркнутая) */
.product-card.sale .old-price {
  text-decoration: line-through;
  color: gray;
}

/* При наведении — тень */
.product-card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
```

В реальных проектах используют методологии именования классов (BEM, SMACSS), чтобы избежать конфликтов специфичности.

## Ключевые моменты

- **Базовые селекторы:** тег, класс (`.`), ID (`#`), универсальный (`*`)
- **Комбинации:** потомок (пробел), дочерний (`>`), соседний (`+`), сиблинг (`~`)
- **Атрибуты:** `[attr]`, `[attr="value"]`, `[attr^="start"]`, `[attr$="end"]`
- **Псевдоклассы:** `:hover`, `:focus`, `:nth-child()`, `:not()`
- **Псевдоэлементы:** `::before`, `::after`, `::first-letter`
- **Специфичность:** ID (100) > Класс (10) > Тег (1)
- Избегайте `!important` — это признак плохой архитектуры CSS
