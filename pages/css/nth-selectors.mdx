# CSS: Псевдоклассы :nth-child и :nth-of-type


![Иллюстрация к уроку](/lessons/css-nth-selectors.png)
В этом уроке мы рассмотрим мощные псевдоклассы CSS, которые позволяют более точно стилизовать элементы на веб-странице, основываясь на их позиции в дереве DOM.  Речь пойдет о `:nth-child` и `:nth-of-type`.

## Что такое псевдоклассы :nth-child и :nth-of-type?

Псевдоклассы `:nth-child` и `:nth-of-type` позволяют выбирать элементы на основе их порядкового номера среди дочерних элементов родительского элемента.  Однако, между ними есть важное различие: `:nth-child` выбирает элементы вне зависимости от их типа, а `:nth-of-type` выбирает элементы только определенного типа.

### :nth-child

Псевдокласс `:nth-child(n)` выбирает каждый n-ый дочерний элемент родительского элемента, независимо от его типа.  `n` может быть числом, ключевым словом (`even`, `odd`) или формулой (например, `2n+1`).

```html
<div class="container">
  <p>Первый параграф</p>
  <div>Первый div</div>
  <p>Второй параграф</p>
  <p>Третий параграф</p>
  <div>Второй div</div>
</div>
```

```css
.container p:nth-child(2) { /* Ничего не выберет, т.к. второй элемент - div */
  color: red;
}

.container *:nth-child(2) { /* Выберет первый div */
  background-color: yellow;
}

.container p:nth-child(3) { /* Выберет второй параграф */
  font-weight: bold;
}

.container p:nth-child(odd) { /* Выберет первый и третий параграфы */
  font-style: italic;
}

.container p:nth-child(even) { /* Выберет второй параграф */
  text-decoration: underline;
}
```

### :nth-of-type

Псевдокласс `:nth-of-type(n)` выбирает каждый n-ый дочерний элемент указанного типа родительского элемента.  `n` также может быть числом, ключевым словом (`even`, `odd`) или формулой.

```html
<div class="container">
  <p>Первый параграф</p>
  <div>Первый div</div>
  <p>Второй параграф</p>
  <p>Третий параграф</p>
  <div>Второй div</div>
</div>
```

```css
.container p:nth-of-type(1) { /* Выберет первый параграф */
  color: blue;
}

.container div:nth-of-type(2) { /* Выберет второй div */
  background-color: green;
}

.container p:nth-of-type(odd) { /* Выберет первый и третий параграфы */
  font-size: 1.2em;
}

.container p:nth-of-type(even) { /* Выберет второй параграф */
  color: purple;
}
```

## Практические примеры кода

```html
<ul class="list">
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
  <li>Item 4</li>
  <li>Item 5</li>
</ul>
```

```css
.list li:nth-child(odd) { /* Стилизуем нечетные элементы списка */
  background-color: #f2f2f2;
}

.list li:nth-child(even) { /* Стилизуем четные элементы списка */
  background-color: #ffffff;
}

.list li:nth-of-type(3n+1) { /* Стилизуем каждый 3n+1 элемент списка */
  font-weight: bold;
}
```

## Жизненный пример

Эти псевдоклассы широко используются для стилизации таблиц, списков и других элементов, где необходимо чередовать стили.  Например, многие библиотеки UI-компонентов (Bootstrap, Material UI) используют `:nth-child` или `:nth-of-type` для создания полосатых таблиц (zebra stripes), делая их более читабельными.  Также, их часто используют для стилизации элементов навигации, выделяя активный пункт меню или изменяя стиль при наведении курсора.  Различные веб-приложения и сайты электронной коммерции используют их для стилизации списков товаров или элементов интерфейса.

## Ключевые моменты

*   `:nth-child` выбирает элементы, основываясь на их позиции среди всех дочерних элементов родителя.
*   `:nth-of-type` выбирает элементы, основываясь на их позиции среди дочерних элементов *определенного* типа.
*   Оба псевдокласса принимают число, ключевое слово (`even`, `odd`) или формулу как аргумент.
*   Используются для чередования стилей, выделения элементов и создания более читабельных интерфейсов.
*   Широко применяются в UI-библиотеках и веб-приложениях.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>nth-child и nth-of-type</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Пример использования :nth-child и :nth-of-type</h1>

    <label for="selectorType">Выберите селектор:</label>
    <select id="selectorType">
      <option value="nth-child">:nth-child</option>
      <option value="nth-of-type">:nth-of-type</option>
    </select>

    <label for="nValue">Введите значение n (число, odd, even, формула):</label>
    <input type="text" id="nValue" value="odd">

    <button id="applySelector">Применить селектор</button>

    <ul class="list">
      <li>Item 1</li>
      <div>Div 1</div>
      <li>Item 2</li>
      <li>Item 3</li>
      <div>Div 2</div>
      <li>Item 4</li>
      <li>Item 5</li>
    </ul>
  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
}

.list {
  list-style: none;
  padding: 0;
}

.list li, .list div {
  padding: 10px;
  margin-bottom: 5px;
  background-color: #444;
  border-radius: 4px;
}

/* Изначальные стили для элементов списка */
.list li:nth-child(odd) {
  background-color: #555;
}

.list li:nth-child(even) {
  background-color: #666;
}

.list div:nth-of-type(1) {
  color: lightblue;
}

.list div:nth-of-type(2) {
  color: lightgreen;
}

/* Класс для выделения выбранных элементов */
.selected {
  background-color: orange !important;
  color: black;
  font-weight: bold;
}`,
    "/index.js": `document.addEventListener('DOMContentLoaded', () => {
  const selectorTypeSelect = document.getElementById('selectorType');
  const nValueInput = document.getElementById('nValue');
  const applySelectorButton = document.getElementById('applySelector');
  const list = document.querySelector('.list');

  applySelectorButton.addEventListener('click', () => {
    const selectorType = selectorTypeSelect.value;
    const nValue = nValueInput.value;

    // Удаляем предыдущие выделения
    const items = list.querySelectorAll('li, div');
    items.forEach(item => item.classList.remove('selected'));

    // Формируем селектор
    let selector = '';
    if (selectorType === 'nth-child') {
      selector = \`.list *:nth-child(\${'}nValue'}')\`;
    } else if (selectorType === 'nth-of-type') {
      selector = \`.list li:nth-of-type(\${'}nValue'}')\`; // Применяем только к li, чтобы div не сломался
    }

    // Выделяем элементы
    try {
      const selectedElements = list.querySelectorAll(selector);
      selectedElements.forEach(element => element.classList.add('selected'));
    } catch (error) {
      alert('Ошибка в селекторе: ' + error);
    }
  });
});`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
