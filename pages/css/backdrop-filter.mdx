## CSS: Стиль. Урок: backdrop-filter


![Иллюстрация к уроку](/lessons/css-backdrop-filter.png)
`backdrop-filter` – это мощное CSS-свойство, позволяющее применять графические эффекты к области *под* элементом. Это открывает двери для создания интересных визуальных эффектов, таких как размытие, затемнение или изменение цвета фона, видимого сквозь полупрозрачный элемент.

### Концепция `backdrop-filter`

Представьте себе лист стекла, расположенный перед фотографией. `backdrop-filter` позволяет вам применять фильтры (например, размытие) к фотографии, видимой *через* стекло. Главное отличие от обычного `filter` в том, что `filter` применяется к самому элементу, а `backdrop-filter` – к области под ним.

Синтаксис:

```css
backdrop-filter: <filter-function> [<filter-function> ...] | none
```

Здесь `<filter-function>` – это одна или несколько CSS-функций фильтра, таких как `blur()`, `brightness()`, `contrast()`, `grayscale()`, `hue-rotate()`, `invert()`, `opacity()`, `saturate()`, `sepia()`. Значение `none` отключает фильтр.

### Практические примеры кода

**Пример 1: Размытие фона**

```html
<div class="container">
  <div class="popup">Содержимое всплывающего окна</div>
</div>
```

```css
.container {
  position: relative;
  width: 300px;
  height: 200px;
  background-image: url('image.jpg'); /* Замените на URL вашей картинки */
  background-size: cover;
}

.popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
  background-color: rgba(255, 255, 255, 0.5); /* Полупрозрачный белый фон */
  backdrop-filter: blur(10px); /* Размываем фон под элементом */
  border-radius: 5px;
}
```

В этом примере мы создаем полупрозрачное всплывающее окно (`.popup`), которое размывает фоновое изображение (`.container`) под ним.

**Пример 2: Несколько фильтров**

```css
.popup {
  backdrop-filter: blur(5px) brightness(1.2); /* Размытие и увеличение яркости */
}
```

Здесь мы применяем сразу два фильтра: размытие и увеличение яркости.

**Пример 3: Отключение фильтра**

```css
.popup {
  backdrop-filter: none; /* Отключаем фильтр */
}
```

### Жизненный пример

`backdrop-filter` часто используется в современных веб-интерфейсах для создания эффектов размытия или затемнения фона за модальными окнами, навигационными панелями или другими элементами интерфейса.

*   **Операционные системы:** Многие операционные системы (macOS, Windows) используют подобные эффекты для меню и окон.
*   **Веб-сайты:** Сайты, использующие параллакс-эффект, могут использовать `backdrop-filter` для размытия фона под фиксированными элементами навигации.
*   **Приложения:** Мобильные приложения также часто применяют этот эффект для улучшения читаемости текста на фоне изображений.
*   **UI-фреймворки:** Некоторые UI-фреймворки и библиотеки компонентов предоставляют готовые компоненты с использованием `backdrop-filter`.

### Ключевые моменты

*   `backdrop-filter` применяется к области *под* элементом, а не к самому элементу.
*   Для видимости эффекта элемент должен быть полупрозрачным.
*   Можно использовать несколько фильтров одновременно.
*   Эффект может быть ресурсоемким, особенно при использовании сложных фильтров. Важно тестировать производительность на разных устройствах.
*   Поддержка браузерами: `backdrop-filter` поддерживается большинством современных браузеров, но стоит проверить совместимость для старых версий.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Backdrop Filter Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <img src="https://images.unsplash.com/photo-1604537580937-60700947db86?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80" alt="Landscape">
    <div class="popup">
      <h2>Настройка фильтра</h2>
      <label for="blur">Размытие:</label>
      <input type="range" id="blur" min="0" max="20" value="5">
      <span id="blurValue">5px</span>
      <br>
      <label for="brightness">Яркость:</label>
      <input type="range" id="brightness" min="0" max="200" value="100">
      <span id="brightnessValue">100%</span>
    </div>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  padding: 20px;
}

.container {
  position: relative;
  width: 500px;
  height: 300px;
  overflow: hidden;
  border-radius: 10px;
}

.container img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.popup {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
  background-color: rgba(34, 34, 34, 0.7);
  backdrop-filter: blur(5px) brightness(1);
  border-radius: 10px;
  text-align: center;
  width: 80%;
  max-width: 400px;
}

.popup label {
  display: block;
  margin-bottom: 5px;
}

.popup input[type="range"] {
  width: 100%;
}
`,
    "/index.js": `const blurInput = document.getElementById('blur');
const brightnessInput = document.getElementById('brightness');
const blurValue = document.getElementById('blurValue');
const brightnessValue = document.getElementById('brightnessValue');
const popup = document.querySelector('.popup');

blurInput.addEventListener('input', function() {
  const blurAmount = this.value;
  blurValue.textContent = blurAmount + 'px';
  updateBackdropFilter();
});

brightnessInput.addEventListener('input', function() {
  const brightnessAmount = this.value;
  brightnessValue.textContent = brightnessAmount + '%';
  updateBackdropFilter();
});

function updateBackdropFilter() {
  const blur = blurInput.value;
  const brightness = brightnessInput.value / 100; // Преобразуем в десятичную дробь
  popup.style.backdropFilter = \`blur(\${'}blur\${'}px) brightness(\${'}brightness\${'})\`;
}
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
