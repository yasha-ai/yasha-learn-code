![Animation Modes](/lessons/css-animation-modes.png)

## CSS: `animation-fill-mode` и `animation-direction`

В этом уроке мы рассмотрим свойства `animation-fill-mode` и `animation-direction`, которые позволяют контролировать поведение анимации до ее начала, после ее окончания и направление проигрывания. Они добавляют гибкости и позволяют создавать более сложные и интересные анимации.

### `animation-fill-mode`: Заполнение состояния анимации

Свойство `animation-fill-mode` определяет, какие стили применяются к элементу *до* начала анимации и *после* ее завершения.  Это особенно полезно, если вы хотите, чтобы элемент оставался в конечном состоянии анимации или возвращался в исходное состояние.

Возможные значения:

*   `none` (значение по умолчанию): Стили анимации не применяются ни до, ни после анимации. Элемент возвращается к своим исходным стилям.
*   `forwards`: Элемент сохраняет стили, определенные в *последнем* ключевом кадре (`100%`) после завершения анимации.
*   `backwards`: Элемент применяет стили, определенные в *первом* ключевом кадре (`0%`) до начала анимации.  Если `animation-delay` положительное, элемент будет отображаться в этом состоянии, пока не начнется анимация.
*   `both`:  Сочетает в себе поведение `forwards` и `backwards`. Элемент применяет стили из первого ключевого кадра до начала анимации и стили из последнего ключевого кадра после завершения анимации.

Пример:

```html
<!DOCTYPE html>
<html>
<head>
<title>animation-fill-mode Example</title>
<style>
.box {
  width: 100px;
  height: 100px;
  background-color: red;
  animation-name: move;
  animation-duration: 2s;
  animation-fill-mode: forwards; /* Сохраняет финальное состояние */
}

@keyframes move {
  from {
    margin-left: 0;
  }
  to {
    margin-left: 200px;
    background-color: blue;
  }
}
</style>
</head>
<body>
  <div class="box"></div>
</body>
</html>
```

В этом примере после завершения анимации красный квадрат переместится вправо и станет синим, и останется в этом состоянии.

### `animation-direction`: Направление анимации

Свойство `animation-direction` определяет, в каком направлении проигрывается анимация.

Возможные значения:

*   `normal` (значение по умолчанию): Анимация проигрывается от начала до конца.
*   `reverse`: Анимация проигрывается в обратном направлении, от конца к началу.
*   `alternate`: Анимация проигрывается вперед, затем назад, затем снова вперед, и так далее.
*   `alternate-reverse`: Анимация проигрывается назад, затем вперед, затем снова назад, и так далее.

Пример:

```html
<!DOCTYPE html>
<html>
<head>
<title>animation-direction Example</title>
<style>
.box {
  width: 100px;
  height: 100px;
  background-color: red;
  animation-name: move;
  animation-duration: 2s;
  animation-iteration-count: infinite; /* Бесконечное повторение */
  animation-direction: alternate; /* Чередование направления */
}

@keyframes move {
  from {
    margin-left: 0;
  }
  to {
    margin-left: 200px;
  }
}
</style>
</head>
<body>
  <div class="box"></div>
</body>
</html>
```

В этом примере красный квадрат будет двигаться вправо, затем влево, повторяясь бесконечно.

### Жизненный пример

`animation-fill-mode` часто используется для создания плавных переходов при наведении курсора на элементы.  Например, кнопка, меняющая цвет при наведении.  `animation-direction` широко используется в индикаторах загрузки, где элемент циклично двигается вперед и назад, показывая процесс загрузки.  В различных UI фреймворках (например, Material UI, Bootstrap) анимации с использованием этих свойств применяются для визуальной обратной связи при взаимодействии пользователя с элементами интерфейса.  Также, их можно встретить на сайтах-портфолио для создания интересных эффектов при прокрутке страницы.

### Ключевые моменты

*   `animation-fill-mode` управляет стилями до и после анимации.
*   `animation-direction` управляет направлением проигрывания анимации.
*   Комбинируя эти свойства, можно создавать сложные и интересные анимации.
*   `animation-fill-mode: forwards` часто используется, чтобы сохранить конечное состояние анимации.
*   `animation-direction: alternate` создает эффект "пинг-понга".

### Практика

<Playground 
  html={`<div class="modes-demo">
  <div class="section">
    <h3>animation-fill-mode</h3>
    <div class="fill-examples">
      <div class="example">
        <div class="box fill-none">none</div>
        <span>Возврат к исходному состоянию</span>
      </div>
      <div class="example">
        <div class="box fill-forwards">forwards</div>
        <span>Сохраняет финальное состояние</span>
      </div>
      <div class="example">
        <div class="box fill-backwards">backwards</div>
        <span>Применяет первый кадр до начала</span>
      </div>
      <div class="example">
        <div class="box fill-both">both</div>
        <span>Комбинация backwards + forwards</span>
      </div>
    </div>
  </div>
  
  <div class="section">
    <h3>animation-direction</h3>
    <div class="direction-examples">
      <div class="example">
        <div class="box dir-normal">normal</div>
        <span>Вперёд →</span>
      </div>
      <div class="example">
        <div class="box dir-reverse">reverse</div>
        <span>Назад ←</span>
      </div>
      <div class="example">
        <div class="box dir-alternate">alternate</div>
        <span>Туда-сюда ⇄</span>
      </div>
      <div class="example">
        <div class="box dir-alternate-reverse">alternate-reverse</div>
        <span>Сюда-туда ⇄</span>
      </div>
    </div>
  </div>
</div>`}
  css={`.modes-demo {
  padding: 20px;
  font-family: sans-serif;
}

.section {
  margin-bottom: 40px;
  background: #f5f5f5;
  padding: 20px;
  border-radius: 10px;
}

h3 {
  margin: 0 0 20px 0;
  color: #333;
}

.fill-examples, .direction-examples {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.example {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  background: white;
  padding: 15px;
  border-radius: 8px;
}

.box {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 8px;
}

span {
  font-size: 14px;
  color: #666;
  text-align: center;
}

/* Fill mode animations */
.fill-none {
  animation: slide 2s ease-in-out 0.5s;
  animation-fill-mode: none;
}

.fill-forwards {
  animation: slide 2s ease-in-out 0.5s;
  animation-fill-mode: forwards;
}

.fill-backwards {
  animation: slide 2s ease-in-out 0.5s;
  animation-fill-mode: backwards;
}

.fill-both {
  animation: slide 2s ease-in-out 0.5s;
  animation-fill-mode: both;
}

@keyframes slide {
  from {
    transform: translateX(0);
    background: #f093fb;
  }
  to {
    transform: translateX(100px);
    background: #f5576c;
  }
}

/* Direction animations */
.dir-normal {
  animation: move 2s linear infinite;
  animation-direction: normal;
}

.dir-reverse {
  animation: move 2s linear infinite;
  animation-direction: reverse;
}

.dir-alternate {
  animation: move 2s linear infinite;
  animation-direction: alternate;
}

.dir-alternate-reverse {
  animation: move 2s linear infinite;
  animation-direction: alternate-reverse;
}

@keyframes move {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(80px);
  }
}`}
  js={``}
/>
