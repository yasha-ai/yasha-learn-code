## CSS: Псевдоэлементы ::before, ::after, ::marker


![Иллюстрация к уроку](/lessons/css-pseudo-elements.png)
Псевдоэлементы позволяют стилизовать определенные части элемента, которые не существуют в HTML-структуре. Сегодня мы рассмотрим три полезных псевдоэлемента: `::before`, `::after` и `::marker`.

### Что такое псевдоэлементы?

Псевдоэлементы позволяют добавлять контент или стилизировать определенные части элемента без необходимости добавления дополнительных HTML-элементов. Они как бы "вставляют" контент до или после элемента, либо стилизуют определенные его части (например, маркеры списка).

### ::before и ::after

Псевдоэлементы `::before` и `::after` создают псевдоэлементы, которые становятся первым и последним дочерним элементом выбранного элемента соответственно.  Ключевое свойство, которое необходимо использовать с этими псевдоэлементами - `content`.

Пример:

```html
<div class="box">Текст</div>
```

```css
.box {
  position: relative; /* Важно для позиционирования псевдоэлементов */
  width: 200px;
  height: 100px;
  background-color: lightblue;
}

.box::before {
  content: "До: "; /* Обязательное свойство */
  position: absolute;
  top: 0;
  left: 0;
  background-color: lightgreen;
}

.box::after {
  content: " После"; /* Обязательное свойство */
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: lightcoral;
}
```

В этом примере мы добавили текст "До: " перед текстом внутри `div` с классом `box` и " После" после текста. Обратите внимание на свойство `content`, которое определяет, что будет отображаться в псевдоэлементе. Также важно установить `position: relative` для родительского элемента, чтобы псевдоэлементы можно было позиционировать абсолютно.

### ::marker

Псевдоэлемент `::marker` позволяет стилизовать маркеры элементов списка (`<ol>`, `<ul>`).

Пример:

```html
<ul>
  <li>Элемент 1</li>
  <li>Элемент 2</li>
  <li>Элемент 3</li>
</ul>
```

```css
ul {
  list-style-type: square; /* Задаем тип маркера для совместимости */
}

li::marker {
  color: red;
  font-size: 1.5em;
}
```

В этом примере мы изменили цвет и размер маркеров в списке.  Обратите внимание, что не все CSS-свойства применимы к `::marker`.  Обычно это свойства, связанные с текстом (цвет, шрифт, размер) и некоторые свойства фона.

### Жизненный пример

Многие современные сайты и фреймворки используют `::before` и `::after` для добавления декоративных элементов, таких как стрелки, тени, иконки, без добавления лишних HTML-элементов. Например, часто можно встретить использование `::before` и `::after` для создания стилизованных кнопок или элементов навигации.

Фреймворки, такие как Bootstrap и Materialize, активно используют псевдоэлементы для добавления декоративных элементов и эффектов к своим компонентам, обеспечивая более чистый HTML-код.  Например, стрелки выпадающих меню или индикаторы загрузки часто реализуются с использованием `::before` и `::after`.

Псевдоэлемент `::marker` может использоваться для стилизации нумерованных и ненумерованных списков, чтобы они соответствовали общему стилю сайта.

### Ключевые моменты

*   `::before` и `::after` требуют обязательного свойства `content`.
*   Для позиционирования `::before` и `::after` часто требуется установить `position: relative` для родительского элемента.
*   `::marker` позволяет стилизовать маркеры списков.
*   Псевдоэлементы помогают поддерживать чистоту HTML-кода, перенося стилизацию в CSS.
*   Не все CSS-свойства работают с каждым псевдоэлементом.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Псевдоэлементы</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Псевдоэлементы ::before, ::after, ::marker</h1>

    <div class="box">Текст</div>

    <ul id="myList">
      <li>Элемент 1</li>
      <li>Элемент 2</li>
      <li>Элемент 3</li>
    </ul>

    <button id="changeMarkerColor">Изменить цвет маркера</button>
    <input type="color" id="colorPicker" value="#ff0000">
  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

.box {
  position: relative; /* Важно для позиционирования псевдоэлементов */
  width: 200px;
  height: 100px;
  background-color: lightblue;
  margin-bottom: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.box::before {
  content: "До: "; /* Обязательное свойство */
  position: absolute;
  top: 0;
  left: 0;
  background-color: lightgreen;
  padding: 5px;
}

.box::after {
  content: " После"; /* Обязательное свойство */
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: lightcoral;
  padding: 5px;
}

ul {
  list-style-type: square; /* Задаем тип маркера для совместимости */
  margin-bottom: 20px;
}

li::marker {
  color: red;
  font-size: 1.5em;
}
`,
    "/index.js": `document.addEventListener('DOMContentLoaded', () => {
  const changeMarkerColorButton = document.getElementById('changeMarkerColor');
  const colorPicker = document.getElementById('colorPicker');
  const list = document.getElementById('myList');

  changeMarkerColorButton.addEventListener('click', () => {
    // Получаем выбранный цвет из color picker
    const selectedColor = colorPicker.value;

    // Обновляем цвет маркера для каждого элемента списка
    const listItems = list.querySelectorAll('li');
    listItems.forEach(item => {
      item.style.setProperty('--marker-color', selectedColor); // Используем CSS переменные
    });

    // Добавляем стили в head, чтобы переопределить стили ::marker (не работает напрямую через js)
    let style = document.getElementById('marker-style');
    if (!style) {
      style = document.createElement('style');
      style.id = 'marker-style';
      document.head.appendChild(style);
    }
    style.innerHTML = \`li::marker { color: \${'}selectedColor\${'}'}; \`;
  });
});`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
