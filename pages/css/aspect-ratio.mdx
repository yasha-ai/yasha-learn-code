## CSS: aspect-ratio - Сохраняем пропорции ваших элементов


![Иллюстрация к уроку](/lessons/css-aspect-ratio.png)
В этом уроке мы познакомимся с CSS свойством `aspect-ratio`, которое позволяет контролировать соотношение сторон элементов, обеспечивая их адаптивность и визуальную консистентность. Это особенно полезно при работе с изображениями, видео и другими медиа-элементами.

### Что такое aspect-ratio?

`aspect-ratio` определяет соотношение ширины к высоте элемента. Это означает, что браузер будет автоматически регулировать высоту элемента, чтобы сохранить заданное соотношение при изменении ширины (или наоборот, регулировать ширину при изменении высоты, если высота задана явно). Значение задается в виде дроби `ширина / высота` (например, `16 / 9` или `4 / 3`).

**Пример:**

```html
<div class="aspect-ratio-box">
  Содержимое блока
</div>
```

```css
.aspect-ratio-box {
  width: 300px; /* Задаем ширину */
  aspect-ratio: 16 / 9; /* Устанавливаем соотношение сторон 16:9 */
  background-color: lightblue;
}
```

В этом примере блок `.aspect-ratio-box` будет иметь ширину 300 пикселей, а его высота будет автоматически рассчитана, чтобы сохранить соотношение сторон 16:9.

### Практические примеры

**1. Сохранение пропорций изображения:**

```html
<img src="image.jpg" class="responsive-image">
```

```css
.responsive-image {
  width: 100%; /* Изображение занимает всю доступную ширину */
  aspect-ratio: 16 / 9; /* Сохраняем пропорции 16:9 */
  object-fit: cover; /* Обрезаем изображение, чтобы заполнить контейнер */
}
```

Здесь мы устанавливаем ширину изображения на 100% от родительского контейнера и задаем `aspect-ratio` 16:9. Свойство `object-fit: cover` гарантирует, что изображение заполнит контейнер, даже если его исходное соотношение сторон отличается.

**2. Создание адаптивного видео-плеера:**

```html
<video src="video.mp4" controls class="responsive-video"></video>
```

```css
.responsive-video {
  width: 100%;
  aspect-ratio: 16 / 9;
}
```

Аналогично изображению, мы можем применить `aspect-ratio` к видео, чтобы оно всегда отображалось с правильными пропорциями, независимо от размера экрана.

**3. Использование `aspect-ratio` с `min-width` и `max-width`:**

```html
<div class="aspect-ratio-container">
  Содержимое
</div>
```

```css
.aspect-ratio-container {
  min-width: 200px;
  max-width: 600px;
  aspect-ratio: 1 / 1; /* Квадрат */
  background-color: lightgreen;
}
```

В этом примере контейнер будет квадратным, но его ширина будет ограничена минимальным и максимальным значениями.

### Жизненный пример

`aspect-ratio` широко используется в современных веб-фреймворках и библиотеках UI. Например:

*   **React/Vue компоненты для изображений и видео:** Многие библиотеки предлагают компоненты, которые автоматически управляют соотношением сторон изображений и видео, используя `aspect-ratio` для обеспечения адаптивности.
*   **CSS-in-JS решения:** Стилизованные компоненты часто используют `aspect-ratio` для создания консистентных UI элементов с заданными пропорциями.
*   **Галереи изображений:** Сайты с галереями часто используют `aspect-ratio`, чтобы все превью изображений имели одинаковую высоту, независимо от их исходных размеров.

### Ключевые моменты

*   `aspect-ratio` позволяет задать соотношение сторон элемента.
*   Значение задается в виде дроби `ширина / высота`.
*   Полезно для адаптивных изображений, видео и других медиа-элементов.
*   `object-fit` может использоваться для управления тем, как изображение заполняет контейнер.
*   Широко используется в современных веб-фреймворках и библиотеках.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>aspect-ratio Demo</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>aspect-ratio Demo</h1>

    <div class="aspect-ratio-box">
      Содержимое блока с aspect-ratio: 16/9
    </div>

    <img id="myImage" src="https://via.placeholder.com/640x360" alt="Placeholder Image" class="responsive-image">

    <div class="controls">
      <label for="ratioWidth">Ширина:</label>
      <input type="number" id="ratioWidth" value="16">
      <label for="ratioHeight">Высота:</label>
      <input type="number" id="ratioHeight" value="9">
      <button id="updateRatio">Обновить aspect-ratio</button>
    </div>
  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

.aspect-ratio-box {
  width: 300px; /* Задаем ширину */
  aspect-ratio: 16 / 9; /* Устанавливаем соотношение сторон 16:9 */
  background-color: #444;
  color: #eee;
  padding: 10px;
  margin-bottom: 20px;
}

.responsive-image {
  width: 100%; /* Изображение занимает всю доступную ширину */
  aspect-ratio: 16 / 9; /* Сохраняем пропорции 16:9 */
  object-fit: cover; /* Обрезаем изображение, чтобы заполнить контейнер */
  margin-bottom: 20px;
}

.controls {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 20px;
}

.controls label {
  color: #eee;
}

.controls input[type="number"] {
  width: 50px;
  padding: 5px;
  background-color: #333;
  color: #eee;
  border: none;
}

.controls button {
  padding: 5px 10px;
  background-color: #007bff;
  color: #fff;
  border: none;
  cursor: pointer;
}
`,
    "/index.js": `// Получаем элементы управления
const ratioWidthInput = document.getElementById('ratioWidth');
const ratioHeightInput = document.getElementById('ratioHeight');
const updateRatioButton = document.getElementById('updateRatio');
const myImage = document.getElementById('myImage');

// Функция для обновления aspect-ratio
function updateAspectRatio() {
  const width = ratioWidthInput.value;
  const height = ratioHeightInput.value;

  // Проверяем, что введены корректные значения
  if (width > 0 && height > 0) {
    myImage.style.aspectRatio = \`\${width} / \${height}\`; // Обновляем aspect-ratio изображения
  } else {
    alert('Пожалуйста, введите положительные значения для ширины и высоты.');
  }
}

// Добавляем обработчик события на кнопку
updateRatioButton.addEventListener('click', updateAspectRatio);
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
