## CSS: minmax(), auto-fit, auto-fill - Создаем адаптивные сетки


![Иллюстрация к уроку](/lessons/css-minmax-auto.png)
В этом уроке мы изучим мощные инструменты CSS Grid Layout: функции `minmax()`, а также ключевые слова `auto-fit` и `auto-fill`. Они позволяют создавать гибкие и адаптивные сетки, автоматически подстраивающиеся под размеры экрана и контента.

### Функция minmax()

Функция `minmax()` определяет диапазон размеров для столбца или строки в CSS Grid. Она принимает два аргумента: минимальный и максимальный размер.  Синтаксис: `minmax(min, max)`.

```css
.grid-container {
  display: grid;
  grid-template-columns: minmax(100px, 300px) 1fr; /* Первый столбец от 100px до 300px, второй занимает оставшееся пространство */
}
```

В этом примере первый столбец будет занимать от 100px (минимальный размер) до 300px (максимальный размер).  Если контент требует больше места, чем 300px, столбец не будет расширяться. Второй столбец использует `1fr` и займет все оставшееся свободное пространство.

### Ключевые слова auto-fit и auto-fill

`auto-fit` и `auto-fill` используются с функцией `repeat()` для автоматического создания столбцов или строк в CSS Grid. Они работают схожим образом, но с одним важным отличием:

*   **auto-fit:** Сжимает пустые столбцы/строки до минимального размера (обычно 0), если в них нет контента.
*   **auto-fill:** Всегда создает указанное количество столбцов/строк, даже если они пустые.

```css
.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Создает столбцы, каждый от 200px, занимающие всю ширину. Пустые столбцы сжимаются */
}

.grid-container-fill {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* Создает столбцы, каждый от 200px, занимающие всю ширину. Пустые столбцы сохраняют ширину */
}
```

В примере с `auto-fit`, если в сетке недостаточно контента, чтобы заполнить все столбцы, пустые столбцы будут сжаты. В примере с `auto-fill`, даже если контента недостаточно, столбцы будут созданы и займут место, но будут пустыми. `1fr` означает, что столбцы будут равномерно распределять доступное пространство.

### Практический пример

```html
<!DOCTYPE html>
<html>
<head>
<title>auto-fit/auto-fill пример</title>
<style>
.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  grid-gap: 10px;
  background-color: #2196F3;
  padding: 10px;
}

.grid-container > div {
  background-color: rgba(255, 255, 255, 0.8);
  text-align: center;
  padding: 20px 0;
  font-size: 30px;
}
</style>
</head>
<body>

<h1>auto-fit пример</h1>

<div class="grid-container">
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
</div>

</body>
</html>
```

В этом примере, `auto-fit` создает столько столбцов, сколько поместится в контейнер, при этом каждый столбец имеет минимальную ширину 200px. Если ширина экрана уменьшается, количество столбцов автоматически уменьшается, чтобы контент не переполнялся.

### Жизненный пример

Многие современные веб-сайты и фреймворки используют `minmax()`, `auto-fit` и `auto-fill` для создания адаптивных макетов. Например, Bootstrap и Materialize CSS активно используют эти техники для создания гибких сеток.  Интернет-магазины, блоги и новостные порталы часто применяют их для отображения товаров, статей или новостей в удобном формате, который хорошо выглядит на разных устройствах.

Представьте сетку товаров на сайте интернет-магазина. Используя `auto-fit` и `minmax()`, можно гарантировать, что товары будут отображаться в несколько столбцов на больших экранах и в один столбец на мобильных устройствах, без необходимости написания сложных медиа-запросов.

### Ключевые моменты

*   `minmax(min, max)` позволяет задать минимальный и максимальный размер для столбца или строки.
*   `auto-fit` сжимает пустые столбцы/строки до минимального размера.
*   `auto-fill` создает столбцы/строки, даже если они пустые.
*   Используйте `auto-fit` и `auto-fill` с `repeat()` для создания адаптивных сеток.
*   Эти инструменты значительно упрощают создание адаптивных макетов без сложных медиа-запросов.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>minmax(), auto-fit, auto-fill</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Адаптивные сетки с minmax(), auto-fit, auto-fill</h1>

    <section class="controls">
      <label for="item-count">Количество элементов:</label>
      <input type="number" id="item-count" value="5" min="1">

      <label for="grid-type">Тип сетки:</label>
      <select id="grid-type">
        <option value="auto-fit">auto-fit</option>
        <option value="auto-fill">auto-fill</option>
      </select>
    </section>

    <div class="grid-container" id="grid">
      <!-- Элементы сетки будут добавлены сюда через JavaScript -->
    </div>
  </div>

  <script src="/index.js"></script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

.controls {
  display: flex;
  flex-direction: column;
  margin-bottom: 20px;
}

.controls label {
  margin-bottom: 5px;
}

.controls input, .controls select {
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #555;
  background-color: #333;
  color: #eee;
}

.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Начальное значение, будет изменено JS */
  grid-gap: 10px;
  background-color: #333;
  padding: 10px;
}

.grid-item {
  background-color: #444;
  text-align: center;
  padding: 20px;
  font-size: 20px;
  color: #eee;
  border-radius: 5px;
}
`,
    "/index.js": `document.addEventListener('DOMContentLoaded', () => {
  const itemCountInput = document.getElementById('item-count');
  const gridTypeSelect = document.getElementById('grid-type');
  const gridContainer = document.getElementById('grid');

  function updateGrid() {
    const itemCount = parseInt(itemCountInput.value);
    const gridType = gridTypeSelect.value;

    // Очищаем текущую сетку
    gridContainer.innerHTML = '';

    // Создаем элементы сетки
    for (let i = 1; i <= itemCount; i++) {
      const gridItem = document.createElement('div');
      gridItem.classList.add('grid-item');
      gridItem.textContent = i;
      gridContainer.appendChild(gridItem);
    }

    // Обновляем grid-template-columns в зависимости от выбранного типа сетки
    gridContainer.style.gridTemplateColumns = \`repeat(\${'}gridType'}, minmax(200px, 1fr))\`;
  }

  // Обрабатываем изменения в количестве элементов
  itemCountInput.addEventListener('input', updateGrid);

  // Обрабатываем изменения в типе сетки
  gridTypeSelect.addEventListener('change', updateGrid);

  // Инициализируем сетку при загрузке страницы
  updateGrid();
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
