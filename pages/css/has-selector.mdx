# CSS: Стиль - Урок ":has() — родительский селектор"

В этом уроке мы изучим мощный CSS селектор `:has()`, который позволяет стилизовать родительские элементы на основе наличия определенных дочерних элементов. Долгожданный родительский селектор открывает новые возможности для динамической стилизации веб-страниц.

## Что такое :has()?

`:has()` – это псевдокласс CSS, который позволяет выбрать элемент на основе того, содержит ли он внутри себя определенный элемент, соответствующий переданному в скобках селектору.  Другими словами, мы можем стилизовать *родителя*, если у него есть определенный *ребенок*.

## Примеры кода

Предположим, у нас есть следующая HTML структура:

```html
<div class="container">
  <p>Текст внутри контейнера.</p>
</div>

<div class="container">
  <p>Текст внутри контейнера.</p>
  <button>Кнопка</button>
</div>
```

Мы можем стилизовать контейнер, только если он содержит кнопку, используя `:has()`:

```css
.container:has(button) {
  border: 2px solid blue;
  background-color: lightblue;
}
```

В результате, только второй `div` с классом `container` будет иметь синюю рамку и светло-голубой фон, потому что только он содержит элемент `<button>`.

Другой пример: стилизация `li`, если внутри есть ссылка с классом `active`:

```html
<ul>
  <li>Текст</li>
  <li><a href="#">Ссылка</a></li>
  <li><a href="#" class="active">Активная ссылка</a></li>
</ul>
```

```css
li:has(a.active) {
  font-weight: bold;
}
```

В этом случае, только третий `li` станет жирным, так как только внутри него находится ссылка с классом `active`.

## Практические примеры кода с комментариями

```html
<div class="card">
  <img src="image1.jpg" alt="Изображение">
  <div class="card-body">
    <h3>Заголовок карточки</h3>
    <p>Описание карточки.</p>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <h3>Заголовок карточки</h3>
    <p>Описание карточки.</p>
  </div>
</div>
```

```css
.card {
  border: 1px solid #ccc;
  padding: 10px;
  margin-bottom: 10px;
}

/* Стилизуем карточку, только если она содержит изображение */
.card:has(img) {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Стилизуем заголовок карточки, только если у родителя есть изображение */
.card:has(img) .card-body h3 {
  color: green;
}
```

## Жизненный пример

`:has()` часто используется для создания адаптивных интерфейсов. Например, можно изменить макет карточки в зависимости от наличия определенных элементов. Во фреймворках UI, таких как Bootstrap или Material UI, `:has()` может использоваться для динамической стилизации компонентов. Например, в системе форм можно визуально выделять поля, если они содержат ошибки (элементы с классом `error`).

```html
<form>
  <input type="text" placeholder="Имя">
  <span class="error">Обязательное поле</span>
</form>

<form>
  <input type="text" placeholder="Email">
</form>
```

```css
form:has(.error) input {
  border: 1px solid red;
}
```

В этом примере, первое поле `input` получит красную границу, так как его родительский `form` содержит элемент с классом `error`.

## Ключевые моменты

*   `:has()` позволяет стилизовать родительские элементы на основе наличия дочерних элементов.
*   Это мощный инструмент для создания динамических и адаптивных интерфейсов.
*   Поддержка `:has()` в браузерах постоянно улучшается, поэтому важно проверять совместимость.
*   Можно использовать сложные селекторы внутри `:has()` для более точного таргетинга.
*   `:has()` делает CSS более выразительным и уменьшает необходимость в JavaScript для простых задач стилизации.

### Практика

Попробуйте примеры в интерактивном редакторе:

<Playground 
  template="html"
  height={500}
  files={{
    '/index.html': `<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }

    .card {
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      transition: all 0.3s;
    }

    /* Стилизуем карточку, если она содержит изображение */
    .card:has(img) {
      display: flex;
      gap: 20px;
      align-items: center;
      background: linear-gradient(to right, #f3f4f6, white);
    }

    /* Стилизуем карточку, если есть элемент с классом .error */
    .card:has(.error) {
      border-color: #ef4444;
      background-color: #fef2f2;
    }

    /* Стилизуем карточку при наведении, только если есть кнопка */
    .card:has(button):hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .card img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
    }

    .card h3 {
      margin-top: 0;
      color: #1f2937;
    }

    .card p {
      color: #6b7280;
    }

    .error {
      color: #ef4444;
      font-size: 14px;
    }

    button {
      background-color: #3b82f6;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background-color: #2563eb;
    }
  </style>
</head>
<body>
  <h1>:has() Selector Demo</h1>
  <p>Родительский селектор позволяет стилизовать элементы на основе их содержимого</p>

  <div class="card">
    <div>
      <h3>Обычная карточка</h3>
      <p>Эта карточка не имеет особых элементов внутри.</p>
    </div>
  </div>

  <div class="card">
    <img src="https://picsum.photos/100/100?random=1" alt="Изображение">
    <div>
      <h3>Карточка с изображением</h3>
      <p>Эта карточка содержит изображение, поэтому применяется flexbox.</p>
    </div>
  </div>

  <div class="card">
    <div>
      <h3>Карточка с кнопкой</h3>
      <p>Наведите на эту карточку - она поднимется!</p>
      <button>Действие</button>
    </div>
  </div>

  <div class="card">
    <div>
      <h3>Карточка с ошибкой</h3>
      <p>Эта карточка содержит элемент ошибки.</p>
      <span class="error">❌ Обязательное поле не заполнено</span>
    </div>
  </div>

  <div style="margin-top: 30px; padding: 15px; background: #f3f4f6; border-radius: 8px;">
    <strong>Попробуйте:</strong>
    <ul>
      <li>Добавьте новый стиль для карточек с input</li>
      <li>Измените эффект наведения</li>
      <li>Добавьте комбинированные селекторы :has(img):has(button)</li>
    </ul>
  </div>
</body>
</html>`
  }}
/>
