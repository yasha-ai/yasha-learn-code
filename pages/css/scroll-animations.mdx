## CSS: Scroll-driven animations

Scroll-driven animations позволяют создавать интерактивные анимации, которые реагируют на прокрутку страницы. Это отличный способ сделать ваш сайт более привлекательным и вовлекающим, добавляя динамичные элементы, которые изменяются по мере прокрутки пользователем контента.

### Что такое Scroll-driven animations?

Вместо того чтобы запускать анимацию по таймеру или при наступлении определенного события (например, наведении мыши), scroll-driven animations привязывают прогресс анимации к положению полосы прокрутки.  Другими словами, анимация "проигрывается" по мере того, как пользователь прокручивает страницу.

### Основы Scroll-driven animations

Для создания scroll-driven animations нам потребуются новые CSS свойства, которые позволяют связать анимации с scroll контейнером.  Основные свойства:

*   `scroll-timeline`: Определяет, какой контейнер прокрутки будет контролировать анимацию.
*   `animation-timeline`: Связывает анимацию с определенной scroll-timeline.
*   `view-timeline`: Запускает анимацию, когда элемент входит в область видимости.
*   `view-timeline-name`: Имя области видимости для связывания с анимацией.

Рассмотрим простой пример:

```html
<!DOCTYPE html>
<html>
<head>
  <title>Scroll-Driven Animation</title>
  <style>
    body {
      height: 200vh; /* Увеличиваем высоту body для создания скролла */
    }

    .animated-box {
      width: 100px;
      height: 100px;
      background-color: red;
      animation: move 5s linear forwards;
      animation-timeline: view(); /* Связываем анимацию с прокруткой viewport */
      animation-range: entry 25% cover 75%; /* Анимация стартует когда элемент входит в область видимости на 25% и заканчивается, когда он покрыт на 75% */
    }

    @keyframes move {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(500px);
      }
    }
  </style>
</head>
<body>
  <div class="animated-box"></div>
</body>
</html>
```

В этом примере:

*   `body` имеет высоту 200vh, чтобы создать возможность прокрутки.
*   `.animated-box`  - это элемент, который будет анимироваться.
*   `animation-timeline: view();` связывает анимацию `move` с областью видимости viewport.
*   `animation-range: entry 25% cover 75%;` задает диапазон прокрутки, в котором будет проигрываться анимация.  `entry 25%` означает, что анимация начинается, когда элемент входит в область видимости на 25%. `cover 75%` означает, что анимация заканчивается, когда элемент покрыт на 75%.

### Жизненный пример

Scroll-driven animations широко используются для создания параллакс-эффектов на сайтах, а также для анимирования элементов при их появлении в поле зрения пользователя. Многие современные веб-сайты и приложения используют эту технику для улучшения пользовательского опыта. Примеры:

*   **Сайты-портфолио:** Анимация фотографий, текста и других элементов при прокрутке страницы.
*   **Одностраничные сайты:** Плавный переход между секциями при прокрутке.
*   **Статьи и блоги:**  Анимация изображений и графиков по мере прочтения статьи.

Фреймворки, такие как GSAP (GreenSock Animation Platform), также предоставляют инструменты для создания scroll-driven animations, упрощая процесс и добавляя больше возможностей.

### Ключевые моменты

*   Scroll-driven animations связывают анимации с прокруткой страницы.
*   Используйте `scroll-timeline` и `animation-timeline` для контроля анимации.
*   `view-timeline` и `view-timeline-name` запускают анимации при входе элемента в область видимости.
*   `animation-range` определяет диапазон прокрутки, в котором будет проигрываться анимация.
*   Scroll-driven animations улучшают пользовательский опыт и делают сайты более интерактивными.

### Практика

Попробуйте примеры в интерактивном редакторе:

<Playground 
  html={`<div class="scroll-demo">
  <div class="header">
    <h2>Прокрути вниз ↓</h2>
    <p>Элементы анимируются при прокрутке</p>
  </div>
  
  <div class="scroll-section">
    <div class="reveal-box" data-reveal="1">
      <h3>Появление слева</h3>
      <p>Анимация при входе в область видимости</p>
    </div>
  </div>
  
  <div class="scroll-section">
    <div class="reveal-box" data-reveal="2">
      <h3>Появление справа</h3>
      <p>С небольшой задержкой</p>
    </div>
  </div>
  
  <div class="scroll-section">
    <div class="reveal-box" data-reveal="3">
      <h3>Появление снизу</h3>
      <p>Плавное движение вверх</p>
    </div>
  </div>
  
  <div class="scroll-section">
    <div class="scale-box">
      <h3>Масштабирование</h3>
      <p>Увеличение при прокрутке</p>
    </div>
  </div>
  
  <div class="scroll-section">
    <div class="rotate-box">
      <h3>Вращение</h3>
      <p>Поворот при прокрутке</p>
    </div>
  </div>
</div>`}
  css={`.scroll-demo {
  min-height: 100vh;
  font-family: sans-serif;
}

.header {
  text-align: center;
  padding: 40px 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  position: sticky;
  top: 0;
  z-index: 10;
}

.header h2 {
  margin: 0 0 10px 0;
}

.header p {
  margin: 0;
  opacity: 0.9;
}

.scroll-section {
  min-height: 400px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
}

.scroll-section:nth-child(even) {
  background: #f5f5f5;
}

.reveal-box, .scale-box, .rotate-box {
  background: white;
  padding: 40px;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  max-width: 400px;
  text-align: center;
  opacity: 0;
  transition: all 0.8s ease;
}

.reveal-box h3, .scale-box h3, .rotate-box h3 {
  margin: 0 0 15px 0;
  color: #333;
}

.reveal-box p, .scale-box p, .rotate-box p {
  margin: 0;
  color: #666;
}

/* Появление слева */
.reveal-box[data-reveal="1"] {
  transform: translateX(-100px);
}

.reveal-box[data-reveal="1"].visible {
  opacity: 1;
  transform: translateX(0);
}

/* Появление справа */
.reveal-box[data-reveal="2"] {
  transform: translateX(100px);
}

.reveal-box[data-reveal="2"].visible {
  opacity: 1;
  transform: translateX(0);
  transition-delay: 0.2s;
}

/* Появление снизу */
.reveal-box[data-reveal="3"] {
  transform: translateY(50px);
}

.reveal-box[data-reveal="3"].visible {
  opacity: 1;
  transform: translateY(0);
}

/* Масштабирование */
.scale-box {
  transform: scale(0.5);
}

.scale-box.visible {
  opacity: 1;
  transform: scale(1);
}

/* Вращение */
.rotate-box {
  transform: rotate(-180deg) scale(0.5);
}

.rotate-box.visible {
  opacity: 1;
  transform: rotate(0) scale(1);
}`}
  js={`// Intersection Observer для анимации при прокрутке
const observerOptions = {
  threshold: 0.2,
  rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, observerOptions);

// Наблюдаем за всеми элементами с анимацией
const animatedElements = document.querySelectorAll('.reveal-box, .scale-box, .rotate-box');
animatedElements.forEach(el => observer.observe(el));`}
/>
