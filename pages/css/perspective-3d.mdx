## CSS: Perspective и 3D-трансформации

В этом уроке мы окунемся в мир 3D-трансформаций в CSS. Мы изучим, как свойство `perspective` создает иллюзию глубины и как использовать 3D-трансформации для создания впечатляющих визуальных эффектов на ваших веб-страницах.

### Что такое Perspective?

`perspective` в CSS задает расстояние от пользователя до плоскости z=0. Представьте, что вы смотрите на объект в трехмерном пространстве. Чем дальше объект от вас, тем меньше он кажется. `perspective` имитирует этот эффект, создавая глубину на вашей веб-странице. Значение `perspective` определяет, насколько сильно будет выражен эффект перспективы. Чем меньше значение, тем сильнее перспектива (больше искажение).

Пример:

```html
<div class="container">
  <div class="box">Это коробка!</div>
</div>
```

```css
.container {
  width: 200px;
  height: 200px;
  perspective: 300px; /* Устанавливаем перспективу для контейнера */
}

.box {
  width: 100px;
  height: 100px;
  background-color: lightblue;
  transform: rotateX(45deg); /* Поворачиваем коробку по оси X */
}
```

В этом примере мы задали перспективу для контейнера `.container`.  Затем мы повернули дочерний элемент `.box` по оси X. Без `perspective` поворот выглядел бы как обычное 2D искажение.

### 3D-трансформации

CSS предоставляет ряд функций для 3D-трансформаций:

*   `rotateX(angle)`: Поворот вокруг оси X.
*   `rotateY(angle)`: Поворот вокруг оси Y.
*   `rotateZ(angle)`: Поворот вокруг оси Z (эквивалентно 2D-повороту).
*   `translateZ(length)`: Смещение вдоль оси Z.

Пример:

```css
.box {
  width: 100px;
  height: 100px;
  background-color: lightblue;
  transform: rotateX(45deg) rotateY(45deg) translateZ(50px); /* Комбинируем трансформации */
}
```

Здесь мы повернули коробку по осям X и Y и сместили ее вдоль оси Z.  Порядок трансформаций важен, поскольку он влияет на конечный результат.

### Свойство `transform-style`

Свойство `transform-style` определяет, как дочерние элементы трансформированного элемента отображаются в 3D-пространстве. Значение `preserve-3d` позволяет дочерним элементам участвовать в 3D-трансформации родителя.

Пример:

```html
<div class="container">
  <div class="parent">
    <div class="child">Ребенок</div>
  </div>
</div>
```

```css
.container {
  width: 200px;
  height: 200px;
  perspective: 500px;
}

.parent {
  width: 150px;
  height: 150px;
  background-color: lightgreen;
  transform: rotateX(60deg);
  transform-style: preserve-3d; /* Важно для 3D-трансформации дочерних элементов */
}

.child {
  width: 50px;
  height: 50px;
  background-color: orange;
  transform: translateY(50px) translateZ(50px);
}
```

Без `transform-style: preserve-3d`, дочерний элемент `.child` будет отображаться плоско, игнорируя 3D-трансформацию родителя.

### Жизненный пример

3D-трансформации и `perspective` широко используются для создания:

*   **Каруселей:**  Создание эффекта вращающейся карусели с элементами, расположенными в 3D-пространстве.
*   **Кнопок с эффектом нажатия:**  Небольшие 3D-эффекты для кнопок, имитирующие нажатие.
*   **Анимаций переходов:**  Более сложные переходы между страницами или элементами с использованием 3D-эффектов.
*   **3D-моделей и визуализаций:**  Отображение простых 3D-моделей или визуализаций данных непосредственно в браузере.

Многие CSS-фреймворки и библиотеки, такие как Bootstrap и Materialize, используют 3D-трансформации для создания визуально привлекательных компонентов и анимаций.

### Ключевые моменты

*   `perspective` создает иллюзию глубины, определяя расстояние от пользователя до плоскости z=0.
*   `rotateX`, `rotateY`, `rotateZ` используются для поворота элементов в 3D-пространстве.
*   `translateZ` смещает элементы вдоль оси Z.
*   `transform-style: preserve-3d` позволяет дочерним элементам участвовать в 3D-трансформации родителя.
*   Порядок трансформаций важен.
*   3D-трансформации можно комбинировать для создания сложных эффектов.

### Практика

Попробуйте примеры в интерактивном редакторе:

<Playground 
  html={`<div class="scene">
  <div class="container">
    <div class="cube">
      <div class="face front">Перед</div>
      <div class="face back">Зад</div>
      <div class="face right">Право</div>
      <div class="face left">Лево</div>
      <div class="face top">Верх</div>
      <div class="face bottom">Низ</div>
    </div>
  </div>
</div>
<div class="controls">
  <label>Перспектива: <input type="range" id="perspective" min="100" max="1000" value="600"></label>
  <label>Вращение X: <input type="range" id="rotateX" min="0" max="360" value="45"></label>
  <label>Вращение Y: <input type="range" id="rotateY" min="0" max="360" value="45"></label>
</div>`}
  css={`.scene {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 20px;
}

.container {
  width: 200px;
  height: 200px;
  perspective: 600px;
}

.cube {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transform: rotateX(45deg) rotateY(45deg);
  transition: transform 0.3s;
}

.face {
  position: absolute;
  width: 200px;
  height: 200px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  font-weight: bold;
  color: white;
  opacity: 0.9;
}

.front  { background: #3498db; transform: translateZ(100px); }
.back   { background: #e74c3c; transform: rotateY(180deg) translateZ(100px); }
.right  { background: #9b59b6; transform: rotateY(90deg) translateZ(100px); }
.left   { background: #2ecc71; transform: rotateY(-90deg) translateZ(100px); }
.top    { background: #f1c40f; transform: rotateX(90deg) translateZ(100px); }
.bottom { background: #95a5a6; transform: rotateX(-90deg) translateZ(100px); }

.controls {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px;
  background: #f5f5f5;
  border-radius: 8px;
}

label {
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: sans-serif;
}

input[type="range"] {
  flex: 1;
}`}
  js={`const container = document.querySelector('.container');
const cube = document.querySelector('.cube');
const perspectiveSlider = document.getElementById('perspective');
const rotateXSlider = document.getElementById('rotateX');
const rotateYSlider = document.getElementById('rotateY');

perspectiveSlider.addEventListener('input', (e) => {
  container.style.perspective = e.target.value + 'px';
});

rotateXSlider.addEventListener('input', (e) => {
  updateRotation();
});

rotateYSlider.addEventListener('input', (e) => {
  updateRotation();
});

function updateRotation() {
  const x = rotateXSlider.value;
  const y = rotateYSlider.value;
  cube.style.transform = \`rotateX(\${x}deg) rotateY(\${y}deg)\`;
}`}
/>
