## CSS: Perspective и 3D-трансформации


![Иллюстрация к уроку](/lessons/css-perspective-3d.png)
В этом уроке мы окунемся в мир 3D-трансформаций в CSS. Мы изучим, как свойство `perspective` создает иллюзию глубины и как использовать 3D-трансформации для создания впечатляющих визуальных эффектов на ваших веб-страницах.

### Что такое Perspective?

`perspective` в CSS задает расстояние от пользователя до плоскости z=0. Представьте, что вы смотрите на объект в трехмерном пространстве. Чем дальше объект от вас, тем меньше он кажется. `perspective` имитирует этот эффект, создавая глубину на вашей веб-странице. Значение `perspective` определяет, насколько сильно будет выражен эффект перспективы. Чем меньше значение, тем сильнее перспектива (больше искажение).

Пример:

```html
<div class="container">
  <div class="box">Это коробка!</div>
</div>
```

```css
.container {
  width: 200px;
  height: 200px;
  perspective: 300px; /* Устанавливаем перспективу для контейнера */
}

.box {
  width: 100px;
  height: 100px;
  background-color: lightblue;
  transform: rotateX(45deg); /* Поворачиваем коробку по оси X */
}
```

В этом примере мы задали перспективу для контейнера `.container`.  Затем мы повернули дочерний элемент `.box` по оси X. Без `perspective` поворот выглядел бы как обычное 2D искажение.

### 3D-трансформации

CSS предоставляет ряд функций для 3D-трансформаций:

*   `rotateX(angle)`: Поворот вокруг оси X.
*   `rotateY(angle)`: Поворот вокруг оси Y.
*   `rotateZ(angle)`: Поворот вокруг оси Z (эквивалентно 2D-повороту).
*   `translateZ(length)`: Смещение вдоль оси Z.

Пример:

```css
.box {
  width: 100px;
  height: 100px;
  background-color: lightblue;
  transform: rotateX(45deg) rotateY(45deg) translateZ(50px); /* Комбинируем трансформации */
}
```

Здесь мы повернули коробку по осям X и Y и сместили ее вдоль оси Z.  Порядок трансформаций важен, поскольку он влияет на конечный результат.

### Свойство `transform-style`

Свойство `transform-style` определяет, как дочерние элементы трансформированного элемента отображаются в 3D-пространстве. Значение `preserve-3d` позволяет дочерним элементам участвовать в 3D-трансформации родителя.

Пример:

```html
<div class="container">
  <div class="parent">
    <div class="child">Ребенок</div>
  </div>
</div>
```

```css
.container {
  width: 200px;
  height: 200px;
  perspective: 500px;
}

.parent {
  width: 150px;
  height: 150px;
  background-color: lightgreen;
  transform: rotateX(60deg);
  transform-style: preserve-3d; /* Важно для 3D-трансформации дочерних элементов */
}

.child {
  width: 50px;
  height: 50px;
  background-color: orange;
  transform: translateY(50px) translateZ(50px);
}
```

Без `transform-style: preserve-3d`, дочерний элемент `.child` будет отображаться плоско, игнорируя 3D-трансформацию родителя.

### Жизненный пример

3D-трансформации и `perspective` широко используются для создания:

*   **Каруселей:**  Создание эффекта вращающейся карусели с элементами, расположенными в 3D-пространстве.
*   **Кнопок с эффектом нажатия:**  Небольшие 3D-эффекты для кнопок, имитирующие нажатие.
*   **Анимаций переходов:**  Более сложные переходы между страницами или элементами с использованием 3D-эффектов.
*   **3D-моделей и визуализаций:**  Отображение простых 3D-моделей или визуализаций данных непосредственно в браузере.

Многие CSS-фреймворки и библиотеки, такие как Bootstrap и Materialize, используют 3D-трансформации для создания визуально привлекательных компонентов и анимаций.

### Ключевые моменты

*   `perspective` создает иллюзию глубины, определяя расстояние от пользователя до плоскости z=0.
*   `rotateX`, `rotateY`, `rotateZ` используются для поворота элементов в 3D-пространстве.
*   `translateZ` смещает элементы вдоль оси Z.
*   `transform-style: preserve-3d` позволяет дочерним элементам участвовать в 3D-трансформации родителя.
*   Порядок трансформаций важен.
*   3D-трансформации можно комбинировать для создания сложных эффектов.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Perspective Demo</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <div class="scene">
      <div class="cube">
        <div class="face front">1</div>
        <div class="face back">2</div>
        <div class="face right">3</div>
        <div class="face left">4</div>
        <div class="face top">5</div>
        <div class="face bottom">6</div>
      </div>
    </div>
  </div>

  <div class="controls">
    <label for="perspective">Перспектива:</label>
    <input type="range" id="perspective" min="100" max="1000" value="500">

    <label for="rotateX">Поворот X:</label>
    <input type="range" id="rotateX" min="-180" max="180" value="0">

    <label for="rotateY">Поворот Y:</label>
    <input type="range" id="rotateY" min="-180" max="180" value="0">
  </div>

  <script src="/index.js"></script>
</body>
</html>
`,
    "/styles.css": `body {
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  width: 300px;
  height: 300px;
  margin-bottom: 20px;
}

.scene {
  width: 100%;
  height: 100%;
  position: relative;
  perspective: 500px; /* Изначальная перспектива */
}

.cube {
  width: 100%;
  height: 100%;
  position: absolute;
  transform-style: preserve-3d;
  transition: transform 0.5s; /* Анимация вращения */
}

.face {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2em;
  color: white;
  background-color: rgba(0, 123, 255, 0.7);
  border: 2px solid #007bff;
}

.face.front  { transform: translateZ(150px); }
.face.back   { transform: rotateY(180deg) translateZ(150px); }
.face.right  { transform: rotateY(90deg) translateZ(150px); }
.face.left   { transform: rotateY(-90deg) translateZ(150px); }
.face.top    { transform: rotateX(90deg) translateZ(150px); }
.face.bottom { transform: rotateX(-90deg) translateZ(150px); }

.controls {
  display: flex;
  flex-direction: column;
  width: 300px;
}

.controls label {
  margin-top: 10px;
}
`,
    "/index.js": `const perspectiveInput = document.getElementById('perspective');
const rotateXInput = document.getElementById('rotateX');
const rotateYInput = document.getElementById('rotateY');
const cube = document.querySelector('.cube');
const scene = document.querySelector('.scene');

perspectiveInput.addEventListener('input', () => {
  scene.style.perspective = perspectiveInput.value + 'px';
});

rotateXInput.addEventListener('input', () => {
  updateCubeTransform();
});

rotateYInput.addEventListener('input', () => {
  updateCubeTransform();
});

function updateCubeTransform() {
  const rotateX = rotateXInput.value;
  const rotateY = rotateYInput.value;
  cube.style.transform = \`rotateX(\${rotateX}deg) rotateY(\${rotateY}deg)\`;
}
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
