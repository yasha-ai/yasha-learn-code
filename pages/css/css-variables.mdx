## CSS Переменные: Создаем гибкие и поддерживаемые стили


![Иллюстрация к уроку](/lessons/css-css-variables.png)
CSS переменные (или пользовательские свойства) позволяют определить значения, которые можно повторно использовать во всем вашем CSS коде. Это делает ваш код более организованным, читаемым и простым в обслуживании. В этом уроке мы разберемся, как их использовать.

### Что такое CSS переменные?

CSS переменные – это контейнеры для хранения значений, которые можно многократно использовать в вашем CSS. Они начинаются с двух дефисов (`--`) и могут быть определены на любом уровне CSS, включая `:root` (корневой элемент документа, обычно `<html>`).

```css
:root {
  --main-color: #4CAF50; /* Зеленый */
  --secondary-color: #2196F3; /* Синий */
  --font-size: 16px;
}
```

В этом примере мы объявили три переменные: `--main-color`, `--secondary-color` и `--font-size` внутри селектора `:root`. Это означает, что эти переменные доступны во всем документе.

### Использование CSS переменных

Чтобы использовать переменную, используйте функцию `var()`.

```css
body {
  font-size: var(--font-size);
  color: var(--main-color);
}

h1 {
  color: var(--secondary-color);
}
```

Теперь, если вы захотите изменить основной цвет на всем сайте, вам нужно будет изменить только значение переменной `--main-color` в `:root`, а не искать и заменять все экземпляры цвета в вашем CSS.

### Практические примеры

**Пример 1: Изменение темы сайта**

```css
:root {
  --bg-color: #FFFFFF;
  --text-color: #000000;
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
}

/* Темная тема */
.dark-theme {
  --bg-color: #333333;
  --text-color: #FFFFFF;
}
```

```html
<button onclick="document.body.classList.toggle('dark-theme')">Сменить тему</button>
```

В этом примере мы создали две переменные для фона и текста.  При клике на кнопку, добавляется или удаляется класс `.dark-theme` к элементу `body`, что изменяет значения переменных и, соответственно, тему сайта.

**Пример 2: Адаптивный дизайн**

```css
:root {
  --container-width: 90%;
}

.container {
  width: var(--container-width);
  margin: 0 auto;
}

@media (min-width: 768px) {
  :root {
    --container-width: 70%;
  }
}

@media (min-width: 1200px) {
  :root {
    --container-width: 1200px;
  }
}
```

Здесь мы используем медиа-запросы для изменения ширины контейнера в зависимости от размера экрана, просто изменяя значение переменной `--container-width`.

### Жизненный пример

Многие CSS фреймворки, такие как Bootstrap, Tailwind CSS и Materialize, активно используют CSS переменные. Они позволяют пользователям легко настраивать внешний вид компонентов, изменяя значения переменных, не переопределяя стили напрямую. Например, Bootstrap использует переменные для определения цветов, шрифтов, интервалов и других аспектов дизайна, что позволяет легко адаптировать фреймворк к конкретному проекту.  Также в современных веб-приложениях, где часто требуется динамическое изменение стилей, CSS переменные играют ключевую роль в управлении темами и визуальными настройками.

### Ключевые моменты

*   CSS переменные начинаются с `--`.
*   Определяются с помощью селектора, чаще всего `:root`.
*   Используются с помощью функции `var()`.
*   Позволяют повторно использовать значения в CSS.
*   Улучшают читаемость и поддерживаемость кода.
*   Могут быть переопределены в медиа-запросах или с помощью JavaScript.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Variables Demo</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>CSS Variables Demo</h1>
    <p>Измените значения переменных CSS ниже, чтобы увидеть изменения в реальном времени.</p>

    <div class="controls">
      <label for="bg-color">Background Color:</label>
      <input type="color" id="bg-color" value="#222" data-variable="bg-color">

      <label for="text-color">Text Color:</label>
      <input type="color" id="text-color" value="#eee" data-variable="text-color">

      <label for="font-size">Font Size:</label>
      <input type="range" id="font-size" min="12" max="24" value="16" data-variable="font-size">
      <span id="font-size-value">16px</span>
    </div>

    <div class="content">
      <h2>This is a Heading</h2>
      <p>This is a paragraph of text. The colors and font size are controlled by CSS variables.</p>
      <button id="theme-toggle">Toggle Theme</button>
    </div>
  </div>

  <script src="/index.js"></script>
</body>
</html>
`,
    "/styles.css": `:root {
  --bg-color: #222;
  --text-color: #eee;
  --font-size: 16px;
  --primary-color: #64ffda;
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: sans-serif;
  transition: background-color 0.3s, color 0.3s;
}

.container {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

h1, h2 {
  color: var(--primary-color);
}

p {
  font-size: var(--font-size);
  line-height: 1.6;
}

.controls {
  margin-bottom: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.controls label {
  color: var(--text-color);
}

.controls input[type="color"] {
  width: 100px;
  height: 30px;
  background-color: var(--bg-color);
  border: 1px solid var(--primary-color);
  cursor: pointer;
}

.controls input[type="range"] {
  width: 200px;
  cursor: pointer;
}

#theme-toggle {
  background-color: var(--primary-color);
  color: #222;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
  border-radius: 5px;
  transition: background-color 0.3s;
}

#theme-toggle:hover {
  background-color: #4caf50;
}

/* Dark Theme */
body.light-theme {
  --bg-color: #eee;
  --text-color: #222;
}
`,
    "/index.js": `// Получаем элементы управления
const bgColorInput = document.getElementById('bg-color');
const textColorInput = document.getElementById('text-color');
const fontSizeInput = document.getElementById('font-size');
const fontSizeValue = document.getElementById('font-size-value');
const themeToggle = document.getElementById('theme-toggle');
const root = document.documentElement; // :root

// Функция для установки значения CSS переменной
function setCSSVariable(variableName, value) {
  root.style.setProperty(\`--\${'}variableName\${'}\`, value);
}

// Обработчики событий для изменения переменных
bgColorInput.addEventListener('input', (event) => {
  setCSSVariable('bg-color', event.target.value);
});

textColorInput.addEventListener('input', (event) => {
  setCSSVariable('text-color', event.target.value);
});

fontSizeInput.addEventListener('input', (event) => {
  const fontSize = event.target.value + 'px';
  setCSSVariable('font-size', fontSize);
  fontSizeValue.textContent = fontSize;
});

themeToggle.addEventListener('click', () => {
  document.body.classList.toggle('light-theme');
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
