## JavaScript: Мозги. Урок: Наследование классов


![Иллюстрация к уроку](/lessons/javascript-class-inheritance.png)
В этом уроке мы разберем, как классы могут наследовать свойства и методы друг от друга, что позволяет создавать более организованный и повторно используемый код. Наследование – это один из ключевых принципов объектно-ориентированного программирования (ООП).

### Что такое наследование?

Наследование – это механизм, позволяющий одному классу (дочернему или подклассу) перенимать свойства и методы другого класса (родительского или суперкласса). Это как если бы ребенок унаследовал черты характера и таланты от своих родителей.

Представьте, что у нас есть класс `Animal` (животное) с общими свойствами для всех животных, такими как `name` (имя) и метод `eat()`. Затем мы можем создать класс `Dog`, который наследует от `Animal`, и добавляет специфические свойства и методы для собак, например, `bark()` (лаять).

```javascript
class Animal {
  constructor(name) {
    this.name = name;
  }

  eat() {
    console.log(`${this.name} ест.`);
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    // Вызываем конструктор родительского класса
    super(name);
    this.breed = breed;
  }

  bark() {
    console.log("Гав!");
  }
}

const myDog = new Dog("Бобик", "Дворняга");
myDog.eat(); // Выводит: Бобик ест.
myDog.bark(); // Выводит: Гав!
console.log(myDog.name); // Выводит: Бобик
console.log(myDog.breed); // Выводит: Дворняга
```

В этом примере `Dog` наследует метод `eat()` от `Animal` и имеет свой собственный метод `bark()`.  Ключевое слово `extends` указывает на то, что класс `Dog` наследует от `Animal`.  `super(name)` вызывает конструктор родительского класса `Animal` и передает ему имя.

### Практические примеры

Рассмотрим другой пример с геометрическими фигурами:

```javascript
class Shape {
  constructor(color) {
    this.color = color;
  }

  describe() {
    console.log(`Это фигура цвета ${this.color}.`);
  }
}

class Circle extends Shape {
  constructor(color, radius) {
    super(color);
    this.radius = radius;
  }

  calculateArea() {
    return Math.PI * this.radius * this.radius;
  }

  describe() {
    // Переопределяем метод describe() родительского класса
    super.describe(); // Вызываем метод describe() родительского класса
    console.log(`Это круг с радиусом ${this.radius}.`);
  }
}

const myCircle = new Circle("красный", 5);
myCircle.describe(); // Выводит: Это фигура цвета красный. Это круг с радиусом 5.
console.log(`Площадь круга: ${myCircle.calculateArea()}`); // Выводит: Площадь круга: 78.53981633974483
```

Здесь класс `Circle` наследует от `Shape` и добавляет свойство `radius` и метод `calculateArea()`.  Обратите внимание на переопределение метода `describe()`. Мы можем переопределить методы родительского класса в дочернем классе.  При этом, мы можем вызвать оригинальный метод родительского класса, используя `super.describe()`.

### Жизненный пример

Наследование широко используется в фреймворках и библиотеках JavaScript, таких как React, Angular и Vue.js. Например, в React компоненты часто создаются путем наследования от базового класса `React.Component`. Это позволяет переиспользовать логику и упрощает структуру приложения.

Представьте, что вы разрабатываете UI библиотеку. У вас есть базовый класс `Button`, от которого наследуются `PrimaryButton`, `SecondaryButton` и другие типы кнопок. Каждый подкласс может добавлять свою специфическую логику и стили, при этом переиспользуя общую логику из базового класса `Button`.

### Ключевые моменты

*   Наследование позволяет создавать иерархию классов.
*   Дочерний класс наследует свойства и методы родительского класса.
*   Ключевое слово `extends` используется для указания наследования.
*   `super()` используется для вызова конструктора родительского класса.
*   Методы родительского класса могут быть переопределены в дочернем классе.
*   Наследование способствует повторному использованию кода и упрощает его организацию.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Наследование классов в JavaScript</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Наследование классов</h1>
    <div id="animal-details">
      <h2>Информация о животном</h2>
      <p>Имя: <span id="animal-name"></span></p>
      <p>Тип: <span id="animal-type"></span></p>
      <p id="animal-sound-paragraph">Звук: <span id="animal-sound"></span></p>
    </div>

    <div class="controls">
      <label for="animal-name-input">Имя животного:</label>
      <input type="text" id="animal-name-input" value="Животное">

      <label for="animal-type-select">Тип животного:</label>
      <select id="animal-type-select">
        <option value="animal">Животное</option>
        <option value="dog">Собака</option>
        <option value="cat">Кошка</option>
      </select>

      <button id="update-animal">Обновить</button>
    </div>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

#animal-details {
  border: 1px solid #555;
  padding: 15px;
  margin-bottom: 20px;
  border-radius: 5px;
}

.controls {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

label {
  font-weight: bold;
}

input[type="text"],
select {
  padding: 8px;
  border: 1px solid #777;
  border-radius: 4px;
  background-color: #444;
  color: #eee;
}

button {
  padding: 10px 15px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.3s;
}

button:hover {
  background-color: #0056b3;
}
`,
    "/index.js": `// Базовый класс Animal
class Animal {
  constructor(name) {
    this.name = name;
    this.type = 'animal';
  }

  makeSound() {
    return "Звук животного";
  }
}

// Класс Dog, наследующий от Animal
class Dog extends Animal {
  constructor(name) {
    super(name); // Вызываем конструктор родительского класса
    this.type = 'dog';
  }

  makeSound() {
    return "Гав!";
  }
}

// Класс Cat, наследующий от Animal
class Cat extends Animal {
  constructor(name) {
    super(name); // Вызываем конструктор родительского класса
    this.type = 'cat';
  }

  makeSound() {
    return "Мяу!";
  }
}

// Получаем элементы DOM
const animalNameElement = document.getElementById('animal-name');
const animalTypeElement = document.getElementById('animal-type');
const animalSoundElement = document.getElementById('animal-sound');
const animalSoundParagraph = document.getElementById('animal-sound-paragraph');
const animalNameInput = document.getElementById('animal-name-input');
const animalTypeSelect = document.getElementById('animal-type-select');
const updateAnimalButton = document.getElementById('update-animal');

// Функция для обновления информации о животном
function updateAnimalInfo(animal) {
  animalNameElement.textContent = animal.name;
  animalTypeElement.textContent = animal.type;
  const sound = animal.makeSound();
  animalSoundElement.textContent = sound;
  animalSoundParagraph.style.display = sound === "Звук животного" ? 'none' : 'block';
}

// Создаем экземпляр Animal по умолчанию
let currentAnimal = new Animal(animalNameInput.value);
updateAnimalInfo(currentAnimal);

// Обработчик события для кнопки "Обновить"
updateAnimalButton.addEventListener('click', () => {
  const name = animalNameInput.value;
  const type = animalTypeSelect.value;

  switch (type) {
    case 'dog':
      currentAnimal = new Dog(name);
      break;
    case 'cat':
      currentAnimal = new Cat(name);
      break;
    default:
      currentAnimal = new Animal(name);
      break;
  }

  updateAnimalInfo(currentAnimal);
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
