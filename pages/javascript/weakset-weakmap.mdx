import { Sandpack } from '@codesandbox/sandpack-react'

## JavaScript: –ú–æ–∑–≥–∏. –£—Ä–æ–∫: WeakSet –∏ WeakMap

WeakSet –∏ WeakMap ‚Äì —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π –≤ JavaScript, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å DOM –∏ –¥—Ä—É–≥–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏. –û–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö Set –∏ Map —Ç–µ–º, —á—Ç–æ –Ω–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—é—Ç —Å–±–æ—Ä—â–∏–∫—É –º—É—Å–æ—Ä–∞ —É–¥–∞–ª—è—Ç—å –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —Å—Å—ã–ª–∞—é—Ç—Å—è.

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è WeakSet

WeakSet ‚Äì —ç—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ Set, WeakSet –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ WeakSet, –±–æ–ª—å—à–µ –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –º–æ–∂–µ—Ç –µ–≥–æ —É–¥–∞–ª–∏—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –≤—Å–µ –µ—â–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ WeakSet.  WeakSet –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä DOM-—ç–ª–µ–º–µ–Ω—Ç—ã, —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.

–ü—Ä–∏–º–µ—Ä:

```javascript
let weakSet = new WeakSet();

let obj1 = {};
let obj2 = {};

weakSet.add(obj1);
weakSet.add(obj2);

console.log(weakSet.has(obj1)); // true

obj1 = null; // obj1 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

// –í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ —É–¥–∞–ª–∏—Ç obj1 –∏–∑ WeakSet
// –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ weakSet.has(obj1) –≤–µ—Ä–Ω–µ—Ç false
```

–ú–µ—Ç–æ–¥—ã WeakSet:

*   `add(object)`: –î–æ–±–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç –≤ WeakSet.
*   `delete(object)`: –£–¥–∞–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç –∏–∑ WeakSet.
*   `has(object)`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –æ–±—ä–µ–∫—Ç –≤ WeakSet.

–í–∞–∂–Ω–æ: WeakSet –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é (–Ω–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤).

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è WeakMap

WeakMap ‚Äì —ç—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑—ã–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ö–∞–∫ –∏ WeakSet, WeakMap –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–ª—é—á–∏ (–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–∞–º–∏). –ï—Å–ª–∏ –∫–ª—é—á WeakMap –±–æ–ª—å—à–µ –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –º–æ–∂–µ—Ç –µ–≥–æ —É–¥–∞–ª–∏—Ç—å, –∞ –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º –∏ –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å —ç—Ç–∏–º –∫–ª—é—á–æ–º.  WeakMap —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

–ü—Ä–∏–º–µ—Ä:

```javascript
let weakMap = new WeakMap();

let obj1 = {};
let obj2 = {};

weakMap.set(obj1, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± obj1");
weakMap.set(obj2, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± obj2");

console.log(weakMap.get(obj1)); // "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± obj1"

obj1 = null; // obj1 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

// –í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ —É–¥–∞–ª–∏—Ç obj1 –∏–∑ WeakMap
// –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ weakMap.get(obj1) –≤–µ—Ä–Ω–µ—Ç undefined
```

–ú–µ—Ç–æ–¥—ã WeakMap:

*   `set(object, value)`: –°–≤—è–∑—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –∑–Ω–∞—á–µ–Ω–∏–µ–º.
*   `get(object)`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –æ–±—ä–µ–∫—Ç–æ–º.
*   `delete(object)`: –£–¥–∞–ª—è–µ—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–æ–º –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º.
*   `has(object)`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å–≤—è–∑—å –¥–ª—è –æ–±—ä–µ–∫—Ç–∞.

–í–∞–∂–Ω–æ: WeakMap –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é (–Ω–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π).

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä

```javascript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º WeakMap –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞

let weakMap = new WeakMap();

class User {
  constructor(name) {
    weakMap.set(this, { name: name, isAdmin: false }); // –•—Ä–∞–Ω–∏–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  }

  getName() {
    return weakMap.get(this).name; // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  }

  setAdmin() {
      weakMap.get(this).isAdmin = true;
  }

  isAdmin() {
    return weakMap.get(this).isAdmin;
  }
}

let user = new User("–ò–≤–∞–Ω");
console.log(user.getName()); // –ò–≤–∞–Ω
user.setAdmin();
console.log(user.isAdmin()); // true
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä

WeakSet –∏ WeakMap —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å DOM-—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏, –±–µ–∑ —Ä–∏—Å–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.  –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ.  –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WeakMap, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å –∫–∞–∂–¥—ã–π DOM-—ç–ª–µ–º–µ–Ω—Ç —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∫ –Ω–µ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω—ã. –ö–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ DOM, —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ —Å–º–æ–∂–µ—Ç –µ–≥–æ —É–¥–∞–ª–∏—Ç—å, –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã.  –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–≤–∏—Å—è—á–∏–µ" –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏.

### –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

*   WeakSet –∏ WeakMap —Ö—Ä–∞–Ω—è—Ç —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π (WeakSet) –∏–ª–∏ –∫–ª—é—á–µ–π –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π (WeakMap).
*   –û–Ω–∏ –Ω–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—é—Ç —Å–±–æ—Ä—â–∏–∫—É –º—É—Å–æ—Ä–∞ —É–¥–∞–ª—è—Ç—å –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —Å—Å—ã–ª–∞—é—Ç—Å—è.
*   –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é.
*   –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
*   –ü–æ–ª–µ–∑–Ω—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å DOM –∏ –¥—Ä—É–≥–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –Ω–µ –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.

### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Sandpack
  template="vanilla"
  files={{
    '/index.js': `index.js
// 1. WeakSet demo
const weakSet = new WeakSet();
let obj1 = { id: 1, name: 'Object 1' };
let obj2 = { id: 2, name: 'Object 2' };
let obj3 = { id: 3, name: 'Object 3' };

document.getElementById('wsAdd').addEventListener('click', () => {
  weakSet.add(obj1);
  weakSet.add(obj2);
  console.log('WeakSet: –¥–æ–±–∞–≤–ª–µ–Ω—ã obj1, obj2');
  console.log('weakSet.has(obj1):', weakSet.has(obj1));
  console.log('weakSet.has(obj2):', weakSet.has(obj2));
  console.log('weakSet.has(obj3):', weakSet.has(obj3));
  
  document.getElementById('wsOutput').innerHTML = \`
    <div>‚úÖ obj1 –≤ WeakSet: <strong>\${weakSet.has(obj1)}</strong></div>
    <div>‚úÖ obj2 –≤ WeakSet: <strong>\${weakSet.has(obj2)}</strong></div>
    <div>‚ùå obj3 –≤ WeakSet: <strong>\${weakSet.has(obj3)}</strong></div>
  \`;
});

document.getElementById('wsDelete').addEventListener('click', () => {
  weakSet.delete(obj1);
  console.log('WeakSet: —É–¥–∞–ª–µ–Ω obj1');
  console.log('weakSet.has(obj1):', weakSet.has(obj1));
  
  document.getElementById('wsOutput').innerHTML = \`
    <div>‚ùå obj1 —É–¥–∞–ª–µ–Ω: <strong>\${weakSet.has(obj1)}</strong></div>
    <div>‚úÖ obj2 –æ—Å—Ç–∞–ª—Å—è: <strong>\${weakSet.has(obj2)}</strong></div>
  \`;
});

document.getElementById('wsNull').addEventListener('click', () => {
  const hadObj2 = weakSet.has(obj2);
  obj2 = null; // –¢–µ–ø–µ—Ä—å obj2 –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞
  console.log('obj2 = null (–±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞)');
  
  document.getElementById('wsOutput').innerHTML = \`
    <div>‚ö†Ô∏è obj2 = null</div>
    <div>–î–æ –æ–±–Ω—É–ª–µ–Ω–∏—è: \${hadObj2}</div>
    <div style="color: #666; font-size: 14px;">
      –°–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –ø–æ–∑–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç obj2 –∏–∑ WeakSet
    </div>
  \`;
});

// 2. WeakMap demo
const weakMap = new WeakMap();
let user1 = { name: 'Alice' };
let user2 = { name: 'Bob' };

document.getElementById('wmSet').addEventListener('click', () => {
  weakMap.set(user1, { age: 25, role: 'admin' });
  weakMap.set(user2, { age: 30, role: 'user' });
  
  console.log('WeakMap: –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è user1 –∏ user2');
  console.log('user1 data:', weakMap.get(user1));
  console.log('user2 data:', weakMap.get(user2));
  
  document.getElementById('wmOutput').innerHTML = \`
    <div><strong>user1:</strong> \${JSON.stringify(weakMap.get(user1))}</div>
    <div><strong>user2:</strong> \${JSON.stringify(weakMap.get(user2))}</div>
  \`;
});

document.getElementById('wmGet').addEventListener('click', () => {
  const data = weakMap.get(user1);
  console.log('–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ user1:', data);
  
  document.getElementById('wmOutput').innerHTML = \`
    <div><strong>user1 data:</strong></div>
    <div>Age: \${data?.age || '–Ω–µ –∑–∞–¥–∞–Ω'}</div>
    <div>Role: \${data?.role || '–Ω–µ –∑–∞–¥–∞–Ω–∞'}</div>
  \`;
});

document.getElementById('wmUpdate').addEventListener('click', () => {
  const data = weakMap.get(user1);
  if (data) {
    data.age = 26;
    data.role = 'superadmin';
    console.log('–û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ user1:', data);
    
    document.getElementById('wmOutput').innerHTML = \`
      <div>‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!</div>
      <div><strong>user1:</strong> \${JSON.stringify(weakMap.get(user1))}</div>
    \`;
  }
});

// 3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
class User {
  constructor(name) {
    privateData.set(this, { 
      name: name, 
      isAdmin: false,
      secretKey: Math.random().toString(36).substr(2, 9)
    });
  }

  getName() {
    return privateData.get(this).name;
  }

  getSecretKey() {
    return privateData.get(this).secretKey;
  }

  setAdmin() {
    privateData.get(this).isAdmin = true;
  }

  isAdmin() {
    return privateData.get(this).isAdmin;
  }
}

const privateData = new WeakMap();

document.getElementById('createUser').addEventListener('click', () => {
  const name = document.getElementById('userName').value || 'Guest';
  const newUser = new User(name);
  
  console.log('=== NEW USER ===');
  console.log('Name:', newUser.getName());
  console.log('Secret Key:', newUser.getSecretKey());
  console.log('Is Admin:', newUser.isAdmin());
  
  document.getElementById('userOutput').innerHTML = \`
    <div><strong>–ò–º—è:</strong> \${newUser.getName()}</div>
    <div><strong>Secret Key:</strong> \${newUser.getSecretKey()}</div>
    <div><strong>Admin:</strong> \${newUser.isAdmin()}</div>
    <p style="color: #666; font-size: 12px;">
      –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ WeakMap –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é!
    </p>
  \`;
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫
  window.currentUser = newUser;
});

document.getElementById('makeAdmin').addEventListener('click', () => {
  if (window.currentUser) {
    window.currentUser.setAdmin();
    console.log('User —Å—Ç–∞–ª admin');
    
    document.getElementById('userOutput').innerHTML = \`
      <div><strong>–ò–º—è:</strong> \${window.currentUser.getName()}</div>
      <div><strong>Admin:</strong> \${window.currentUser.isAdmin()}</div>
      <div>‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä!</div>
    \`;
  }
});

// 4. DOM —ç–ª–µ–º–µ–Ω—Ç—ã + WeakMap
const elementData = new WeakMap();

document.getElementById('createElem').addEventListener('click', () => {
  const div = document.createElement('div');
  div.textContent = \`–≠–ª–µ–º–µ–Ω—Ç \${Date.now()}\`;
  div.style.padding = '10px';
  div.style.margin = '5px';
  div.style.background = '#4caf50';
  div.style.color = 'white';
  div.style.borderRadius = '5px';
  div.style.cursor = 'pointer';
  
  // –°–≤—è–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —ç–ª–µ–º–µ–Ω—Ç–æ–º
  elementData.set(div, {
    created: new Date().toLocaleTimeString(),
    clicks: 0
  });
  
  div.addEventListener('click', () => {
    const data = elementData.get(div);
    data.clicks++;
    div.textContent = \`–ö–ª–∏–∫–æ–≤: \${data.clicks} (—Å–æ–∑–¥–∞–Ω: \${data.created})\`;
    console.log('Element data:', elementData.get(div));
  });
  
  document.getElementById('domContainer').appendChild(div);
  console.log('–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ WeakMap');
});

document.getElementById('clearElems').addEventListener('click', () => {
  document.getElementById('domContainer').innerHTML = '';
  console.log('–≠–ª–µ–º–µ–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã. WeakMap –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç –ø–∞–º—è—Ç—å!');
  document.getElementById('domOutput').innerHTML = \`
    <div>‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã</div>
    <div style="color: #666; font-size: 12px;">
      WeakMap –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞
    </div>
  \`;
});
\`\`\`

\`\`\`html index.html
<!DOCTYPE html>
<html>
<head>
  <title>WeakSet & WeakMap</title>
  <style>
    .section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background: #f9f9f9;
    }
    button {
      padding: 8px 15px;
      margin: 5px;
      cursor: pointer;
      background: #2196f3;
      color: white;
      border: none;
      border-radius: 3px;
      font-size: 14px;
    }
    button:hover {
      background: #1976d2;
    }
    .output {
      margin-top: 10px;
      padding: 15px;
      background: #e3f2fd;
      border-radius: 3px;
      min-height: 40px;
    }
    input {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
    #domContainer {
      min-height: 100px;
      border: 2px dashed #ccc;
      border-radius: 5px;
      padding: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h3>WeakSet & WeakMap</h3>
  
  <div class="section">
    <h4>1. WeakSet</h4>
    <button id="wsAdd">–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç—ã</button>
    <button id="wsDelete">–£–¥–∞–ª–∏—Ç—å obj1</button>
    <button id="wsNull" style="background: #ff9800;">obj2 = null</button>
    <div class="output" id="wsOutput">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
  </div>
  
  <div class="section">
    <h4>2. WeakMap</h4>
    <button id="wmSet">–î–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
    <button id="wmGet">–ü–æ–ª—É—á–∏—Ç—å user1</button>
    <button id="wmUpdate">–û–±–Ω–æ–≤–∏—Ç—å user1</button>
    <div class="output" id="wmOutput">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
  </div>
  
  <div class="section">
    <h4>3. –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ WeakMap</h4>
    <input type="text" id="userName" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" value="Alice">
    <button id="createUser">–°–æ–∑–¥–∞—Ç—å User</button>
    <button id="makeAdmin">–°–¥–µ–ª–∞—Ç—å Admin</button>
    <div class="output" id="userOutput">–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
  </div>
  
  <div class="section">
    <h4>4. DOM —ç–ª–µ–º–µ–Ω—Ç—ã + WeakMap</h4>
    <button id="createElem">–°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
    <button id="clearElems" style="background: #f44336;">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ</button>
    <div id="domContainer"></div>
    <div class="output" id="domOutput">–ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã!</div>
  </div>
  
  <p style="color: #666; margin-top: 20px;">
    üí° WeakSet/WeakMap –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç –ø–∞–º—è—Ç—å –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤<br>
    üîç –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤!
  </p>
  
  <script src="index.js"></script>
</body>
</html>`
  }}
/>
