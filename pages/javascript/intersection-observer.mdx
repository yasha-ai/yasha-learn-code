import { Sandpack } from '@codesandbox/sandpack-react'
## JavaScript: –ú–æ–∑–≥–∏. –£—Ä–æ–∫: Intersection Observer

Intersection Observer API –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º –≤ –æ–∫–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞ (viewport) –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –≠—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

### –ß—Ç–æ —Ç–∞–∫–æ–µ Intersection Observer?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –æ—Ö—Ä–∞–Ω–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º (—ç–ª–µ–º–µ–Ω—Ç–æ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ). –ö–∞–∫ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–æ–ª–µ –∑—Ä–µ–Ω–∏—è –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞ (viewport –∏–ª–∏ –¥—Ä—É–≥–æ–π —ç–ª–µ–º–µ–Ω—Ç), –æ—Ö—Ä–∞–Ω–Ω–∏–∫ –ø–æ–¥–∞–µ—Ç —Å–∏–≥–Ω–∞–ª. Intersection Observer ‚Äì —ç—Ç–æ –∏ –µ—Å—Ç—å —ç—Ç–æ—Ç –æ—Ö—Ä–∞–Ω–Ω–∏–∫ –≤ –º–∏—Ä–µ JavaScript. –û–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å–ª–µ–¥–∏—Ç –∑–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ–º —Ü–µ–ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –¥—Ä—É–≥–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º (–∫–æ—Ä–Ω–µ–º –∏–ª–∏ viewport).

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, –≥–¥–µ –º—ã –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –∫–ª–∞—Å—Å `visible` –∫ —ç–ª–µ–º–µ–Ω—Ç—É, –∫–æ–≥–¥–∞ –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º –≤ viewport.

```html
<!DOCTYPE html>
<html>
<head>
  <title>Intersection Observer Example</title>
  <style>
    .box {
      width: 200px;
      height: 200px;
      background-color: lightblue;
      margin-bottom: 500px; /* –ß—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–ª—Å—è */
    }

    .visible {
      background-color: lightgreen;
    }
  </style>
</head>
<body>
  <div class="box">–≠—Ç–æ—Ç –±–ª–æ–∫ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç, –∫–æ–≥–¥–∞ —Å—Ç–∞–Ω–µ—Ç –≤–∏–¥–∏–º—ã–º.</div>

  <script>
    const box = document.querySelector('.box');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          box.classList.add('visible');
          observer.unobserve(box); // –ü—Ä–µ–∫—Ä–∞—â–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–ª –≤–∏–¥–∏–º—ã–º
        } else {
          box.classList.remove('visible'); // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Å–Ω–æ–≤–∞ –Ω–µ–≤–∏–¥–∏–º
        }
      });
    });

    observer.observe(box);
  </script>
</body>
</html>
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:

1.  –ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π `IntersectionObserver`.
2.  –í –∫–æ–ª–±—ç–∫-—Ñ—É–Ω–∫—Ü–∏–∏ –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–æ–π—Å—Ç–≤–æ `isIntersecting` –∫–∞–∂–¥–æ–≥–æ `entry`.  `isIntersecting` —Ä–∞–≤–Ω–æ `true`, –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å viewport.
3.  –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –≤–∏–¥–∏–º, –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å `visible` –∏ –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–ª–±—ç–∫ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏. –≠—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è.
4.  –ú—ã –Ω–∞—á–∏–Ω–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º `box` —Å –ø–æ–º–æ—â—å—é `observer.observe(box)`.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Intersection Observer

–ú—ã –º–æ–∂–µ–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `IntersectionObserver`, –ø–µ—Ä–µ–¥–∞–≤ –µ–º—É –æ–±—ä–µ–∫—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

```javascript
const options = {
  root: null, // –≠–ª–µ–º–µ–Ω—Ç, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ (null = viewport)
  rootMargin: '0px', // –û—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ root
  threshold: 0.5 // –ü–æ—Ä–æ–≥ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (0.0 - 1.0). 0.5 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ 50% —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã.
};

const observer = new IntersectionObserver((entries) => {
  // ...
}, options);
```

*   `root`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ–±–ª–∞—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ü–µ–ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å `null` (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è viewport –±—Ä–∞—É–∑–µ—Ä–∞.
*   `rootMargin`: –î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ `root`.  –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ `px` –∏–ª–∏ `%`. –ù–∞–ø—Ä–∏–º–µ—Ä, `rootMargin: '100px 0px 100px 0px'` –¥–æ–±–∞–≤–∏—Ç –æ—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É –≤ 100px.
*   `threshold`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —Ü–µ–ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–∏–º, —á—Ç–æ–±—ã –∫–æ–ª–±—ç–∫ –±—ã–ª –≤—ã–∑–≤–∞–Ω. –ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0.0 –¥–æ 1.0.

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä

Intersection Observer —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –¥–ª—è:

*   **–õ–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏ –≤ viewport, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
*   **–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ (infinite scroll):** –ü–æ–¥–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ –º–µ—Ä–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è –∫ –∫–æ–Ω—Ü—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
*   **–ê–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ:** –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —ç–ª–µ–º–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ viewport.
*   **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∫–ª–∞–º—ã:** –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–Ω–∞ –≤–∏–¥–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
*   –ú–Ω–æ–≥–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Intersection Observer –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, React-lazyload –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

*   Intersection Observer API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
*   –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —á—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è JavaScript.
*   `root`, `rootMargin` –∏ `threshold` –ø–æ–∑–≤–æ–ª—è—é—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∫–æ–ª–±—ç–∫–∞.
*   Intersection Observer –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.
*   –í–∞–∂–Ω–æ –ø—Ä–µ–∫—Ä–∞—â–∞—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º, –∫–æ–≥–¥–∞ –æ–Ω–æ –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∫–æ–ª–±—ç–∫–∞.

### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Sandpack template="vanilla">

```js
const app = document.querySelector('#app');

app.innerHTML = `
  <h2>üëÅÔ∏è Intersection Observer API</h2>
  
  <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 20px 0;">
    <strong>Threshold:</strong>
    <input id="threshold" type="range" min="0" max="100" value="50" 
      style="width: 200px; margin: 0 10px;">
    <span id="thresholdValue">50%</span>
    <button id="reset" style="margin-left: 15px; padding: 5px 15px; background: #FF9800; color: white; border: none; border-radius: 4px; cursor: pointer;">
      üîÑ –°–±—Ä–æ—Å–∏—Ç—å
    </button>
  </div>
  
  <div id="output" style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 20px 0; font-family: monospace; font-size: 13px; height: 100px; overflow-y: auto;"></div>
  
  <div id="scrollArea" style="height: 400px; overflow-y: scroll; border: 2px solid #ddd; border-radius: 8px; padding: 20px;">
    <div style="height: 300px; background: #fafafa; display: flex; align-items: center; justify-content: center; color: #999;">
      üëá –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑
    </div>
    
    <div class="observe-box" data-id="1" style="margin: 20px 0; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; text-align: center; opacity: 0.3; transform: translateY(20px); transition: all 0.5s;">
      <h3 style="margin: 0;">üì¶ –ë–ª–æ–∫ 1</h3>
      <p style="margin: 10px 0 0 0;">–ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏</p>
    </div>
    
    <div class="observe-box" data-id="2" style="margin: 20px 0; padding: 30px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border-radius: 8px; text-align: center; opacity: 0.3; transform: translateY(20px); transition: all 0.5s;">
      <h3 style="margin: 0;">üé® –ë–ª–æ–∫ 2</h3>
      <p style="margin: 10px 0 0 0;">Lazy load —Å—Ç–∏–ª—å</p>
    </div>
    
    <div class="observe-box" data-id="3" style="margin: 20px 0; padding: 30px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border-radius: 8px; text-align: center; opacity: 0.3; transform: translateY(20px); transition: all 0.5s;">
      <h3 style="margin: 0;">üöÄ –ë–ª–æ–∫ 3</h3>
      <p style="margin: 10px 0 0 0;">–ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–ª–∞–≤–Ω–æ</p>
    </div>
    
    <div style="height: 300px; background: #fafafa; display: flex; align-items: center; justify-content: center; color: #999;">
      –ö–æ–Ω–µ—Ü –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
    </div>
  </div>
`;

const output = document.querySelector('#output');
const thresholdInput = document.querySelector('#threshold');
const thresholdValue = document.querySelector('#thresholdValue');
const resetBtn = document.querySelector('#reset');
const scrollArea = document.querySelector('#scrollArea');

let observer;

function log(message, color = '#333') {
  const time = new Date().toLocaleTimeString();
  output.innerHTML += `<div style="color: ${color}; margin: 3px 0;">[${time}] ${message}</div>`;
  output.scrollTop = output.scrollHeight;
  console.log(message);
}

function initObserver() {
  // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π observer –µ—Å–ª–∏ –µ—Å—Ç—å
  if (observer) {
    document.querySelectorAll('.observe-box').forEach(box => {
      observer.unobserve(box);
    });
  }
  
  const threshold = parseInt(thresholdInput.value) / 100;
  
  // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π Intersection Observer
  const options = {
    root: scrollArea, // –ù–∞–±–ª—é–¥–∞–µ–º –≤–Ω—É—Ç—Ä–∏ scrollArea
    rootMargin: '0px',
    threshold: threshold
  };
  
  observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const id = entry.target.getAttribute('data-id');
      
      if (entry.isIntersecting) {
        // –≠–ª–µ–º–µ–Ω—Ç —Å—Ç–∞–ª –≤–∏–¥–∏–º—ã–º
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
        log(`‚úÖ –ë–ª–æ–∫ ${id} –≤–∏–¥–∏–º (${Math.round(entry.intersectionRatio * 100)}%)`, '#4CAF50');
      } else {
        // –≠–ª–µ–º–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏–º
        entry.target.style.opacity = '0.3';
        entry.target.style.transform = 'translateY(20px)';
        log(`‚ùå –ë–ª–æ–∫ ${id} —Å–∫—Ä—ã—Ç`, '#999');
      }
    });
  }, options);
  
  // –ù–∞—á–∏–Ω–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –≤—Å–µ–º–∏ –±–ª–æ–∫–∞–º–∏
  document.querySelectorAll('.observe-box').forEach(box => {
    observer.observe(box);
  });
  
  log(`üîß Observer —Å–æ–∑–¥–∞–Ω (threshold: ${Math.round(threshold * 100)}%)`, '#2196F3');
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ threshold
thresholdInput.addEventListener('input', (e) => {
  const value = e.target.value;
  thresholdValue.textContent = value + '%';
});

thresholdInput.addEventListener('change', () => {
  output.innerHTML = '';
  initObserver();
});

// –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
resetBtn.addEventListener('click', () => {
  scrollArea.scrollTop = 0;
  output.innerHTML = '';
  log('üîÑ –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞', '#FF9800');
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
log('üëÅÔ∏è Intersection Observer –≥–æ—Ç–æ–≤!', '#673AB7');
log('', '#333');
log('üí° –ù–∞—Å—Ç—Ä–æ–π–∫–∏:', '#666');
log('  ‚Ä¢ root: scrollArea (–æ–±–ª–∞—Å—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è)', '#666');
log('  ‚Ä¢ threshold: % –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è', '#666');
log('  ‚Ä¢ rootMargin: 0px (–æ—Ç—Å—Ç—É–ø—ã)', '#666');
log('', '#333');
log('üìú –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç', '#FF9800');

initObserver();
```

```css
.observe-box.visible {
  opacity: 1 !important;
  transform: translateY(0) !important;
}
```

</Sandpack>
