# JavaScript: –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö. Map

–û–±—ä–µ–∫—Ç `Map` ‚Äî —ç—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –≥–¥–µ –∫–ª—é—á–∞–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏, –∫–∞–∫ –≤ –æ–±—ã—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–¥–µ–∞–ª—å–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è Map

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (`Object`), `Map` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–º–µ—Ä–æ–º –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç Object:
1.  **–¢–∏–ø—ã –∫–ª—é—á–µ–π:** –ö–ª—é—á–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä–µ–∫—Ç, —Ñ—É–Ω–∫—Ü–∏—è –∏–ª–∏ –ª—é–±–æ–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
2.  **–†–∞–∑–º–µ—Ä:** –£ `Map` –µ—Å—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `size`, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
3.  **–ò—Ç–µ—Ä–∞—Ü–∏—è:** `Map` —è–≤–ª—è–µ—Ç—Å—è –∏—Ç–µ—Ä–∏—Ä—É–µ–º—ã–º –æ–±—ä–µ–∫—Ç–æ–º (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `for...of`).
4.  **–ü–æ—Ä—è–¥–æ–∫:** –≠–ª–µ–º–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–±–∏—Ä–∞—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```javascript
const userActions = new Map();

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (set)
userActions.set('login', true);
userActions.set(100, 'ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
const objKey = { id: 1 };
userActions.set(objKey, '–î–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç–∞');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (get)
console.log(userActions.get('login')); // true
console.log(userActions.get(objKey));  // '–î–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç–∞'

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è (has) –∏ —Ä–∞–∑–º–µ—Ä (size)
console.log(userActions.has(100)); // true
console.log(userActions.size);     // 3

// –£–¥–∞–ª–µ–Ω–∏–µ (delete)
userActions.delete('login');
```

### –ü—Ä–∏–º–µ—Ä 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–∞–∫ –∫–ª—é—á–µ–π

–≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π `Map`.

```javascript
const activeSessions = new Map();

const userLeha = { name: 'Leha' };
const userYasha = { name: 'Yasha' };

activeSessions.set(userLeha, { lastSeen: '10:30' });
activeSessions.set(userYasha, { lastSeen: '19:05' });

console.log(activeSessions.get(userLeha)); // { lastSeen: '10:30' }
```

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Map –≤–º–µ—Å—Ç–æ Object?

*   –ö–æ–≥–¥–∞ –∫–ª—é—á–∏ ‚Äî —ç—Ç–æ –Ω–µ —Å—Ç—Ä–æ–∫–∏ –∏ –Ω–µ —Å–∏–º–≤–æ–ª—ã.
*   –ö–æ–≥–¥–∞ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
*   –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —á–∞—Å—Ç–æ —É–∑–Ω–∞–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–∏ (—É –æ–±—ä–µ–∫—Ç–∞ —ç—Ç–æ `Object.keys(obj).length` ‚Äî –º–µ–¥–ª–µ–Ω–Ω–æ).
*   –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, —á—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –æ–±—ä–µ–∫—Ç–∞.

```javascript
const cache = new Map();

function getProcessedData(user) {
  if (cache.has(user)) {
    return cache.get(user);
  }

  const result = heavyCalculation(user); // –∫–∞–∫–∞—è-—Ç–æ –¥–æ–ª–≥–∞—è —Ñ—É–Ω–∫—Ü–∏—è
  cache.set(user, result);
  return result;
}
```

## –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

*   `Map` ‚Äî —ç—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è.
*   –ú–µ—Ç–æ–¥—ã: `set(key, val)`, `get(key)`, `has(key)`, `delete(key)`, `clear()`.
*   –°–≤–æ–π—Å—Ç–≤–æ `size` –≤—Å–µ–≥–¥–∞ –ø–æ–¥ —Ä—É–∫–æ–π.
*   –î–ª—è –ø–µ—Ä–µ–±–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `map.keys()`, `map.values()` –∏–ª–∏ `map.entries()`.

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [–°–µ—Ç—ã (Set)](/javascript/set)
- [–ú–∞—Å—Å–∏–≤—ã –≤ JS](/javascript/arrays)

### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Sandpack template="vanilla">

```js index.js
// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å Map

document.body.style.fontFamily = 'Arial, sans-serif';
document.body.style.padding = '20px';
document.body.style.lineHeight = '1.6';

// –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
const title1 = document.createElement('h3');
title1.textContent = '1. –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ Map';
document.body.appendChild(title1);

const userSettings = new Map();
userSettings.set('theme', 'dark');
userSettings.set('language', 'ru');
userSettings.set(42, 'Answer to everything');

const div1 = document.createElement('div');
div1.innerHTML = `
  <p>userSettings.set('theme', 'dark')</p>
  <p>userSettings.set('language', 'ru')</p>
  <p>userSettings.set(42, 'Answer to everything')</p>
  <p><strong>size:</strong> ${userSettings.size}</p>
  <p><strong>get('theme'):</strong> ${userSettings.get('theme')}</p>
  <p><strong>has(42):</strong> ${userSettings.has(42)}</p>
`;
document.body.appendChild(div1);

// –ü—Ä–∏–º–µ—Ä 2: –û–±—ä–µ–∫—Ç—ã –∫–∞–∫ –∫–ª—é—á–∏
const title2 = document.createElement('h3');
title2.textContent = '2. –û–±—ä–µ–∫—Ç—ã –∫–∞–∫ –∫–ª—é—á–∏';
document.body.appendChild(title2);

const visits = new Map();
const user1 = { name: '–ê–ª–µ–∫—Å–µ–π', id: 1 };
const user2 = { name: '–Ø—à–∞', id: 2 };

visits.set(user1, 5);
visits.set(user2, 12);

const div2 = document.createElement('div');
div2.innerHTML = `
  <p>–ü–æ—Å–µ—â–µ–Ω–∏–π ${user1.name}: <strong>${visits.get(user1)}</strong></p>
  <p>–ü–æ—Å–µ—â–µ–Ω–∏–π ${user2.name}: <strong>${visits.get(user2)}</strong></p>
`;
document.body.appendChild(div2);

// –ü—Ä–∏–º–µ—Ä 3: –ò—Ç–µ—Ä–∞—Ü–∏—è
const title3 = document.createElement('h3');
title3.textContent = '3. –ü–µ—Ä–µ–±–æ—Ä Map (for...of)';
document.body.appendChild(title3);

const products = new Map([
  ['laptop', 50000],
  ['phone', 30000],
  ['headphones', 5000]
]);

const list = document.createElement('ul');
for (const [key, value] of products) {
  const li = document.createElement('li');
  li.textContent = `${key}: ${value} —Ä—É–±.`;
  list.appendChild(li);
}
document.body.appendChild(list);

// –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–∞–∫—Ç–∏–∫–∞ - –∫—ç—à —Ñ—É–Ω–∫—Ü–∏–∏
const title4 = document.createElement('h3');
title4.textContent = '4. –ü—Ä–∞–∫—Ç–∏–∫–∞: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤';
document.body.appendChild(title4);

const cache = new Map();
let calcCount = 0;

function expensiveCalculation(user) {
  if (cache.has(user)) {
    console.log(`–ö—ç—à –Ω–∞–π–¥–µ–Ω –¥–ª—è ${user.name}`);
    return cache.get(user);
  }
  
  calcCount++;
  console.log(`–í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞—Å—á–µ—Ç –¥–ª—è ${user.name}...`);
  const result = user.id * 100;
  cache.set(user, result);
  return result;
}

const testUser = { name: '–¢–µ—Å—Ç', id: 7 };
expensiveCalculation(testUser);
expensiveCalculation(testUser); // –ò–∑ –∫—ç—à–∞!

const div4 = document.createElement('div');
div4.innerHTML = `
  <p>–í—ã–∑–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é 2 —Ä–∞–∑–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞</p>
  <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:</strong> ${calcCount}</p>
  <p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –∫—ç—à–∞:</strong> ${cache.get(testUser)}</p>
  <p style="color: #4CAF50;">‚úì –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫—ç—à!</p>
`;
document.body.appendChild(div4);

console.log('Map demo –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ª–æ–≥–æ–≤.');
```

</Sandpack>
