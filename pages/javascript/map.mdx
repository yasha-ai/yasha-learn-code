# JavaScript: Мозги. Урок: Map


![Иллюстрация к уроку](/lessons/javascript-map.png)
Map - это мощный инструмент в JavaScript, позволяющий преобразовывать массивы, применяя одну и ту же функцию к каждому элементу. Он создает новый массив, содержащий результаты этих преобразований. Давайте разберемся, как это работает.

## Концепция Map

Представьте, что у вас есть список чисел, и вы хотите удвоить каждое из них. Вместо того, чтобы писать цикл `for`, можно использовать `map`. `map` берет каждый элемент массива, передает его в вашу функцию, и возвращает результат этой функции. Так, для каждого элемента исходного массива создается соответствующий элемент в новом массиве.

### Пример 1: Удвоение чисел

```javascript
const numbers = [1, 2, 3, 4, 5];

const doubledNumbers = numbers.map(function(number) {
  return number * 2;
});

console.log(doubledNumbers); // Вывод: [2, 4, 6, 8, 10]
```

В этом примере, функция `function(number) { return number * 2; }` вызывается для каждого числа в массиве `numbers`. Результат умножения каждого числа на 2 помещается в новый массив `doubledNumbers`.

### Пример 2: Использование стрелочных функций

Стрелочные функции делают код более лаконичным:

```javascript
const numbers = [1, 2, 3, 4, 5];

const doubledNumbers = numbers.map(number => number * 2);

console.log(doubledNumbers); // Вывод: [2, 4, 6, 8, 10]
```

### Пример 3: Преобразование массива объектов

`map` также отлично подходит для работы с массивами объектов.

```javascript
const users = [
  { id: 1, name: 'Alice' },
  { id: 2, name: 'Bob' },
  { id: 3, name: 'Charlie' }
];

const userNames = users.map(user => user.name);

console.log(userNames); // Вывод: ['Alice', 'Bob', 'Charlie']
```

В этом примере, мы извлекаем имена всех пользователей из массива `users` и создаем новый массив только с именами.

## Жизненный пример

`map` широко используется в React и других JavaScript фреймворках для рендеринга списков элементов. Например, представьте, что у вас есть массив данных, который нужно отобразить в виде списка HTML элементов.

```javascript
// Пример в React (псевдокод)
const items = ['Item 1', 'Item 2', 'Item 3'];

function MyListComponent() {
  return (
    <ul>
      {items.map(item => (
        <li key={item}>{item}</li>
      ))}
    </ul>
  );
}
```

В этом React компоненте, `items.map` преобразует каждый элемент массива `items` в HTML элемент `<li>`.  `key={item}` необходим для оптимизации рендеринга в React. Подобный подход можно встретить практически в любом современном веб-приложении, использующем списки данных.

## Ключевые моменты

*   `map` создает новый массив, не изменяя исходный.
*   `map` принимает функцию в качестве аргумента, которая вызывается для каждого элемента массива.
*   Функция, переданная в `map`, должна возвращать значение, которое будет помещено в новый массив.
*   `map` часто используется для преобразования массивов данных в массивы HTML элементов для рендеринга на странице.
*   `map` может упростить и сделать более читаемым код, по сравнению с использованием циклов `for`.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript Map Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>JavaScript Map Example</h1>
    <p>Введите числа через запятую:</p>
    <input type="text" id="numberInput" placeholder="1,2,3,4,5">
    <button id="processButton">Удвоить числа</button>
    <div id="output"></div>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}

.container {
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  text-align: center;
  width: 80%;
  max-width: 600px;
}

input[type="text"] {
  padding: 8px;
  border: 1px solid #555;
  border-radius: 4px;
  background-color: #444;
  color: #eee;
  width: 70%;
  margin-bottom: 10px;
}

button {
  padding: 10px 20px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

button:hover {
  background-color: #367c39;
}

#output {
  margin-top: 20px;
  font-size: 1.2em;
  color: #fff;
}
`,
    "/index.js": `// Получаем элементы DOM
const numberInput = document.getElementById('numberInput');
const processButton = document.getElementById('processButton');
const outputDiv = document.getElementById('output');

// Функция для удвоения чисел с использованием map
function doubleNumbers(numbers) {
  return numbers.map(number => number * 2);
}

// Обработчик события для кнопки
processButton.addEventListener('click', () => {
  // Получаем введенные пользователем числа
  const inputText = numberInput.value;

  // Преобразуем строку в массив чисел
  const numbers = inputText.split(',').map(Number);

  // Проверяем, что все элементы массива - числа
  if (numbers.some(isNaN)) {
    outputDiv.textContent = 'Пожалуйста, введите корректные числа через запятую.';
    return;
  }

  // Удваиваем числа с помощью map
  const doubledNumbers = doubleNumbers(numbers);

  // Выводим результат
  outputDiv.textContent = 'Удвоенные числа: ' + doubledNumbers.join(', ');
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
