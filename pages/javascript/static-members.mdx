## JavaScript: Мозги. Урок 3: Статические методы и свойства


![Иллюстрация к уроку](/lessons/javascript-static-members.png)
Статические методы и свойства - это мощный инструмент в JavaScript, позволяющий привязывать функциональность непосредственно к классу, а не к его экземплярам. Они помогают организовать код и избежать создания лишних объектов. Давайте разберемся, как это работает!

### Что такое статические методы и свойства?

Представьте себе класс как чертеж для создания объектов. Обычные методы и свойства принадлежат каждому созданному объекту (экземпляру) этого класса. А статические методы и свойства принадлежат самому классу. Чтобы их вызвать, не нужно создавать экземпляр класса. Они вызываются напрямую через имя класса.

### Практический пример: Статические свойства

```javascript
class Dog {
  static dogCount = 0; // Статическое свойство - количество собак

  constructor(name) {
    this.name = name;
    Dog.dogCount++; // Увеличиваем счетчик при создании новой собаки
  }

  static getDogCount() { // Статический метод - возвращает количество собак
    return Dog.dogCount;
  }
}

const dog1 = new Dog("Бобик");
const dog2 = new Dog("Рекс");

console.log(Dog.dogCount); // Вывод: 2 (доступ к статическому свойству)
console.log(Dog.getDogCount()); // Вывод: 2 (вызов статического метода)
```

В этом примере `dogCount` - это статическое свойство класса `Dog`.  Оно хранит общее количество созданных объектов `Dog`.  Мы не можем получить доступ к `dogCount` через `dog1.dogCount` или `dog2.dogCount`.  Мы обращаемся к нему только через `Dog.dogCount`.  Аналогично, `getDogCount()` - статический метод, который возвращает значение `dogCount`.

### Практический пример: Статические методы

```javascript
class MathHelper {
  static PI = 3.14159;

  static calculateCircleArea(radius) {
    return MathHelper.PI * radius * radius;
  }
}

const area = MathHelper.calculateCircleArea(5);
console.log(area); // Вывод: 78.53975
```

Здесь `calculateCircleArea` - это статический метод, который вычисляет площадь круга.  Мы не создаем экземпляр `MathHelper`, чтобы использовать этот метод.  Мы вызываем его напрямую через `MathHelper.calculateCircleArea(5)`. `PI` - статическая константа.

### Жизненный пример

Статические методы и свойства часто используются в библиотеках и фреймворках для:

*   **Создания утилитных функций:**  Например, класс `Math` в JavaScript предоставляет множество статических методов (например, `Math.random()`, `Math.floor()`) для выполнения математических операций.
*   **Реализации паттернов проектирования:**  Например, паттерн Singleton (одиночка) часто реализуется с использованием статического метода для получения единственного экземпляра класса.
*   **Управления конфигурацией:**  Статические свойства могут использоваться для хранения глобальных настроек приложения.
*   **React:** В React компонентах статические методы часто используются для определения `propTypes` или `defaultProps`.

### Ключевые моменты

*   Статические методы и свойства принадлежат классу, а не его экземплярам.
*   Для доступа к ним используется имя класса (например, `ClassName.staticMethod()`).
*   Они полезны для создания утилитных функций, управления конфигурацией и реализации паттернов проектирования.
*   Статические методы не имеют доступа к `this`, потому что `this` относится к экземпляру класса.
*   Они могут обращаться к другим статическим свойствам и методам того же класса.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Статические методы и свойства</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Статические методы и свойства</h1>
    <p>Количество созданных собак: <span id="dog-count">0</span></p>
    <input type="text" id="dog-name" placeholder="Имя собаки">
    <button id="create-dog">Создать собаку</button>
    <div id="dogs-list"></div>

    <h2>Площадь круга</h2>
    <input type="number" id="circle-radius" placeholder="Радиус круга" value="5">
    <button id="calculate-area">Рассчитать площадь</button>
    <p>Площадь круга: <span id="circle-area"></span></p>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

input[type="text"], input[type="number"] {
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #555;
  background-color: #333;
  color: #eee;
  width: 100%;
  box-sizing: border-box;
}

button {
  padding: 10px 15px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
  margin-bottom: 10px;
}

button:hover {
  background-color: #3e8e41;
}

#dogs-list {
  margin-top: 20px;
}

.dog-item {
  padding: 10px;
  border: 1px solid #555;
  margin-bottom: 5px;
  background-color: #333;
}`,
    "/index.js": `class Dog {
  static dogCount = 0; // Статическое свойство - количество собак

  constructor(name) {
    this.name = name;
    Dog.dogCount++; // Увеличиваем счетчик при создании новой собаки
  }

  static getDogCount() { // Статический метод - возвращает количество собак
    return Dog.dogCount;
  }

  render() {
    const dogElement = document.createElement('div');
    dogElement.classList.add('dog-item');
    dogElement.textContent = this.name;
    return dogElement;
  }
}

class MathHelper {
  static PI = 3.14159;

  static calculateCircleArea(radius) {
    return MathHelper.PI * radius * radius;
  }
}

// Получаем элементы DOM
const dogCountElement = document.getElementById('dog-count');
const dogNameInput = document.getElementById('dog-name');
const createDogButton = document.getElementById('create-dog');
const dogsListElement = document.getElementById('dogs-list');
const circleRadiusInput = document.getElementById('circle-radius');
const calculateAreaButton = document.getElementById('calculate-area');
const circleAreaElement = document.getElementById('circle-area');

// Функция обновления количества собак
function updateDogCount() {
  dogCountElement.textContent = Dog.getDogCount();
}

// Обработчик нажатия на кнопку "Создать собаку"
createDogButton.addEventListener('click', () => {
  const dogName = dogNameInput.value;
  if (dogName) {
    const newDog = new Dog(dogName);
    const dogElement = newDog.render();
    dogsListElement.appendChild(dogElement);
    dogNameInput.value = '';
    updateDogCount();
  }
});

// Обработчик нажатия на кнопку "Рассчитать площадь"
calculateAreaButton.addEventListener('click', () => {
  const radius = parseFloat(circleRadiusInput.value);
  if (!isNaN(radius)) {
    const area = MathHelper.calculateCircleArea(radius);
    circleAreaElement.textContent = area.toFixed(2);
  } else {
    circleAreaElement.textContent = 'Введите корректный радиус';
  }
});

// Инициализация количества собак
updateDogCount();
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
