## JavaScript: Мозги. Урок 4: Функции высшего порядка


![Иллюстрация к уроку](/lessons/javascript-higher-order-functions.png)
Функции высшего порядка - мощный инструмент в JavaScript, позволяющий писать более гибкий и переиспользуемый код. Они принимают другие функции в качестве аргументов или возвращают функции в качестве результата.

### Что такое функция высшего порядка?

Функция высшего порядка (Higher-Order Function) – это функция, которая:

*   принимает одну или несколько функций в качестве аргументов,
*   возвращает функцию в качестве результата,
*   или делает и то, и другое.

Другими словами, это функции, которые оперируют другими функциями.

#### Пример 1: Функция, принимающая другую функцию в качестве аргумента

```javascript
function greet(name, greetingFunction) {
  // Используем greetingFunction для создания приветствия
  const greeting = greetingFunction(name);
  console.log(greeting);
}

function sayHello(name) {
  return "Hello, " + name + "!";
}

function sayGoodbye(name) {
  return "Goodbye, " + name + "!";
}

// Передаем функцию sayHello в качестве аргумента
greet("Alice", sayHello); // Выведет: Hello, Alice!

// Передаем функцию sayGoodbye в качестве аргумента
greet("Bob", sayGoodbye); // Выведет: Goodbye, Bob!
```

В этом примере `greet` - функция высшего порядка, потому что она принимает `greetingFunction` в качестве аргумента.

#### Пример 2: Функция, возвращающая другую функцию

```javascript
function multiplier(factor) {
  // Возвращаем функцию, которая умножает число на factor
  return function(number) {
    return number * factor;
  }
}

// Создаем функцию, которая умножает на 2
const double = multiplier(2);

// Создаем функцию, которая умножает на 5
const multiplyByFive = multiplier(5);

console.log(double(3)); // Выведет: 6
console.log(multiplyByFive(4)); // Выведет: 20
```

Здесь `multiplier` - функция высшего порядка, потому что она возвращает другую функцию. Возвращаемая функция "помнит" значение `factor` благодаря замыканию (closure).

### Практические примеры кода

#### 1. `Array.map()`

```javascript
const numbers = [1, 2, 3, 4, 5];

// Используем map для создания нового массива, где каждый элемент умножен на 2
const doubledNumbers = numbers.map(function(number) {
  return number * 2;
});

console.log(doubledNumbers); // Выведет: [2, 4, 6, 8, 10]
```

#### 2. `Array.filter()`

```javascript
const numbers = [1, 2, 3, 4, 5, 6];

// Используем filter для создания нового массива, содержащего только четные числа
const evenNumbers = numbers.filter(function(number) {
  return number % 2 === 0; // Возвращает true, если число четное
});

console.log(evenNumbers); // Выведет: [2, 4, 6]
```

#### 3. `Array.reduce()`

```javascript
const numbers = [1, 2, 3, 4, 5];

// Используем reduce для суммирования всех элементов массива
const sum = numbers.reduce(function(accumulator, currentValue) {
  return accumulator + currentValue;
}, 0); // 0 - начальное значение accumulator

console.log(sum); // Выведет: 15
```

### Жизненный пример

Функции высшего порядка широко используются в современных JavaScript фреймворках и библиотеках, таких как React, Angular, и Vue.js.

Например, в React компоненты часто создаются с использованием функций высшего порядка для добавления дополнительной логики, такой как логирование, обработка ошибок или управление состоянием. Функции высшего порядка позволяют переиспользовать эту логику между разными компонентами.

Redux, популярная библиотека для управления состоянием в React-приложениях, активно использует функции высшего порядка для создания middleware, которые перехватывают и обрабатывают действия (actions) перед тем, как они попадут в reducer.

В Angular, декораторы - это по сути функции высшего порядка, которые добавляют метаданные к классам и методам, позволяя фреймворку правильно обрабатывать их.

### Ключевые моменты

*   Функции высшего порядка позволяют писать более модульный и переиспользуемый код.
*   `Array.map()`, `Array.filter()`, и `Array.reduce()` - распространенные примеры функций высшего порядка, встроенных в JavaScript.
*   Они широко используются во фреймворках и библиотеках для добавления дополнительной логики и расширения функциональности.
*   Понимание функций высшего порядка - важный шаг к освоению продвинутых концепций JavaScript.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Higher-Order Functions Demo</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Higher-Order Functions Demo</h1>

    <div class="input-section">
      <label for="numberInput">Введите числа (через запятую):</label>
      <input type="text" id="numberInput" placeholder="1,2,3,4,5">
      <button id="processButton">Обработать</button>
    </div>

    <div class="output-section">
      <h2>Результаты:</h2>
      <p>Исходный массив: <span id="originalArray"></span></p>
      <p>Умноженные на 2: <span id="doubledArray"></span></p>
      <p>Четные числа: <span id="evenArray"></span></p>
      <p>Сумма: <span id="sum"></span></p>
    </div>
  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}

.container {
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
  width: 80%;
  max-width: 600px;
}

h1 {
  text-align: center;
  color: #ddd;
}

.input-section, .output-section {
  margin-bottom: 20px;
}

label {
  display: block;
  margin-bottom: 5px;
  color: #ccc;
}

input[type="text"] {
  width: 100%;
  padding: 8px;
  border: 1px solid #555;
  background-color: #444;
  color: #eee;
  border-radius: 4px;
}

button {
  background-color: #5cb85c;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.3s;
}

button:hover {
  background-color: #449d44;
}

.output-section p {
  margin: 5px 0;
}

.output-section span {
  font-weight: bold;
  color: #fff;
}`,
    "/index.js": `document.addEventListener('DOMContentLoaded', function() {
  const numberInput = document.getElementById('numberInput');
  const processButton = document.getElementById('processButton');
  const originalArraySpan = document.getElementById('originalArray');
  const doubledArraySpan = document.getElementById('doubledArray');
  const evenArraySpan = document.getElementById('evenArray');
  const sumSpan = document.getElementById('sum');

  processButton.addEventListener('click', function() {
    const inputString = numberInput.value;
    const numbers = inputString.split(',').map(Number).filter(num => !isNaN(num)); // Преобразуем строку в массив чисел

    originalArraySpan.textContent = JSON.stringify(numbers);

    // Используем map для умножения каждого числа на 2
    const doubledNumbers = numbers.map(function(number) {
      return number * 2;
    });
    doubledArraySpan.textContent = JSON.stringify(doubledNumbers);

    // Используем filter для получения только четных чисел
    const evenNumbers = numbers.filter(function(number) {
      return number % 2 === 0;
    });
    evenArraySpan.textContent = JSON.stringify(evenNumbers);

    // Используем reduce для суммирования чисел
    const sum = numbers.reduce(function(accumulator, currentValue) {
      return accumulator + currentValue;
    }, 0);
    sumSpan.textContent = sum;
  });
});`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
