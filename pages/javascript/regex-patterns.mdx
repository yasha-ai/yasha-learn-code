## JavaScript: Мозги. Regex Patterns


![Иллюстрация к уроку](/lessons/javascript-regex-patterns.png)
Регулярные выражения (Regex) – это мощный инструмент для поиска и манипулирования текстом. Они позволяют описывать шаблоны, которым должен соответствовать текст, чтобы его можно было найти, заменить или проверить.

### Что такое Regex?

Regex, или регулярные выражения, – это последовательность символов, определяющая шаблон поиска.  Представьте, что у вас есть лупа, которая ищет конкретные слова или структуры в огромном тексте.  Regex – это инструкция для этой лупы.

**Пример:**

```javascript
const text = "Hello world! Hello JavaScript!";
const pattern = /Hello/; // Простейший regex, ищет слово "Hello"

const result = text.match(pattern);
console.log(result); // Вывод: [ 'Hello', index: 0, input: 'Hello world! Hello JavaScript!', groups: undefined ]
```

В этом примере `pattern` – это регулярное выражение, которое ищет слово "Hello".  Метод `match()` возвращает массив с информацией о найденном совпадении (если оно есть).

### Основные элементы Regex

*   **Литералы:** Обычные символы, которые ищутся буквально (например, `a`, `b`, `1`, `2`).
*   **Метасимволы:** Специальные символы, имеющие особое значение (например, `.`, `*`, `+`, `?`, `^`, `$`).
*   **Квантификаторы:** Указывают, сколько раз должен повториться предыдущий символ или группа символов (например, `*`, `+`, `?`, `{n}`, `{n,}`, `{n,m}`).
*   **Символьные классы:** Определяют набор символов, которые могут соответствовать (например, `[abc]`, `[^abc]`, `\d`, `\w`, `\s`).
*   **Якоря:** Указывают позицию, в которой должен находиться шаблон (например, `^` – начало строки, `$` – конец строки).

**Примеры с метасимволами и квантификаторами:**

```javascript
const text = "abc123def456ghi";

// . (точка) - любой символ (кроме переноса строки)
const pattern1 = /a.c/; // Ищет "a", любой символ, затем "c"
console.log(text.match(pattern1)); // Вывод: [ 'abc', index: 0, input: 'abc123def456ghi', groups: undefined ]

// + (плюс) - один или более раз
const pattern2 = /\d+/; // Ищет одну или более цифр
console.log(text.match(pattern2)); // Вывод: [ '123', index: 3, input: 'abc123def456ghi', groups: undefined ]

// * (звездочка) - ноль или более раз
const pattern3 = /a\d*c/; // Ищет "a", ноль или более цифр, затем "c"
console.log(text.match(pattern3)); // Вывод: [ 'abc', index: 0, input: 'abc123def456ghi', groups: undefined ]
```

### Практические примеры

```javascript
// Проверка email
const email = "test@example.com";
const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
console.log(emailPattern.test(email)); // Вывод: true

// Поиск всех чисел в строке
const text2 = "There are 123 apples and 456 oranges.";
const numberPattern = /\d+/g; // g - глобальный поиск (все совпадения)
console.log(text2.match(numberPattern)); // Вывод: [ '123', '456' ]

// Замена всех пробелов на подчеркивания
const text3 = "Hello world!  This is a test.";
const spacePattern = /\s+/g;
const replacedText = text3.replace(spacePattern, "_");
console.log(replacedText); // Вывод: Hello_world!_This_is_a_test.
```

### Жизненный пример

Regex широко используются в веб-разработке для:

*   **Валидации форм:** Проверка правильности введенных данных (email, телефон, пароль и т.д.).  Например, jQuery Validation плагин активно использует regex.
*   **Поиска и замены текста:** В текстовых редакторах, IDE, и при обработке данных на сервере.  Многие JavaScript фреймворки (React, Angular, Vue) используют regex для обработки строк и шаблонов.
*   **Парсинга URL:** Извлечение информации из URL-адресов.  Например, для определения маршрута в SPA (Single Page Application).
*   **Анализа логов:** Поиск определенных событий или ошибок в файлах логов.

### Ключевые моменты

*   Regex – это мощный инструмент, но может быть сложным для понимания на первый взгляд.
*   Тестируйте свои regex на онлайн-сервисах (например, regex101.com) для проверки их корректности.
*   Используйте комментарии в коде, чтобы объяснить, что делает каждый regex.
*   Не бойтесь разбивать сложные regex на более простые.
*   Помните о производительности – сложные regex могут замедлять работу вашего приложения.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html>
<head>
  <title>Regex Patterns</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Regex Patterns</h1>

    <label for="textInput">Текст для поиска:</label>
    <input type="text" id="textInput" value="Hello world! 123 abc">

    <label for="regexInput">Regex:</label>
    <input type="text" id="regexInput" value="\\d+">

    <button id="searchButton">Поиск</button>

    <div id="result">Результат:</div>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

label {
  display: block;
  margin-bottom: 5px;
}

input[type="text"] {
  width: 100%;
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #555;
  background-color: #333;
  color: #eee;
  box-sizing: border-box;
}

button {
  background-color: #4CAF50;
  color: white;
  padding: 10px 15px;
  border: none;
  cursor: pointer;
}

button:hover {
  background-color: #3e8e41;
}

#result {
  margin-top: 20px;
  padding: 10px;
  border: 1px solid #555;
  background-color: #333;
}`,
    "/index.js": `document.addEventListener('DOMContentLoaded', () => {
  const textInput = document.getElementById('textInput');
  const regexInput = document.getElementById('regexInput');
  const searchButton = document.getElementById('searchButton');
  const resultDiv = document.getElementById('result');

  searchButton.addEventListener('click', () => {
    const text = textInput.value;
    const regexPattern = regexInput.value;

    try {
      const regex = new RegExp(regexPattern, 'g'); // 'g' для поиска всех совпадений
      const matches = text.match(regex);

      if (matches) {
        resultDiv.textContent = 'Результат: ' + JSON.stringify(matches);
      } else {
        resultDiv.textContent = 'Результат: Совпадений не найдено.';
      }
    } catch (error) {
      resultDiv.textContent = 'Ошибка: ' + error.message;
    }
  });
});`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
