import { Sandpack } from '@codesandbox/sandpack-react'
## JavaScript: –ú–æ–∑–≥–∏. –£—Ä–æ–∫: flat, flatMap

–ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä–µ–º –ø–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã –º–∞—Å—Å–∏–≤–æ–≤: `flat` –∏ `flatMap`. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏, —É–ø—Ä–æ—â–∞—è –∫–æ–¥ –∏ –¥–µ–ª–∞—è –µ–≥–æ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º.

### –ß—Ç–æ —Ç–∞–∫–æ–µ flat?

–ú–µ—Ç–æ–¥ `flat()` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–¥–º–∞—Å—Å–∏–≤–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ "–ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è" –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –≥–ª—É–±–∏–Ω—É.  –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ –º–∞—Ç—Ä–µ—à–∫—É, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∞—Ç—å –≤—Å–µ —Ñ–∏–≥—É—Ä–∫–∏.

```javascript
// –ü—Ä–∏–º–µ—Ä 1: –ú–∞—Å—Å–∏–≤ –º–∞—Å—Å–∏–≤–æ–≤
const arr1 = [1, 2, [3, 4]];
console.log(arr1.flat()); // Output: [1, 2, 3, 4]

// –ü—Ä–∏–º–µ—Ä 2: –ú–∞—Å—Å–∏–≤ —Å –±–æ–ª—å—à–µ–π –≥–ª—É–±–∏–Ω–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
const arr2 = [1, 2, [3, 4, [5, 6]]];
console.log(arr2.flat()); // Output: [1, 2, 3, 4, [5, 6]] (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–ª—É–±–∏–Ω–∞ 1)

// –ü—Ä–∏–º–µ—Ä 3: –£–∫–∞–∑—ã–≤–∞–µ–º –≥–ª—É–±–∏–Ω—É —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
console.log(arr2.flat(2)); // Output: [1, 2, 3, 4, 5, 6]

// –ü—Ä–∏–º–µ—Ä 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Infinity –¥–ª—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–æ –∫–æ–Ω—Ü–∞
const arr3 = [1, 2, [3, 4, [5, 6, [7, 8, [9, 10]]]]];
console.log(arr3.flat(Infinity)); // Output: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

// –ü—Ä–∏–º–µ—Ä 5: –ü—Ä–æ–ø—É—Å–∫ –ø—É—Å—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤
const arr4 = [1, 2, , 4, 5];
console.log(arr4.flat()); // Output: [1, 2, 4, 5] (–ø—É—Å—Ç—ã–µ —Å–ª–æ—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è)
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ flatMap?

–ú–µ—Ç–æ–¥ `flatMap()` —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –º–∞—Å—Å–∏–≤–∞, –∞ –∑–∞—Ç–µ–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤.  –≠—Ç–æ –∫–∞–∫ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è `map` –∏ `flat` (—Å –≥–ª—É–±–∏–Ω–æ–π 1).  –û–Ω –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω, —á–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `map` –∏ `flat`, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è `map` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤—ã.

```javascript
// –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ
const arr = ["it's Sunny in", "", "California"];

const result = arr.flatMap(x => x.split(" "));

console.log(result); // Output: ["it's", "Sunny", "in", "", "California"]

// –ü—Ä–∏–º–µ—Ä 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ split)
const arr2 = ["it's Sunny in", "", "California"];

const result2 = arr2.flatMap(x => x.split(" ")).filter(x => x !== "");

console.log(result2); // Output: ["it's", "Sunny", "in", "California"]

// –ü—Ä–∏–º–µ—Ä 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —á–∏—Å–ª–∞–º–∏
const numbers = [1, 2, 3, 4, 5];

const squaredPairs = numbers.flatMap(num => [num * num, num * num * num]);

console.log(squaredPairs); // Output: [1, 1, 4, 8, 9, 27, 16, 64, 25, 125]
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –ö–∞–∂–¥—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Ä–∞–∑–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∏–Ω–æ–≥–¥–∞ –≤ –≤–∏–¥–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤.

```javascript
// –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
const commentsFromApi1 = ["Comment 1", "Comment 2"];
const commentsFromApi2 = ["Comment 3", ["Comment 4", "Comment 5"]];
const commentsFromApi3 = ["Comment 6"];

const allComments = [commentsFromApi1, commentsFromApi2, commentsFromApi3];

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ flat –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–ª–æ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
const flattenedComments = allComments.flat();

console.log(flattenedComments); // Output: ["Comment 1", "Comment 2", "Comment 3", ["Comment 4", "Comment 5"], "Comment 6"]

// –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏:
const fullyFlattenedComments = allComments.flat(Infinity);
console.log(fullyFlattenedComments); // Output: ["Comment 1", "Comment 2", "Comment 3", "Comment 4", "Comment 5", "Comment 6"]

// –ü—Ä–∏–º–µ—Ä —Å flatMap: –î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –º–∞—Å—Å–∏–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –∏ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —Å–ª–æ–≤
const sentences = ["Hello World", "JavaScript is fun", ""];
const words = sentences.flatMap(sentence => sentence.split(" "));
console.log(words); // Output: ["Hello", "World", "JavaScript", "is", "fun", ""]
```

–í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, `flat` –∏ `flatMap` —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ API, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM-—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —ç–ª–µ–º–µ–Ω—Ç–∞, –≤–∫–ª—é—á–∞—è —ç–ª–µ–º–µ–Ω—Ç—ã –≤–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö), –∏ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.  –ú–Ω–æ–≥–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (React, Vue, Angular) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≤–Ω—É—Ç—Ä–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

### –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

*   `flat()` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø–ª–æ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –∏–∑ –º–Ω–æ–≥–æ–º–µ—Ä–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞.
*   –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≥–ª—É–±–∏–Ω—É —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1).
*   `flat(Infinity)` —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤ –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–ª—É–±–∏–Ω—ã.
*   `flatMap()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç `map` –∏ `flat` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Å –≥–ª—É–±–∏–Ω–æ–π 1).
*   `flatMap()` —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `map` –∏ `flat`.
*   –û–±–∞ –º–µ—Ç–æ–¥–∞ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ API –∏–ª–∏ DOM.

### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Sandpack template="vanilla">

```js
const app = document.querySelector('#app');

app.innerHTML = `
  <h2>üìè flat() –∏ flatMap()</h2>
  
  <div style="display: grid; gap: 10px; margin: 20px 0;">
    <button class="demo-btn" data-demo="flatBasic">
      1Ô∏è‚É£ flat() - –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
    </button>
    <button class="demo-btn" data-demo="flatDepth">
      2Ô∏è‚É£ flat(depth) - –ì–ª—É–±–∏–Ω–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
    </button>
    <button class="demo-btn" data-demo="flatInfinity">
      3Ô∏è‚É£ flat(Infinity) - –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ
    </button>
    <button class="demo-btn" data-demo="flatMapSplit">
      4Ô∏è‚É£ flatMap() - Split —Å—Ç—Ä–æ–∫
    </button>
    <button class="demo-btn" data-demo="flatMapNumbers">
      5Ô∏è‚É£ flatMap() - –†–∞–±–æ—Ç–∞ —Å —á–∏—Å–ª–∞–º–∏
    </button>
    <button class="demo-btn" data-demo="realWorld">
      üåç –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä - API –¥–∞–Ω–Ω—ã–µ
    </button>
  </div>
  
  <div id="output" style="background: #f5f5f5; padding: 20px; border-radius: 8px; font-family: monospace; font-size: 13px; min-height: 200px;"></div>
`;

const output = document.querySelector('#output');

function log(message, color = '#333') {
  output.innerHTML += `<div style="color: ${color}; margin: 5px 0; line-height: 1.6;">${message}</div>`;
  console.log(message);
}

function clearOutput() {
  output.innerHTML = '';
}

function showArray(label, arr, color = '#2196F3') {
  log(`<strong style="color: ${color};">${label}:</strong>`, color);
  log(`   ${JSON.stringify(arr)}`, '#666');
}

const demos = {
  flatBasic: () => {
    clearOutput();
    log('1Ô∏è‚É£ <strong>flat()</strong> - –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ', '#2196F3');
    log('');
    
    const arr = [1, 2, [3, 4], 5];
    showArray('–ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤', arr);
    
    const flattened = arr.flat();
    showArray('–ü–æ—Å–ª–µ flat()', flattened, '#4CAF50');
    
    log('');
    log('üí° flat() –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å', '#999');
  },
  
  flatDepth: () => {
    clearOutput();
    log('2Ô∏è‚É£ <strong>flat(depth)</strong> - –£–∫–∞–∑–∞–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã', '#FF9800');
    log('');
    
    const arr = [1, 2, [3, 4, [5, 6]]];
    showArray('–ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤ (2 —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)', arr);
    
    log('');
    const flat1 = arr.flat(1);
    showArray('flat(1) - 1 —É—Ä–æ–≤–µ–Ω—å', flat1, '#2196F3');
    
    const flat2 = arr.flat(2);
    showArray('flat(2) - 2 —É—Ä–æ–≤–Ω—è', flat2, '#4CAF50');
  },
  
  flatInfinity: () => {
    clearOutput();
    log('3Ô∏è‚É£ <strong>flat(Infinity)</strong> - –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ', '#9C27B0');
    log('');
    
    const arr = [1, [2, [3, [4, [5, [6, 7]]]]]];
    showArray('–ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤ (–≥–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)', arr);
    
    log('');
    const flattened = arr.flat(Infinity);
    showArray('–ü–æ—Å–ª–µ flat(Infinity)', flattened, '#4CAF50');
    
    log('');
    log('üí° Infinity —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤ –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≥–ª—É–±–∏–Ω—ã', '#999');
  },
  
  flatMapSplit: () => {
    clearOutput();
    log('4Ô∏è‚É£ <strong>flatMap()</strong> - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫', '#00BCD4');
    log('');
    
    const sentences = ["Hello World", "JavaScript is fun"];
    showArray('–ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤', sentences);
    
    log('');
    log('–ö–æ–¥: sentences.flatMap(s => s.split(" "))', '#666');
    
    const words = sentences.flatMap(s => s.split(" "));
    showArray('–†–µ–∑—É–ª—å—Ç–∞—Ç flatMap', words, '#4CAF50');
    
    log('');
    log('üí° flatMap = map + flat (–≥–ª—É–±–∏–Ω–∞ 1)', '#999');
    
    log('');
    log('<strong>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å map + flat:</strong>', '#E91E63');
    const withMap = sentences.map(s => s.split(" "));
    showArray('1. map(s => s.split(" "))', withMap, '#666');
    const thenFlat = withMap.flat();
    showArray('2. .flat()', thenFlat, '#666');
  },
  
  flatMapNumbers: () => {
    clearOutput();
    log('5Ô∏è‚É£ <strong>flatMap()</strong> - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä —á–∏—Å–µ–ª', '#E91E63');
    log('');
    
    const numbers = [1, 2, 3];
    showArray('–ò—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤', numbers);
    
    log('');
    log('–ö–æ–¥: numbers.flatMap(n => [n, n * 2])', '#666');
    
    const pairs = numbers.flatMap(n => [n, n * 2]);
    showArray('–†–µ–∑—É–ª—å—Ç–∞—Ç - –∫–∞–∂–¥–æ–µ —á–∏—Å–ª–æ –∏ –µ–≥–æ —É–¥–≤–æ–µ–Ω–∏–µ', pairs, '#4CAF50');
    
    log('');
    log('–î—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä: numbers.flatMap(n => [n, n * n])', '#666');
    const squares = numbers.flatMap(n => [n, n * n]);
    showArray('–ß–∏—Å–ª–æ –∏ –µ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç', squares, '#FF9800');
  },
  
  realWorld: () => {
    clearOutput();
    log('üåç <strong>–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä</strong> - –û–±—Ä–∞–±–æ—Ç–∫–∞ API –¥–∞–Ω–Ω—ã—Ö', '#673AB7');
    log('');
    
    // –°–∏–º—É–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö API
    const apiResponse1 = { comments: ["–û—Ç–ª–∏—á–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç!", "–†–µ–∫–æ–º–µ–Ω–¥—É—é"] };
    const apiResponse2 = { comments: [["–•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ", "–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞"]] };
    const apiResponse3 = { comments: ["–°—É–ø–µ—Ä!"] };
    
    const responses = [apiResponse1, apiResponse2, apiResponse3];
    
    log('–î–∞–Ω–Ω—ã–µ –∏–∑ 3 API:', '#666');
    responses.forEach((r, i) => {
      log(`   API ${i + 1}: ${JSON.stringify(r.comments)}`, '#666');
    });
    
    log('');
    log('<strong>–®–∞–≥ 1:</strong> –ò–∑–≤–ª–µ–∫–∞–µ–º –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏', '#2196F3');
    const allComments = responses.map(r => r.comments);
    showArray('–ü–æ—Å–ª–µ map', allComments, '#666');
    
    log('');
    log('<strong>–®–∞–≥ 2:</strong> –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º flat(2)', '#FF9800');
    const flatComments = allComments.flat(2);
    showArray('–†–µ–∑—É–ª—å—Ç–∞—Ç', flatComments, '#4CAF50');
    
    log('');
    log('üí° –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –ø–ª–æ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤!', '#4CAF50');
    
    log('');
    log('<strong>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:</strong> flatMap –¥–ª—è –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞', '#9C27B0');
    log('–ö–æ–¥: responses.flatMap(r => r.comments).flat()', '#666');
    const alternative = responses.flatMap(r => r.comments).flat();
    showArray('–¢–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç', alternative, '#9C27B0');
  }
};

document.querySelectorAll('.demo-btn').forEach(btn => {
  btn.style.cssText = `
    padding: 12px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    text-align: left;
    transition: all 0.2s;
  `;
  
  btn.addEventListener('mouseover', () => {
    btn.style.transform = 'translateX(3px)';
  });
  
  btn.addEventListener('mouseout', () => {
    btn.style.transform = 'translateX(0)';
  });
  
  btn.addEventListener('click', () => {
    const demo = btn.getAttribute('data-demo');
    demos[demo]();
  });
});

output.innerHTML = '<div style="color: #666; text-align: center; padding: 40px;">üëÜ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏</div>';
```

</Sandpack>
