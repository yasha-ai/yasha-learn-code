## JavaScript: Мозги - Урок по ES Modules


![Иллюстрация к уроку](/lessons/javascript-es-modules.png)
ES Modules (ESM) - это стандартизированный способ организации и повторного использования JavaScript кода. Они позволяют разбивать код на отдельные файлы (модули) и импортировать/экспортировать функциональность между ними.

### Что такое ES Modules?

Представьте, что у вас есть огромная куча LEGO. ES Modules позволяют вам сортировать эти детальки по коробкам (модулям) и брать нужные детальки из нужной коробки, когда они вам нужны. Каждый модуль - это просто отдельный JavaScript файл.

**Экспорт (Export)**: Это процесс "выкладывания" функциональности из модуля, чтобы другие модули могли ее использовать.

**Импорт (Import)**: Это процесс "заимствования" функциональности из другого модуля.

### Примеры кода

**1. Создание модуля (module.js):**

```javascript
// module.js
export function add(a, b) {
  return a + b;
}

export const pi = 3.14159;

function privateFunction() {
  // Эта функция недоступна извне, так как она не экспортирована
  console.log("Это приватная функция");
}
```

**2. Использование модуля (main.js):**

```javascript
// main.js
import { add, pi } from './module.js'; // Укажите путь к вашему модулю

console.log(add(5, 3)); // Выведет 8
console.log(pi); // Выведет 3.14159
```

**3. Экспорт по умолчанию (default export):**

```javascript
// user.js
const user = {
  name: "John Doe",
  age: 30
};

export default user;
```

**4. Импорт по умолчанию:**

```javascript
// app.js
import user from './user.js'; // Можно использовать любое имя для импорта

console.log(user.name); // Выведет "John Doe"
```

**5. Импорт всего модуля:**

```javascript
// math.js
export function multiply(a, b) {
  return a * b;
}

export function divide(a, b) {
  return a / b;
}
```

```javascript
// main.js
import * as MathModule from './math.js';

console.log(MathModule.multiply(5, 2)); // Выведет 10
console.log(MathModule.divide(10, 2)); // Выведет 5
```

### Жизненный пример

ES Modules широко используются в современных JavaScript фреймворках и библиотеках, таких как React, Angular и Vue.js. Они позволяют разработчикам организовывать большие кодовые базы, делая их более поддерживаемыми и масштабируемыми.

Например, в React каждый компонент часто определяется как отдельный модуль, который затем импортируется и используется в других компонентах. Это позволяет создавать сложные пользовательские интерфейсы из небольших, повторно используемых частей.

Кроме того, системы сборки, такие как Webpack, Parcel и Rollup, используют ES Modules для создания оптимизированных бандлов для веб-приложений. Они анализируют зависимости между модулями и объединяют их в один или несколько файлов, которые затем загружаются браузером.

### Ключевые моменты

*   ES Modules - это стандартизированный способ организации JavaScript кода.
*   Используйте `export` для "выкладывания" функциональности из модуля.
*   Используйте `import` для "заимствования" функциональности из другого модуля.
*   Можно экспортировать и импортировать функции, переменные, классы и другие значения.
*   `default export` позволяет экспортировать одно значение по умолчанию из модуля.
*   ES Modules помогают создавать более структурированный, поддерживаемый и масштабируемый код.
*   ES Modules широко используются в современных JavaScript фреймворках и системах сборки.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ES Modules Demo</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>ES Modules Demo</h1>
    <div id="output"></div>
    <input type="number" id="num1" placeholder="Число 1">
    <input type="number" id="num2" placeholder="Число 2">
    <button id="addButton">Сложить</button>
    <button id="multiplyButton">Умножить</button>
    <p>Результат: <span id="result"></span></p>
    <p>Приветствие: <span id="greeting"></span></p>
  </div>
  <script type="module" src="/index.js"></script>
</body>
</html>
`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}

.container {
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
}

input[type="number"] {
  padding: 8px;
  margin: 5px;
  border-radius: 4px;
  border: 1px solid #555;
  background-color: #444;
  color: #eee;
}

button {
  padding: 8px 16px;
  margin: 5px;
  border-radius: 4px;
  border: none;
  background-color: #666;
  color: #eee;
  cursor: pointer;
}

button:hover {
  background-color: #777;
}
`,
    "/index.js": `// math.js - модуль с математическими операциями
import { add, multiply } from './math.js';
import greeting from './greeting.js';

// Получаем элементы DOM
const num1Input = document.getElementById('num1');
const num2Input = document.getElementById('num2');
const addButton = document.getElementById('addButton');
const multiplyButton = document.getElementById('multiplyButton');
const resultSpan = document.getElementById('result');
const greetingSpan = document.getElementById('greeting');

// Обработчик события для кнопки "Сложить"
addButton.addEventListener('click', () => {
  const num1 = parseFloat(num1Input.value);
  const num2 = parseFloat(num2Input.value);

  if (!isNaN(num1) && !isNaN(num2)) {
    const sum = add(num1, num2);
    resultSpan.textContent = sum;
  } else {
    resultSpan.textContent = 'Введите корректные числа';
  }
});

// Обработчик события для кнопки "Умножить"
multiplyButton.addEventListener('click', () => {
  const num1 = parseFloat(num1Input.value);
  const num2 = parseFloat(num2Input.value);

  if (!isNaN(num1) && !isNaN(num2)) {
    const product = multiply(num1, num2);
    resultSpan.textContent = product;
  } else {
    resultSpan.textContent = 'Введите корректные числа';
  }
});

greetingSpan.textContent = greeting;
`,
    "/math.js": `// math.js
export function add(a, b) {
  return a + b;
}

export function multiply(a, b) {
  return a * b;
}
`,
    "/greeting.js": `// greeting.js
const greeting = "Привет, мир! Это ES Modules в действии!";

export default greeting;
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
