```markdown
# JavaScript: Мозги. Урок: Прототипное наследование


![Иллюстрация к уроку](/lessons/javascript-prototypal-inheritance.png)
Прототипное наследование – это ключевой механизм в JavaScript, позволяющий объектам наследовать свойства и методы от других объектов. Понимание этого механизма – фундамент для эффективной работы с JavaScript.

## Что такое прототипное наследование?

В JavaScript каждый объект имеет прототип. Этот прототип – тоже объект. Когда вы обращаетесь к свойству объекта, JavaScript сначала ищет это свойство непосредственно в самом объекте. Если его там нет, он ищет это свойство в прототипе объекта, затем в прототипе прототипа и так далее, пока не достигнет `null`. Этот процесс называется "прототипной цепочкой".

Представьте себе, что прототип - это родитель, а объект - ребенок. Ребенок наследует черты характера и привычки от родителя.

## Практические примеры кода

### Создание объекта и его прототипа

```javascript
// Создаем объект animal
const animal = {
  name: 'Animal',
  eat: function() {
    console.log('Animal is eating');
  }
};

// Создаем объект dog, который наследует от animal
const dog = Object.create(animal);
dog.name = 'Dog'; // Переопределяем свойство name для dog
dog.bark = function() {
  console.log('Woof!');
};

// Теперь dog имеет свойства и методы от animal и свои собственные
console.log(dog.name); // Output: Dog
dog.eat(); // Output: Animal is eating
dog.bark(); // Output: Woof!
```

### Изменение прототипа

```javascript
// Добавим метод в прототип animal
animal.sleep = function() {
  console.log('Animal is sleeping');
};

// Теперь dog тоже имеет метод sleep, даже если мы его не определяли напрямую
dog.sleep(); // Output: Animal is sleeping

// Проверка прототипа
console.log(Object.getPrototypeOf(dog) === animal); // Output: true
```

### Использование конструкторов

```javascript
// Функция-конструктор Animal
function Animal(name) {
  this.name = name;
}

Animal.prototype.eat = function() {
  console.log(this.name + ' is eating');
};

// Создаем объект dog с помощью конструктора
const cat = new Animal('Cat');
cat.eat(); // Output: Cat is eating

// Добавляем метод в прототип Animal после создания объекта cat
Animal.prototype.meow = function() {
    console.log("Meow!")
}

cat.meow(); // Output: Meow!
```

## Жизненный пример

Прототипное наследование активно используется во многих JavaScript-фреймворках и библиотеках, таких как React, Angular и Vue.js. Например, компоненты в React часто наследуют методы и свойства от базового класса `React.Component`. Это позволяет повторно использовать код и создавать более структурированные приложения.

В DOM API, элементы наследуют свойства и методы от `HTMLElement`, который в свою очередь наследует от `Element`, а `Element` от `Node`.  Это значит, что каждый DOM элемент, например `<p>` или `<div>`, имеет доступ к общим методам, таким как `appendChild`, `addEventListener` и другим.

## Ключевые моменты

*   Каждый объект в JavaScript имеет прототип.
*   Прототип - это тоже объект.
*   Свойства и методы ищутся в прототипной цепочке.
*   Можно изменять прототипы существующих объектов.
*   Конструкторы используются для создания объектов с общим прототипом.
*   Прототипное наследование – важный механизм для повторного использования кода и создания иерархии объектов.
```


## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Прототипное наследование</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Прототипное наследование</h1>
    <p>Введите имя питомца:</p>
    <input type="text" id="petName" value="Барсик">
    <button id="createCat">Создать кота</button>
    <div id="output"></div>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
}

input[type="text"] {
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #555;
  background-color: #444;
  color: #eee;
  border-radius: 4px;
}

button {
  padding: 8px 12px;
  background-color: #555;
  color: #eee;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #777;
}

#output {
  margin-top: 20px;
  padding: 10px;
  border: 1px solid #555;
  border-radius: 4px;
  background-color: #444;
}`,
    "/index.js": `// Функция-конструктор Animal
function Animal(name) {
  this.name = name;
}

// Добавляем метод в прототип Animal
Animal.prototype.eat = function() {
  return this.name + ' ест.';
};

// Функция-конструктор Cat, наследующая от Animal
function Cat(name, breed) {
  Animal.call(this, name); // Вызываем конструктор Animal в контексте Cat
  this.breed = breed;
}

// Устанавливаем прототип Cat как Animal.prototype, чтобы Cat наследовал от Animal
Cat.prototype = Object.create(Animal.prototype);

// Указываем конструктор Cat, чтобы не был Animal
Cat.prototype.constructor = Cat;

// Добавляем метод meow в прототип Cat
Cat.prototype.meow = function() {
  return "Мяу! Меня зовут " + this.name + " и я породы " + this.breed + ".";
};

// Получаем элементы DOM
const petNameInput = document.getElementById('petName');
const createCatButton = document.getElementById('createCat');
const outputDiv = document.getElementById('output');

// Обработчик клика на кнопку "Создать кота"
createCatButton.addEventListener('click', function() {
  const petName = petNameInput.value;
  const cat = new Cat(petName, "Дворовый кот");

  // Выводим информацию о коте
  let outputText = cat.meow() + "<br>" + cat.eat();
  outputDiv.innerHTML = outputText;
});`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
