## JavaScript: Мозги. Урок "DOM манипуляции"


![Иллюстрация к уроку](/lessons/javascript-dom-manipulation.png)
DOM манипуляции – это краеугольный камень интерактивных веб-сайтов. Освоив их, вы сможете динамически изменять структуру, стили и контент веб-страницы с помощью JavaScript.

### Что такое DOM?

DOM (Document Object Model) – это представление HTML-документа в виде дерева объектов. Каждый HTML-элемент, атрибут и даже текст является узлом (node) в этом дереве.  JavaScript позволяет "ходить" по этому дереву, находить нужные элементы и изменять их.

### Основы DOM манипуляций

Самые часто используемые методы для работы с DOM:

*   `document.getElementById()` -  Получение элемента по его ID.
*   `document.querySelector()` - Получение первого элемента, соответствующего CSS-селектору.
*   `document.querySelectorAll()` - Получение всех элементов, соответствующих CSS-селектору.
*   `element.innerHTML` - Получение или изменение HTML-содержимого элемента.
*   `element.textContent` - Получение или изменение текстового содержимого элемента.
*   `element.setAttribute()` -  Установка значения атрибута элемента.
*   `element.getAttribute()` - Получение значения атрибута элемента.
*   `element.classList.add()` - Добавление CSS-класса к элементу.
*   `element.classList.remove()` - Удаление CSS-класса из элемента.
*   `element.appendChild()` - Добавление дочернего элемента к элементу.
*   `element.removeChild()` - Удаление дочернего элемента из элемента.

### Практические примеры

**Пример 1: Изменение текста элемента**

```html
<!DOCTYPE html>
<html>
<head>
  <title>DOM Manipulation</title>
</head>
<body>
  <p id="myParagraph">Исходный текст.</p>
  <button onclick="changeText()">Изменить текст</button>

  <script>
    function changeText() {
      // Получаем элемент по ID
      const paragraph = document.getElementById("myParagraph");

      // Изменяем текстовое содержимое
      paragraph.textContent = "Новый текст!";
    }
  </script>
</body>
</html>
```

**Пример 2: Добавление нового элемента**

```html
<!DOCTYPE html>
<html>
<head>
  <title>DOM Manipulation</title>
</head>
<body>
  <ul id="myList">
    <li>Пункт 1</li>
  </ul>
  <button onclick="addItem()">Добавить пункт</button>

  <script>
    function addItem() {
      // Получаем список
      const list = document.getElementById("myList");

      // Создаем новый элемент списка
      const newItem = document.createElement("li");
      newItem.textContent = "Новый пункт";

      // Добавляем новый пункт в список
      list.appendChild(newItem);
    }
  </script>
</body>
</html>
```

**Пример 3: Изменение CSS класса**

```html
<!DOCTYPE html>
<html>
<head>
  <title>DOM Manipulation</title>
  <style>
    .highlight {
      background-color: yellow;
    }
  </style>
</head>
<body>
  <p id="myElement">Этот элемент нужно выделить.</p>
  <button onclick="highlightElement()">Выделить</button>

  <script>
    function highlightElement() {
      const element = document.getElementById("myElement");
      element.classList.add("highlight");
    }
  </script>
</body>
</html>
```

### Жизненный пример

DOM манипуляции активно используются в современных веб-фреймворках, таких как React, Angular и Vue.js. Например, React использует концепцию "Virtual DOM", чтобы эффективно обновлять пользовательский интерфейс. Когда данные в приложении React меняются, React сравнивает виртуальный DOM с реальным DOM и применяет только необходимые изменения, что значительно повышает производительность.  В более простых сценариях, DOM манипуляции используются для создания интерактивных элементов, таких как выпадающие меню, модальные окна, и для динамической фильтрации контента на сайтах электронной коммерции.

### Ключевые моменты

*   DOM представляет собой структуру HTML-документа в виде дерева.
*   JavaScript предоставляет множество методов для доступа и изменения DOM.
*   DOM манипуляции позволяют создавать динамические и интерактивные веб-сайты.
*   Эффективное использование DOM манипуляций важно для оптимизации производительности веб-приложений.
*   Современные веб-фреймворки активно используют DOM манипуляции для управления пользовательским интерфейсом.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOM Manipulation Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>DOM Manipulation</h1>

    <div id="interactiveArea">
      <p id="dynamicText">Начальный текст</p>
      <button id="changeTextButton">Изменить текст</button>

      <input type="text" id="userInput" placeholder="Введите текст">
      <button id="updateTextButton">Обновить текст</button>

      <ul id="itemList">
        <li>Элемент 1</li>
        <li>Элемент 2</li>
      </ul>
      <button id="addItemButton">Добавить элемент</button>
    </div>
  </div>

  <script src="/index.js"></script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #282c34;
  color: #fff;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  width: 80%;
  max-width: 600px;
  text-align: center;
}

#interactiveArea {
  margin-top: 20px;
}

button {
  background-color: #61dafb;
  color: #282c34;
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  margin: 5px;
}

button:hover {
  background-color: #47a7c7;
}

input[type="text"] {
  padding: 8px;
  border-radius: 5px;
  border: 1px solid #ccc;
  margin: 5px;
  background-color: #444;
  color: #fff;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  padding: 8px;
  margin: 5px 0;
  background-color: #444;
  border-radius: 5px;
}
`,
    "/index.js": `// Получаем элементы DOM
const dynamicText = document.getElementById("dynamicText");
const changeTextButton = document.getElementById("changeTextButton");
const userInput = document.getElementById("userInput");
const updateTextButton = document.getElementById("updateTextButton");
const itemList = document.getElementById("itemList");
const addItemButton = document.getElementById("addItemButton");

// Функция для изменения текста
function changeText() {
  dynamicText.textContent = "Текст был изменен!";
}

// Функция для обновления текста из поля ввода
function updateText() {
  const newText = userInput.value;
  dynamicText.textContent = newText;
}

// Функция для добавления нового элемента в список
function addItem() {
  const newItem = document.createElement("li");
  newItem.textContent = "Новый элемент";
  itemList.appendChild(newItem);
}

// Добавляем обработчики событий
changeTextButton.addEventListener("click", changeText);
updateTextButton.addEventListener("click", updateText);
addItemButton.addEventListener("click", addItem);
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
