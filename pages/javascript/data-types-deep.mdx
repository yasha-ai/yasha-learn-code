## JavaScript: Мозги. Урок 2: Типы данных: примитивы vs объекты


![Иллюстрация к уроку](/lessons/javascript-data-types-deep.png)
JavaScript оперирует данными. Чтобы эффективно работать с данными, важно понимать, как они хранятся и как с ними взаимодействовать. В этом уроке мы рассмотрим два основных типа данных в JavaScript: примитивы и объекты.

### Примитивные типы данных

Примитивные типы данных представляют собой простые значения. Они хранятся непосредственно в переменной. JavaScript имеет следующие примитивные типы:

*   `string` (строка)
*   `number` (число)
*   `boolean` (логическое значение)
*   `null` (пустое значение)
*   `undefined` (неопределенное значение)
*   `symbol` (символ, появился в ES6)
*   `bigint` (большие числа, появился в ES2020)

Примеры:

```javascript
let name = "Alice"; // string
let age = 30;       // number
let isStudent = false; // boolean
let empty = null;      // null
let notDefined;       // undefined

console.log(typeof name); // string
console.log(typeof age); // number
console.log(typeof isStudent); // boolean
console.log(typeof empty); // object (да, это историческая ошибка JavaScript)
console.log(typeof notDefined); // undefined
```

Важно понимать, что при присваивании примитивного типа данных другой переменной, создается *копия* значения. Изменение одной переменной не повлияет на другую.

```javascript
let a = 10;
let b = a;
b = 20;

console.log(a); // 10
console.log(b); // 20
```

### Объекты

Объекты в JavaScript – это более сложные структуры данных. Они могут содержать несколько свойств, каждое из которых имеет имя (ключ) и значение. Значение может быть любым типом данных, включая другие объекты.

```javascript
let person = {
  name: "Bob",
  age: 25,
  city: "New York"
};

console.log(person.name); // Bob
console.log(person.age);  // 25

let numbers = [1, 2, 3, 4, 5]; // Массив - это тоже объект!

console.log(numbers[0]); // 1
```

В отличие от примитивов, объекты передаются *по ссылке*. Это значит, что при присваивании объекта другой переменной, создается не копия объекта, а ссылка на тот же самый объект в памяти. Изменение объекта через одну переменную отразится на другой.

```javascript
let obj1 = { value: 10 };
let obj2 = obj1;

obj2.value = 20;

console.log(obj1.value); // 20
console.log(obj2.value); // 20
```

### Жизненный пример

Различие между примитивами и объектами критически важно при работе с DOM. Например, когда вы получаете элемент DOM и сохраняете его в переменную, вы получаете ссылку на этот элемент. Если вы измените свойства этого элемента через эту переменную, изменения отразятся непосредственно на странице.

```html
<!DOCTYPE html>
<html>
<head>
  <title>Пример DOM</title>
</head>
<body>
  <div id="myDiv">Привет, мир!</div>

  <script>
    let myDiv = document.getElementById("myDiv"); // Получаем ссылку на элемент
    myDiv.textContent = "Новый текст!"; // Меняем текст элемента

    // Теперь текст элемента на странице изменится
  </script>
</body>
</html>
```

Во фреймворках React, Vue и Angular понимание разницы между примитивами и объектами необходимо для эффективной работы с состоянием (state) компонентов. Изменение состояния, которое является объектом, должно выполняться с использованием методов, которые создают новые объекты (например, с помощью оператора spread `...`), чтобы React мог определить изменения и перерисовать компонент. Если вы напрямую измените объект состояния, React может не заметить изменения, что приведет к проблемам с отображением.

### Ключевые моменты

*   Примитивные типы данных хранят простые значения непосредственно.
*   Объекты хранят сложные структуры данных и передаются по ссылке.
*   При присваивании примитива создается копия, при присваивании объекта создается ссылка.
*   Понимание разницы между примитивами и объектами критически важно для работы с DOM и фреймворками JavaScript.
*   `typeof null` возвращает `object` - это историческая особенность JavaScript, которую нужно помнить.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html>
<head>
  <title>Примитивы vs Объекты</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Примитивы vs Объекты</h1>

    <div id="primitiveExample">
      <h2>Примитивы</h2>
      <p>a: <span id="primitiveA"></span></p>
      <p>b: <span id="primitiveB"></span></p>
      <button id="primitiveButton">Изменить b</button>
    </div>

    <div id="objectExample">
      <h2>Объекты</h2>
      <p>obj1.value: <span id="object1Value"></span></p>
      <p>obj2.value: <span id="object2Value"></span></p>
      <button id="objectButton">Изменить obj2.value</button>
    </div>

    <div id="domExample">
      <h2>DOM Пример</h2>
      <div id="myDiv">Привет, мир!</div>
      <input type="text" id="domInput" value="Новый текст">
      <button id="domButton">Изменить текст DOM элемента</button>
    </div>
  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}

#primitiveExample, #objectExample, #domExample {
  margin-bottom: 20px;
  padding: 15px;
  border: 1px solid #555;
  border-radius: 5px;
}

button {
  background-color: #61dafb;
  border: none;
  padding: 8px 12px;
  border-radius: 5px;
  cursor: pointer;
  color: #222;
  font-weight: bold;
}

input[type="text"] {
  padding: 8px;
  border-radius: 5px;
  border: 1px solid #555;
  background-color: #333;
  color: #eee;
}
`,
    "/index.js": `// Примеры с примитивами
let a = 10;
let b = a;

document.getElementById("primitiveA").textContent = a;
document.getElementById("primitiveB").textContent = b;

document.getElementById("primitiveButton").addEventListener("click", () => {
  b = 20;
  document.getElementById("primitiveB").textContent = b;
  document.getElementById("primitiveA").textContent = a; // a не изменится
});

// Примеры с объектами
let obj1 = { value: 10 };
let obj2 = obj1;

document.getElementById("object1Value").textContent = obj1.value;
document.getElementById("object2Value").textContent = obj2.value;

document.getElementById("objectButton").addEventListener("click", () => {
  obj2.value = 20;
  document.getElementById("object1Value").textContent = obj1.value; // obj1 тоже изменится
  document.getElementById("object2Value").textContent = obj2.value;
});

// DOM Пример
let myDiv = document.getElementById("myDiv");
let domInput = document.getElementById("domInput");

document.getElementById("domButton").addEventListener("click", () => {
  myDiv.textContent = domInput.value;
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
