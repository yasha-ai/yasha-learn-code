## JavaScript: Set - Уникальный набор данных


![Иллюстрация к уроку](/lessons/javascript-set.png)
Set в JavaScript – это структура данных, которая позволяет хранить только уникальные значения, независимо от их типа. Он полезен, когда вам нужно быстро проверить наличие элемента или удалить дубликаты из массива.

### Что такое Set?

Set – это объект, который хранит коллекцию значений, где каждое значение может встречаться только один раз. Порядок добавления элементов в Set сохраняется.

```javascript
// Создание нового Set
const mySet = new Set();

// Добавление элементов
mySet.add(1);
mySet.add(2);
mySet.add(3);
mySet.add(1); // Этот элемент не будет добавлен, так как он уже есть

console.log(mySet); // Set(3) { 1, 2, 3 }
```

### Основные методы Set

*   `add(value)`: Добавляет новое значение в Set.
*   `delete(value)`: Удаляет значение из Set. Возвращает `true`, если значение было удалено, и `false` в противном случае.
*   `has(value)`: Проверяет, есть ли значение в Set. Возвращает `true` или `false`.
*   `clear()`: Удаляет все элементы из Set.
*   `size`: Возвращает количество элементов в Set.

```javascript
const mySet = new Set([1, 2, 3]);

console.log(mySet.has(2)); // true
console.log(mySet.delete(2)); // true
console.log(mySet.has(2)); // false
console.log(mySet.size); // 2

mySet.clear();
console.log(mySet.size); // 0
```

### Итерация по Set

Вы можете перебирать элементы Set с помощью цикла `for...of` или метода `forEach`.

```javascript
const mySet = new Set(['apple', 'banana', 'cherry']);

// Используем for...of
for (const item of mySet) {
  console.log(item);
}

// Используем forEach
mySet.forEach(item => {
  console.log(item);
});
```

### Преобразование Set в массив

Иногда вам может потребоваться преобразовать Set обратно в массив. Это можно сделать с помощью оператора расширения (`...`).

```javascript
const mySet = new Set([1, 2, 3]);
const myArray = [...mySet];

console.log(myArray); // [1, 2, 3]
```

### Жизненный пример

Set часто используется для удаления дубликатов из массивов. Например, при получении данных с сервера, которые могут содержать повторяющиеся записи.

```javascript
const data = [1, 2, 2, 3, 4, 4, 5];

// Удаляем дубликаты с помощью Set
const uniqueData = [...new Set(data)];

console.log(uniqueData); // [1, 2, 3, 4, 5]
```

В React часто применяют Set для отслеживания выбранных элементов в списке. Например, пользователь выбирает несколько элементов из списка, и нужно хранить только уникальные идентификаторы этих элементов.

```javascript
// Пример в React (псевдокод)
const [selectedItems, setSelectedItems] = React.useState(new Set());

const handleItemClick = (itemId) => {
  setSelectedItems(prevItems => {
    const newItems = new Set(prevItems);
    if (newItems.has(itemId)) {
      newItems.delete(itemId);
    } else {
      newItems.add(itemId);
    }
    return newItems;
  });
};
```

### Ключевые моменты

*   Set хранит только уникальные значения.
*   Порядок добавления элементов сохраняется.
*   Основные методы: `add`, `delete`, `has`, `clear`, `size`.
*   Можно итерировать с помощью `for...of` и `forEach`.
*   Легко преобразуется в массив с помощью оператора расширения.
*   Часто используется для удаления дубликатов и отслеживания уникальных элементов.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript Set Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div id="app">
    <h1>Уникальный список дел</h1>
    <input type="text" id="taskInput" placeholder="Добавить задачу">
    <button id="addTaskButton">Добавить</button>
    <ul id="taskList"></ul>
    <p>Всего задач: <span id="taskCount">0</span></p>
    <button id="clearTasksButton">Очистить список</button>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

#app {
  max-width: 600px;
  margin: 0 auto;
  background-color: #333;
  padding: 20px;
  border-radius: 8px;
}

input[type="text"] {
  padding: 8px;
  border: 1px solid #555;
  background-color: #444;
  color: #eee;
  border-radius: 4px;
  width: 70%;
  margin-right: 10px;
}

button {
  padding: 8px 12px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #367c39;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  padding: 8px;
  border-bottom: 1px solid #555;
}

li:last-child {
  border-bottom: none;
}
`,
    "/index.js": `// Получаем элементы DOM
const taskInput = document.getElementById('taskInput');
const addTaskButton = document.getElementById('addTaskButton');
const taskList = document.getElementById('taskList');
const taskCount = document.getElementById('taskCount');
const clearTasksButton = document.getElementById('clearTasksButton');

// Создаем Set для хранения уникальных задач
const tasks = new Set();

// Функция для обновления списка задач в DOM
function updateTaskList() {
  taskList.innerHTML = ''; // Очищаем список
  tasks.forEach(task => {
    const li = document.createElement('li');
    li.textContent = task;
    taskList.appendChild(li);
  });
  taskCount.textContent = tasks.size; // Обновляем счетчик задач
}

// Обработчик события для добавления задачи
addTaskButton.addEventListener('click', () => {
  const taskText = taskInput.value.trim();
  if (taskText !== '') {
    tasks.add(taskText); // Добавляем задачу в Set (только уникальные)
    updateTaskList(); // Обновляем список задач
    taskInput.value = ''; // Очищаем поле ввода
  }
});

// Обработчик события для очистки списка задач
clearTasksButton.addEventListener('click', () => {
  tasks.clear(); // Очищаем Set
  updateTaskList(); // Обновляем список задач
});

// Инициализация списка задач при загрузке страницы (если есть данные в localStorage)
updateTaskList();
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
