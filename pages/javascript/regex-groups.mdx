```markdown
# JavaScript: Мозги. Урок: Regex Groups


![Иллюстрация к уроку](/lessons/javascript-regex-groups.png)
Regex groups (группы регулярных выражений) позволяют извлекать конкретные части совпадающей строки. Это мощный инструмент для разбора и обработки текста. В этом уроке мы разберемся, как их использовать.

## Что такое Regex Groups?

Regex Groups — это способ выделить отдельные части шаблона регулярного выражения, чтобы потом их использовать.  Они определяются с помощью круглых скобок `( )`.  Когда регулярное выражение с группами применяется к строке, движок regex запоминает части строки, которые соответствуют каждой группе.

### Пример 1: Простое извлечение имени и фамилии

Допустим, у нас есть строка с именем и фамилией, разделенными пробелом, и мы хотим извлечь имя и фамилию отдельно.

```javascript
const nameString = "Иван Иванов";
const regex = /(\w+)\s(\w+)/; // Первая группа: имя, вторая группа: фамилия
const match = nameString.match(regex);

if (match) {
  const firstName = match[1]; // Индекс 0 - вся строка, 1 - первая группа
  const lastName = match[2];  // 2 - вторая группа

  console.log("Имя:", firstName); // Вывод: Имя: Иван
  console.log("Фамилия:", lastName); // Вывод: Фамилия: Иванов
}
```

В этом примере `(\w+)` соответствует одному или нескольким буквенным символам (имя или фамилия), а `\s` соответствует пробелу.  `match[1]` содержит текст, соответствующий первой группе (имя), а `match[2]` — текст, соответствующий второй группе (фамилия).

### Пример 2: Извлечение даты

Предположим, у нас есть дата в формате `YYYY-MM-DD`, и мы хотим извлечь год, месяц и день.

```javascript
const dateString = "2023-10-26";
const regex = /(\d{4})-(\d{2})-(\d{2})/; // Группы: год, месяц, день
const match = dateString.match(regex);

if (match) {
  const year = match[1];
  const month = match[2];
  const day = match[3];

  console.log("Год:", year);   // Вывод: Год: 2023
  console.log("Месяц:", month); // Вывод: Месяц: 10
  console.log("День:", day);   // Вывод: День: 26
}
```

Здесь `\d{4}` соответствует четырем цифрам (год), `\d{2}` соответствует двум цифрам (месяц и день).

### Пример 3: Использование Named Capture Groups (именованные группы захвата)

Начиная с ES2018, можно давать группам имена, что делает код более читаемым.

```javascript
const dateString = "2023-10-26";
const regex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const match = dateString.match(regex);

if (match) {
  const year = match.groups.year;
  const month = match.groups.month;
  const day = match.groups.day;

  console.log("Год:", year);   // Вывод: Год: 2023
  console.log("Месяц:", month); // Вывод: Месяц: 10
  console.log("День:", day);   // Вывод: День: 26
}
```

В этом примере `(?<year>\d{4})` дает группе имя "year". Доступ к захваченным значениям осуществляется через `match.groups.year`.

## Жизненный пример

Regex Groups часто используются в парсинге URL-адресов. Например, можно извлечь протокол, домен и путь из URL.

```javascript
const url = "https://www.example.com/path/to/page";
const regex = /(?<protocol>\w+):\/\/(?<domain>[\w.]+)\/(?<path>.*)/;
const match = url.match(regex);

if (match) {
  const protocol = match.groups.protocol;
  const domain = match.groups.domain;
  const path = match.groups.path;

  console.log("Протокол:", protocol); // Вывод: Протокол: https
  console.log("Домен:", domain);   // Вывод: Домен: www.example.com
  console.log("Путь:", path);     // Вывод: Путь: path/to/page
}
```

Фреймворки, такие как React и Angular, используют регулярные выражения для маршрутизации, где группы используются для извлечения параметров из URL-адреса.  Например, адрес `/users/123` можно разобрать, чтобы получить ID пользователя (123).

## Ключевые моменты

*   Группы определяются круглыми скобками `( )`.
*   Доступ к группам осуществляется через индексы в массиве `match`, начиная с 1 (0 - вся строка).
*   Именованные группы захвата (Named Capture Groups) (`(?<name>...)`) делают код более читаемым.
*   Regex Groups полезны для извлечения и обработки частей текста.
*   Используются в парсинге URL, маршрутизации и других задачах обработки текста.
```


## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html>
<head>
  <title>Regex Groups Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Regex Groups Demo</h1>

    <label for="nameInput">Введите имя и фамилию:</label>
    <input type="text" id="nameInput" placeholder="Иван Иванов">
    <button id="nameButton">Извлечь имя и фамилию</button>
    <div id="nameOutput"></div>

    <label for="dateInput">Введите дату (YYYY-MM-DD):</label>
    <input type="text" id="dateInput" placeholder="2023-10-26">
    <button id="dateButton">Извлечь дату</button>
    <div id="dateOutput"></div>

    <label for="urlInput">Введите URL:</label>
    <input type="text" id="urlInput" placeholder="https://www.example.com/path">
    <button id="urlButton">Извлечь части URL</button>
    <div id="urlOutput"></div>
  </div>

  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

label {
  display: block;
  margin-top: 10px;
}

input[type="text"] {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  border: 1px solid #555;
  background-color: #333;
  color: #eee;
  box-sizing: border-box;
}

button {
  padding: 8px 12px;
  margin-top: 10px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
}

button:hover {
  background-color: #3e8e41;
}

#nameOutput, #dateOutput, #urlOutput {
  margin-top: 10px;
  padding: 10px;
  border: 1px solid #555;
  background-color: #333;
}
`,
    "/index.js": `// Пример 1: Извлечение имени и фамилии
const nameInput = document.getElementById("nameInput");
const nameButton = document.getElementById("nameButton");
const nameOutput = document.getElementById("nameOutput");

nameButton.addEventListener("click", () => {
  const nameString = nameInput.value;
  const regex = /(\\w+)\\s(\\w+)/; // Первая группа: имя, вторая группа: фамилия
  const match = nameString.match(regex);

  if (match) {
    const firstName = match[1]; // Индекс 0 - вся строка, 1 - первая группа
    const lastName = match[2];  // 2 - вторая группа

    nameOutput.textContent = \`Имя: \${firstName}, Фамилия: \${lastName}\`;
  } else {
    nameOutput.textContent = "Некорректный формат имени.";
  }
});

// Пример 2: Извлечение даты
const dateInput = document.getElementById("dateInput");
const dateButton = document.getElementById("dateButton");
const dateOutput = document.getElementById("dateOutput");

dateButton.addEventListener("click", () => {
  const dateString = dateInput.value;
  const regex = /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/; // Группы: год, месяц, день
  const match = dateString.match(regex);

  if (match) {
    const year = match.groups.year;
    const month = match.groups.month;
    const day = match.groups.day;

    dateOutput.textContent = \`Год: \${year}, Месяц: \${month}, День: \${day}\`;
  } else {
    dateOutput.textContent = "Некорректный формат даты.";
  }
});

// Пример 3: Извлечение частей URL
const urlInput = document.getElementById("urlInput");
const urlButton = document.getElementById("urlButton");
const urlOutput = document.getElementById("urlOutput");

urlButton.addEventListener("click", () => {
  const urlString = urlInput.value;
  const regex = /(?<protocol>\\w+):\\/\\/(?<domain>[^/]+)\\/?(?<path>.*)/;
  const match = urlString.match(regex);

  if (match) {
    const protocol = match.groups.protocol;
    const domain = match.groups.domain;
    const path = match.groups.path;

    urlOutput.textContent = \`Протокол: \${protocol}, Домен: \${domain}, Путь: \${path}\`;
  } else {
    urlOutput.textContent = "Некорректный формат URL.";
  }
});
`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
