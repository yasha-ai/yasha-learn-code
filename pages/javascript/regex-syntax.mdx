## JavaScript: Мозги. Regex Syntax


![Иллюстрация к уроку](/lessons/javascript-regex-syntax.png)
Регулярные выражения (Regex) – мощный инструмент для поиска, сопоставления и манипулирования текстом. В этом уроке мы разберемся с основными элементами синтаксиса Regex в JavaScript, чтобы вы могли эффективно использовать их в своих проектах.

### Основы Regex Syntax

Регулярное выражение – это последовательность символов, определяющая шаблон поиска. В JavaScript, Regex создаются двумя способами:

1.  **Литеральная нотация:** `/шаблон/флаги`
2.  **Конструктор `RegExp`:** `new RegExp('шаблон', 'флаги')`

**Простейший пример:**

```javascript
// Литеральная нотация
const regexLiteral = /hello/;

// Конструктор RegExp
const regexConstructor = new RegExp('world');
```

**Основные элементы синтаксиса:**

*   **Обычные символы:** Соответствуют самим себе. Например, `/abc/` соответствует строке "abc".
*   **Метасимволы:** Имеют специальное значение.

    *   `.` (точка): Соответствует любому символу, кроме новой строки.
    *   `^` (карет): Соответствует началу строки.
    *   `$` (доллар): Соответствует концу строки.
    *   `*` (звездочка): Соответствует предыдущему символу 0 или более раз.
    *   `+` (плюс): Соответствует предыдущему символу 1 или более раз.
    *   `?` (вопросительный знак): Соответствует предыдущему символу 0 или 1 раз.
    *   `[]` (квадратные скобки): Определяют набор символов. `[abc]` соответствует 'a', 'b' или 'c'.
    *   `[^]` (карет в скобках): Отрицание набора символов. `[^abc]` соответствует любому символу, кроме 'a', 'b' или 'c'.
    *   `|` (вертикальная черта): Альтернатива. `a|b` соответствует 'a' или 'b'.
    *   `()` (круглые скобки): Группировка и захват.
    *   `\` (обратный слеш): Экранирование метасимволов. `\.` соответствует точке.

**Примеры:**

```javascript
const text = "This is a test string with numbers 123 and special characters like $#@.";

// Соответствует строке, начинающейся с "This"
const startsWithThis = /^This/;
console.log(startsWithThis.test(text)); // true

// Соответствует строке, заканчивающейся на "."
const endsWithDot = /\.$/;
console.log(endsWithDot.test(text)); // true

// Соответствует любому символу, повторяющемуся 3 раза
const threeAnyCharacters = /.../;
console.log(threeAnyCharacters.test(text)); // true

// Соответствует цифрам
const digits = /[0-9]+/;
console.log(digits.test(text)); // true

// Соответствует специальным символам
const specialChars = /[$#@]+/;
console.log(specialChars.test(text)); // true
```

**Флаги:**

*   `g` (global): Поиск всех совпадений, а не только первого.
*   `i` (ignore case): Игнорировать регистр при поиске.
*   `m` (multiline): Включает многострочный режим.

```javascript
const text = "Hello world\nhello WORLD";

// Поиск всех "hello", игнорируя регистр
const allHelloIgnoreCase = /hello/gi;
console.log(text.match(allHelloIgnoreCase)); // ["Hello", "hello"]
```

### Жизненный пример

Regex широко используются в веб-разработке. Например, для:

*   **Валидации форм:** Проверка правильности введенных email, номеров телефонов и т.д.
*   **Поиска и замены текста:** В редакторах кода, текстовых процессорах.
*   **Парсинга URL:** Извлечение информации из URL-адресов.
*   **Маршрутизации в веб-фреймворках:** Определение, какой обработчик должен быть вызван для определенного URL.

Многие JavaScript-фреймворки, такие как React, Angular и Vue.js, используют Regex для валидации данных, маршрутизации и других задач. Например, валидация email в React может выглядеть так:

```javascript
function validateEmail(email) {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return regex.test(email);
}

console.log(validateEmail("test@example.com")); // true
console.log(validateEmail("invalid-email")); // false
```

### Ключевые моменты

*   Regex – мощный инструмент для работы с текстом.
*   Синтаксис Regex может показаться сложным, но он становится понятным с практикой.
*   Используйте онлайн-инструменты для тестирования ваших Regex.
*   Regex широко используются в веб-разработке, особенно для валидации и обработки текста.
*   Не бойтесь экспериментировать и искать примеры в интернете.



## Интерактивный пример

<Sandpack
  template="vanilla"
  files={{
    "/index.html": `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Regex Syntax Example</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>Regex Syntax Example</h1>

    <label for="textInput">Текст для проверки:</label>
    <input type="text" id="textInput" value="Hello world 123!">

    <label for="regexInput">Регулярное выражение:</label>
    <input type="text" id="regexInput" value="\\d+">

    <button id="testButton">Проверить</button>

    <div id="result">Результат: </div>
  </div>
  <script src="/index.js"><\/script>
</body>
</html>`,
    "/styles.css": `body {
  font-family: sans-serif;
  background-color: #222;
  color: #eee;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
}

label {
  display: block;
  margin-bottom: 5px;
}

input[type="text"] {
  width: 100%;
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #555;
  background-color: #333;
  color: #eee;
}

button {
  padding: 10px 15px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 5px;
}

button:hover {
  background-color: #3e8e41;
}

#result {
  margin-top: 20px;
  font-weight: bold;
}`,
    "/index.js": `document.addEventListener('DOMContentLoaded', () => {
  const textInput = document.getElementById('textInput');
  const regexInput = document.getElementById('regexInput');
  const testButton = document.getElementById('testButton');
  const resultDiv = document.getElementById('result');

  testButton.addEventListener('click', () => {
    const text = textInput.value;
    const regexPattern = regexInput.value;

    try {
      const regex = new RegExp(regexPattern); // Создаем регулярное выражение из введенной строки
      const result = regex.test(text); // Проверяем соответствие текста регулярному выражению

      resultDiv.textContent = \`Результат: \${result}\`; // Выводим результат
    } catch (error) {
      resultDiv.textContent = \`Ошибка: \${error.message}\`; // Обрабатываем ошибки, если регулярное выражение невалидно
    }
  });
});`
  }}
  options={{
    showNavigator: false,
    showLineNumbers: true,
    editorHeight: 400
  }}
/>
