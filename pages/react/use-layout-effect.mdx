## TypeScript: useLayoutEffect ‚Äî –ö–æ–≥–¥–∞ –≤–∞–∂–µ–Ω –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å

–ü—Ä–∏–≤–µ—Ç, –¥—Ä—É–∑—å—è! –Ø—à–∞ –Ω–∞ —Å–≤—è–∑–∏. –°–µ–≥–æ–¥–Ω—è –º—ã –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö —Ç–æ–Ω–∫–∏—Ö, –Ω–æ –º–æ—â–Ω—ã—Ö —Ñ–∏—à–µ–∫ React ‚Äî —Ö—É–∫ `useLayoutEffect`. –ï—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–ª–∏–±–æ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å —Å "–º–µ—Ä—Ü–∞–Ω–∏–µ–º" –∏–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ –∏—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏, —Ç–æ —ç—Ç–æ—Ç —Ö—É–∫ ‚Äî –≤–∞—à —Å–ø–∞—Å–∏—Ç–µ–ª—å. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –±—É–∫–≤–∞–ª—å–Ω–æ "—Å—Ö–≤–∞—Ç–∏—Ç—å" DOM –∑–∞ –≥–æ—Ä–ª–æ *–¥–æ* —Ç–æ–≥–æ, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ–µ—Ç —á—Ç–æ-–ª–∏–±–æ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏–¥–µ–∞–ª—å–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º.

### ü§î useLayoutEffect: –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã ‚Äî –¥–∏–∑–∞–π–Ω–µ—Ä –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞, –∏ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –º–µ–±–µ–ª—å –≤ –∫–æ–º–Ω–∞—Ç–µ.
*   **`useEffect`** ‚Äî —ç—Ç–æ –∫–∞–∫ –µ—Å–ª–∏ –±—ã –≤—ã —Å–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑–∞–ª–∏ –∫–ª–∏–µ–Ω—Ç—É –ø—É—Å—Ç—É—é –∫–æ–º–Ω–∞—Ç—É, –ø–æ—Ç–æ–º –∑–∞–Ω–µ—Å–ª–∏ –º–µ–±–µ–ª—å, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–≤–∏–Ω—É—Ç—å –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º–µ–±–µ–ª—å –∑–∞–Ω–µ—Å–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–≤–∏–Ω—É—Ç—å –¥–∏–≤–∞–Ω –Ω–∞ 5 —Å–º), –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–∏–µ —É–≤–∏–¥–µ—Ç—å –µ–≥–æ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ.
*   **`useLayoutEffect`** ‚Äî —ç—Ç–æ –≤–∞—à –ª–∏—á–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ–±–µ–ª—å, –∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å, –æ–Ω –¥–µ–ª–∞–µ—Ç —ç—Ç–æ *—Å—Ä–∞–∑—É –∂–µ, –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –≤–æ–æ–±—â–µ –≤–æ–π–¥–µ—Ç –≤ –∫–æ–º–Ω–∞—Ç—É*. –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∫–æ–Ω–µ—á–Ω—ã–π, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –±–µ–∑ –≤—Å—è–∫–∏—Ö "–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö" —Å–æ—Å—Ç–æ—è–Ω–∏–π.

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏, `useLayoutEffect` –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ `useEffect` –ø–æ —Å–≤–æ–µ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–µ. –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –≤ –º–æ–º–µ–Ω—Ç–µ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
*   **`useEffect`**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä –æ–±–Ω–æ–≤–∏–ª DOM –∏ *–æ—Ç—Ä–∏—Å–æ–≤–∞–ª* –∏–∑–º–µ–Ω–µ–Ω–∏—è. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É.
*   **`useLayoutEffect`**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ React –æ–±–Ω–æ–≤–∏–ª DOM, –Ω–æ *–¥–æ —Ç–æ–≥–æ*, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä –æ—Ç—Ä–∏—Å—É–µ—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —á–∏—Ç–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∏–∑–º–µ–Ω—è—Ç—å –∏—Ö, –∏ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —É—á—Ç–µ–Ω—ã *–¥–æ* –ø–µ—Ä–≤–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –≤–∏–∑—É–∞–ª—å–Ω—ã–µ "–º–µ—Ä—Ü–∞–Ω–∏—è" (flicker).

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useLayoutEffect`?**
1.  **–ò–∑–º–µ—Ä–µ–Ω–∏–µ –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–≤**: –ö–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∏–ª–∏ –ø–æ–∑–∏—Ü–∏—é —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –Ω–æ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫, –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω.
2.  **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç DOM –∏ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –º–µ—Ä—Ü–∞–Ω–∏—è.
3.  **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ API –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏**: –ö–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä—è–º—É—é –º–∞–Ω–∏–ø—É–ª–∏—Ä—É—é—Ç DOM –∏ —Ç—Ä–µ–±—É—é—Ç —Ç–æ—á–Ω–æ–≥–æ –∑–Ω–∞–Ω–∏—è –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### üè† –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä: –ò–∑–±–µ–≥–∞–µ–º "–º–µ—Ä—Ü–∞–Ω–∏—è" –ø—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–º–µ—â–µ–Ω –Ω–∞ 100px –≤–ø—Ä–∞–≤–æ, –µ—Å–ª–∏ –µ–≥–æ —à–∏—Ä–∏–Ω–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 200px. –ï—Å–ª–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `useEffect`, –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–∏–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º –æ–Ω "–ø—Ä—ã–≥–Ω–µ—Ç" –≤ –Ω–æ–≤—É—é.

```typescript
import React, { useRef, useState, useEffect, useLayoutEffect } from 'react';

// –¢–∏–ø—ã –¥–ª—è –ø—Ä–æ–ø—Å–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
interface RepositionedBoxProps {
  initialText: string;
}

const RepositionedBox: React.FC<RepositionedBoxProps> = ({ initialText }) => {
  const boxRef = useRef<HTMLDivElement>(null); // –°—Å—ã–ª–∫–∞ –Ω–∞ DOM-—ç–ª–µ–º–µ–Ω—Ç
  const [offsetLeft, setOffsetLeft] = useState<number>(0);
  const [text, setText] = useState<string>(initialText);

  // useEffect - –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –º–µ—Ä—Ü–∞–Ω–∏–µ
  // useEffect(() => {
  //   if (boxRef.current) {
  //     const width = boxRef.current.offsetWidth;
  //     console.log(`useEffect: –®–∏—Ä–∏–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ ${width}px. –°–º–µ—â–∞–µ–º, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.`);
  //     if (width > 200 && offsetLeft === 0) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
  //       setOffsetLeft(100); // –°–º–µ—â–∞–µ–º –Ω–∞ 100px
  //     } else if (width <= 200 && offsetLeft !== 0) {
  //       setOffsetLeft(0);
  //     }
  //   }
  // }, [text, offsetLeft]); // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç text, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

  // useLayoutEffect - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ä—Ü–∞–Ω–∏–µ
  useLayoutEffect(() => {
    if (boxRef.current) {
      const width = boxRef.current.offsetWidth;
      console.log(`useLayoutEffect: –®–∏—Ä–∏–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ ${width}px. –°–º–µ—â–∞–µ–º, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.`);
      if (width > 200 && offsetLeft === 0) {
        setOffsetLeft(100); // –°–º–µ—â–∞–µ–º –Ω–∞ 100px
      } else if (width <= 200 && offsetLeft !== 0) {
        setOffsetLeft(0);
      }
    }
  }, [text, offsetLeft]); // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç text, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

  return (
    <div>
      <h3>–ü—Ä–∏–º–µ—Ä —Å RepositionedBox ({offsetLeft ? '–°–º–µ—â–µ–Ω' : '–ù–∞ –º–µ—Å—Ç–µ'})</h3>
      <div
        ref={boxRef}
        style={{
          border: '2px solid purple',
          padding: '10px',
          margin: '20px',
          display: 'inline-block', // –ß—Ç–æ–±—ã —à–∏—Ä–∏–Ω–∞ –±—ã–ª–∞ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
          transform: `translateX(${offsetLeft}px)`, // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ
          transition: 'transform 0.3s ease-out', // –î–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
        }}
      >
        <p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ: {text}</p>
        <button onClick={() => setText(prev => prev.length < 50 ? prev + ' –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç' : '–ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç')}>
          –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç
        </button>
      </div>
      <p>
        <small>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –∏ —Å–º–µ—â–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `useEffect` –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `useLayoutEffect`, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–∞–∑–Ω–∏—Ü—É.</small>
      </p>
    </div>
  );
};

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
// <RepositionedBox initialText="–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!" />
// <RepositionedBox initialText="–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—Å–∏—Ç—å 200px –≤ —à–∏—Ä–∏–Ω—É –∏ —Å–º–µ—Å—Ç–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç." />
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ, –µ—Å–ª–∏ –≤—ã –±—ã—Å—Ç—Ä–æ –∫–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç", –∏—Å–ø–æ–ª—å–∑—É—è `useEffect`, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ—Ç–∏—Ç—å, –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç —Å–Ω–∞—á–∞–ª–∞ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –∞ –∑–∞—Ç–µ–º "–ø–µ—Ä–µ–ø—Ä—ã–≥–∏–≤–∞–µ—Ç". –° `useLayoutEffect` —ç—Ç–æ—Ç "–ø—Ä—ã–∂–æ–∫" –±—É–¥–µ—Ç –Ω–µ–∑–∞–º–µ—Ç–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–æ–π–¥—É—Ç –¥–æ –ø–µ—Ä–≤–æ–≥–æ paint'–∞.

### üìê –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø—Ä–∏–º–µ—Ä: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "Read More"

–ß–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∑–∞–¥–∞—á–∞: –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π, –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –∏ –∫–Ω–æ–ø–∫—É "–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ". `useLayoutEffect` –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ç–æ–≥–æ, —Ç–∞–∫ –∫–∞–∫ –º—ã –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ—Ä–∏—Ç—å –≤—ã—Å–æ—Ç—É —Ç–µ–∫—Å—Ç–∞ *–¥–æ* –µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

```typescript
import React, { useRef, useState, useLayoutEffect, useCallback } from 'react';

interface ExpandableTextProps {
  content: string;
  maxHeightPx?: number; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö –¥–æ —Å–∫—Ä—ã—Ç–∏—è
}

const ExpandableText: React.FC<ExpandableTextProps> = ({ content, maxHeightPx = 100 }) => {
  const textRef = useRef<HTMLDivElement>(null);
  const [isExpanded, setIsExpanded] = useState<boolean>(false);
  const [showButton, setShowButton] = useState<boolean>(false);

  // –ò—Å–ø–æ–ª—å–∑—É–µ–º useLayoutEffect –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
  useLayoutEffect(() => {
    if (textRef.current) {
      // –ò–∑–º–µ—Ä—è–µ–º –ø–æ–ª–Ω—É—é –≤—ã—Å–æ—Ç—É —Ç–µ–∫—Å—Ç–∞
      const currentHeight = textRef.current.scrollHeight;
      // –ï—Å–ª–∏ –ø–æ–ª–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
      setShowButton(currentHeight > maxHeightPx);

      // –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç: –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å—Ç–∞–ª –∫–æ—Ä–æ—á–µ –∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞,
      // –º—ã –¥–æ–ª–∂–Ω—ã —Å–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ isExpanded
      if (currentHeight <= maxHeightPx && isExpanded) {
        setIsExpanded(false);
      }
    }
  }, [content, maxHeightPx, isExpanded]); // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–ª–∏ –º–∞–∫—Å. –≤—ã—Å–æ—Ç—ã

  const toggleExpand = useCallback(() => {
    setIsExpanded(prev => !prev);
  }, []);

  return (
    <div style={{ margin: '20px', border: '1px dashed gray', padding: '10px' }}>
      <h3>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç "–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ"</h3>
      <div
        ref={textRef}
        style={{
          maxHeight: isExpanded ? 'none' : `${maxHeightPx}px`, // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É
          overflow: 'hidden', // –û–±—Ä–µ–∑–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
          transition: 'max-height 0.3s ease-out', // –ü–ª–∞–≤–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ
        }}
      >
        <p>{content}</p>
      </div>
      {showButton && (
        <button onClick={toggleExpand} style={{ marginTop: '10px' }}>
          {isExpanded ? '–°–≤–µ—Ä–Ω—É—Ç—å' : '–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ'}
        </button>
      )}
    </div>
  );
};

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const longText = `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;
const shortText = `–ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–µ—Ä–Ω—É—Ç.`;

// <ExpandableText content={longText} maxHeightPx={100} />
// <ExpandableText content={shortText} maxHeightPx={100} />
```
–ó–¥–µ—Å—å `useLayoutEffect` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ–º `scrollHeight` —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–ª–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–¥–≤–∏–≥–∞ –∏–ª–∏ –º–µ—Ä—Ü–∞–Ω–∏—è.

### üêõ –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

1.  **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏**: –ü–æ—Å–∫–æ–ª—å–∫—É `useLayoutEffect` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ª—é–±–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –±—É–¥–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
    *   **–û—à–∏–±–∫–∞**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∏–ª–∏ –±–æ–ª—å—à–æ–≥–æ —Ü–∏–∫–ª–∞ –≤–Ω—É—Ç—Ä–∏ `useLayoutEffect`.
    *   **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ `useEffect` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `requestAnimationFrame` –¥–ª—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è DOM. `useLayoutEffect` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ "–ª–µ–≥–∫–∏–º".

    ```typescript
    // üëé –ü–ª–æ—Ö–æ:
    useLayoutEffect(() => {
      // –≠—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É, –µ—Å–ª–∏ items.length –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π
      const computedValue = items.map(item => performExpensiveCalculation(item)).reduce((acc, val) => acc + val, 0);
      setResult(computedValue);
    }, [items]);

    // üëç –•–æ—Ä–æ—à–æ:
    useEffect(() => { // –ò—Å–ø–æ–ª—å–∑—É–µ–º useEffect –¥–ª—è –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
      const computedValue = items.map(item => performExpensiveCalculation(item)).reduce((acc, val) => acc + val, 0);
      setResult(computedValue);
    }, [items]);
    ```

2.  **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã**: –ö–∞–∫ –∏ `useEffect`, `useLayoutEffect` –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, –µ—Å–ª–∏ –≤—ã –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–Ω –∑–∞–≤–∏—Å–∏—Ç, –±–µ–∑ –¥–æ–ª–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.
    *   **–û—à–∏–±–∫–∞**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ `useLayoutEffect` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ö—É–∫–∞, –≤—ã–∑—ã–≤–∞—è –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫.
    *   **–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (`setSomething(prev => ...)`) –∏–ª–∏ –≤–∫–ª—é—á–∞–π—Ç–µ –≤ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ç–æ–ª—å–∫–æ —Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ—Å—á–µ—Ç, –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ `useLayoutEffect` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

    ```typescript
    // üëé –ü–ª–æ—Ö–æ: –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, –µ—Å–ª–∏ myValue –≤—Å–µ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
    // useLayoutEffect(() => {
    //   if (ref.current) {
    //     // ... –¥–µ–ª–∞–µ–º —á—Ç–æ-—Ç–æ
    //     setMyValue(ref.current.offsetWidth); // –ï—Å–ª–∏ offsetWidth –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
    //   }
    // }, [myValue]); // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç myValue, –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ–±–Ω–æ–≤–ª—è–µ–º

    // üëç –•–æ—Ä–æ—à–æ: –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    useLayoutEffect(() => {
      if (boxRef.current) {
        const newOffset = boxRef.current.offsetWidth > 200 ? 100 : 0;
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
        setOffsetLeft(prevOffset => (prevOffset !== newOffset ? newOffset : prevOffset));
      }
    }, [text]); // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç text, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã
    ```

### ### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í—Ä–µ–º—è –∑–∞–∫—Ä–µ–ø–∏—Ç—å –∑–Ω–∞–Ω–∏—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ!

1.  **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–æ–ª–ª –≤ —á–∞—Ç–µ**:
    –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ChatWindow`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ (`messages: string[]`). –û—Ç–æ–±—Ä–∞–∂–∞–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useLayoutEffect`, —á—Ç–æ–±—ã –æ–∫–Ω–æ —á–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä–æ–ª–ª–∏–ª–æ—Å—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö, –±–µ–∑ –≤–∏–¥–∏–º–æ–≥–æ "–ø—Ä—ã–∂–∫–∞".
    *   –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useRef` –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏ `scrollHeight`/`scrollTop` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π.

2.  **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å —É—Å–µ—á–µ–Ω–∏–µ–º**:
    –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TruncatedHeader`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç `title: string`. –ï—Å–ª–∏ —à–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `div`) —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ 300px, —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω —É—Å–µ–∫–∞—Ç—å—Å—è –∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ (`...`). –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø–ª–∞–≤–Ω–æ –∏ –±–µ–∑ –º–µ—Ä—Ü–∞–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞.
    *   –ü–æ–¥—Å–∫–∞–∑–∫–∞: –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è `useRef` –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ `ResizeObserver` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å –≤ `useLayoutEffect` –∏–ª–∏ `useEffect`. –ù–æ —Å–∞–º–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É—Å–µ—á–µ–Ω–∏—è, –∑–∞–≤–∏—Å—è—â–µ–µ –æ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤, –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ `useLayoutEffect`.

3.  **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç—É–ª—Ç–∏–ø (–≤—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞)**:
    –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Tooltip` (–∫–æ—Ç–æ—Ä—ã–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `Button` –∏–ª–∏ `HoverArea` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞). –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–≤–æ–¥–∏—Ç –∫—É—Ä—Å–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç, –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç—É–ª—Ç–∏–ø. `Tooltip` –¥–æ–ª–∂–µ–Ω –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–≤–µ–ª–∏, –∏ *–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å*, —á—Ç–æ –æ–Ω –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ (viewport). –ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ `useLayoutEffect` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Ç—É–ª—Ç–∏–ø–∞ –∏–ª–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ/—Ä–µ—Å–∞–π–∑–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
    *   –ü–æ–¥—Å–∫–∞–∑–∫–∞: `getBoundingClientRect()` —ç–ª–µ–º–µ–Ω—Ç–∞-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –∏ `window.innerWidth`/`window.innerHeight` –¥–ª—è viewport. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useState` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ —Ç—É–ª—Ç–∏–ø–∞ (`top`, `left`).

### ### üí° –°–æ–≤–µ—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `useLayoutEffect` —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤–∞–º –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å DOM –ø–æ—Å–ª–µ –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è React'–æ–º, –Ω–æ *–¥–æ* —Ç–æ–≥–æ, –∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ—Ä–∏—Å—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É. –í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö `useEffect` —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ï—Å–ª–∏ –≤—ã —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å, –Ω–∞—á–Ω–∏—Ç–µ —Å `useEffect`. –ï—Å–ª–∏ –∑–∞–º–µ—Ç–∏—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ "–º–µ—Ä—Ü–∞–Ω–∏–µ" –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, —Ç–æ–≥–¥–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ `useLayoutEffect`. –ü–æ–º–Ω–∏—Ç–µ: —Å –±–æ–ª—å—à–æ–π —Å–∏–ª–æ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å!
### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Playground template="react" />
