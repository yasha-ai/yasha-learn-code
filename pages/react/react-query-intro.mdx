# TanStack Query (React Query): –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Å—Ç–µ–π—Ç–æ–º

**TanStack Query** (—Ä–∞–Ω–µ–µ React Query) ‚Äî —ç—Ç–æ, –ø–æ–∂–∞–ª—É–π, —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º React-—Å—Ç–µ–∫–µ. –û–Ω –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –≤—Å–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏.

### –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

–í React –µ—Å—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ —Å—Ç–µ–π—Ç–∞: **Client [State](/react/props-state)** (—Ç–µ–º–∞, —Ñ–æ—Ä–º—ã) –∏ **Server [State](/react/props-state)** (–¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î). –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useEffect` + `useState` –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".

```mermaid
sequenceDiagram
    participant UI as Component
    participant C as Cache (TanStack Query)
    participant API as Server API

    UI->>C: –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö (useQuery)
    alt –ï—Å—Ç—å –≤ –∫—ç—à–µ –∏ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ
        C-->>UI: –í–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞
    else –ö—ç—à –ø—É—Å—Ç –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª
        C->>API: Fetch Data
        API-->>C: Data Received
        C-->>UI: –û–±–Ω–æ–≤–∏—Ç—å UI –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫—ç—à
    end
```

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

–°–Ω–∞—á–∞–ª–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `QueryClientProvider`.

```tsx
import { useQuery } from '@tanstack/react-query';

function TodoList() {
  const { data, isLoading, error } = useQuery({
    queryKey: ['todos'], // –ö–ª—é—á –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
    queryFn: () => fetch('/api/todos').then(res => res.json()), // –°–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
  });

  if (isLoading) return <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>;
  if (error) return <span>–û—à–∏–±–∫–∞: {error.message}</span>;

  return (
    <ul>
      {data.map(todo => <li key={todo.id}>{todo.title}</li>)}
    </ul>
  );
}
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∏—á–∏

[Icon: Archive] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
[Icon: Refresh-Cw] **Stale-While-Revalidate:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–∫–∞ –≤ —Ñ–æ–Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ.
[Icon: Wifi-Off] **–ê–≤—Ç–æ-—Ä–µ—Ç—Ä–∞–∏:** –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É–ø–∞–ª –∏–∑-–∑–∞ —Å–µ—Ç–∏, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–∞–º–∞ –ø–æ–ø—Ä–æ–±—É–µ—Ç –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å.
[Icon: Zap] **Window Focus Refetching:** –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞.

[Icon: Star] TanStack Query –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–¥ —Ä–∞–±–æ—Ç—ã —Å API –Ω–∞ 50-70%, –∏–∑–±–∞–≤–ª—è—è –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Å–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ `useEffect` –∏ `if (loading)`.

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [Props State](/react/props-state)

### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Playground template="react" />
