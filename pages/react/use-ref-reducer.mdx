## TypeScript: useRef –∏ useReducer ‚Äì –î–≤–∞ –°–µ–∫—Ä–µ—Ç–Ω—ã—Ö –û—Ä—É–∂–∏—è React

–ü—Ä–∏–≤–µ—Ç, –±—Ä–∞—Ç–∏—à–∫–∞-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç! –°–µ–≥–æ–¥–Ω—è –º—ã —Å —Ç–æ–±–æ–π –∑–∞–≥–ª—è–Ω–µ–º –≤ –¥–≤–∞ –º–æ—â–Ω—ã—Ö, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω–µ–¥–æ–æ—Ü–µ–Ω—ë–Ω–Ω—ã—Ö —Ö—É–∫–∞ –≤ React: `useRef` –∏ `useReducer`. –ï—Å–ª–∏ `useState` ‚Äî —ç—Ç–æ —Ç–≤–æ–π –≤–µ—Ä–Ω—ã–π –º–æ–ª–æ—Ç–æ–∫ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á, —Ç–æ `useRef` –∏ `useReducer` ‚Äî —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Ç–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ç–µ–±–µ —Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –±–µ–∑ —à—É–º–∞ –∏ –ø—ã–ª–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —Ç–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Ö–æ–∂ –Ω–∞ –±–∞–æ–±–∞–± —Å –∫—É—á–µ–π –≤–µ—Ç–æ–∫. –ê —Å TypeScript –º—ã —Å–¥–µ–ª–∞–µ–º —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –µ—â—ë –æ—Å—Ç—Ä–µ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ!

### üß± useRef: –¢–≤–æ–π –õ–∏—á–Ω—ã–π –°–µ–π—Ñ –¥–ª—è –ù–µ–º–µ–Ω—è—é—â–∏—Ö—Å—è –ó–Ω–∞—á–µ–Ω–∏–π

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–≤–æ–µ–≥–æ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –µ—Å—Ç—å –ø–æ—Ç–∞–π–Ω–æ–π –∫–∞—Ä–º–∞—à–µ–∫, –∫—É–¥–∞ –æ–Ω –º–æ–∂–µ—Ç –ø–æ–ª–æ–∂–∏—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ç–∞–º —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –æ–Ω–æ *–Ω–µ* –≤—ã–∑–æ–≤–µ—Ç –Ω–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏, –∏ —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –∫ –Ω–µ–º—É –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è. –≠—Ç–æ –∏ –µ—Å—Ç—å `useRef`. –ì–ª–∞–≤–Ω–∞—è –µ–≥–æ –∑–∞–¥–∞—á–∞ ‚Äì –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–±–µ –∏–∑–º–µ–Ω—è–µ–º—ã–π (mutable) –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç "–∂–∏—Ç—å" –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

#### –ó–∞—á–µ–º –Ω–∞–º useRef?

1.  **–î–æ—Å—Ç—É–ø –∫ DOM-—ç–ª–µ–º–µ–Ω—Ç–∞–º**: –ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å DOM (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–ø—É—Ç, –∏–∑–º–µ—Ä–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç), `useRef` ‚Äî —Ç–≤–æ–π –ª—É—á—à–∏–π –¥—Ä—É–≥.
2.  **–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**: –¢–∞–π–º–µ—Ä—ã, ID –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤, —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–ø—Å–æ–≤, –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏.
3.  **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π**: –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.

#### –¢–∏–ø–∏–∑–∞—Ü–∏—è useRef —Å TypeScript

–°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ `ref.current`.

```typescript
import React, { useRef, useEffect, useCallback } from 'react';

/**
 * ### –ü—Ä–∏–º–µ—Ä 1: –§–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞ –∏–Ω–ø—É—Ç–∞ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
 * useRef –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ DOM-—ç–ª–µ–º–µ–Ω—Ç–∞–º.
 */
function FocusInputOnMount() {
  // –¢–∏–ø–∏–∑–∏—Ä—É–µ–º ref –¥–ª—è HTMLInputElement. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ–Ω null.
  const inputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ ref.current —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–µ–∂–¥–µ —á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ.
    if (inputRef.current) {
      inputRef.current.focus(); // –§–æ–∫—É—Å–∏—Ä—É–µ–º –∏–Ω–ø—É—Ç
      console.log('–ò–Ω–ø—É—Ç —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω!');
    }
  }, []); // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

  return (
    <div>
      <h3>–ü—Ä–∏–º–µ—Ä 1: –§–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞ –ò–Ω–ø—É—Ç–∞</h3>
      <input ref={inputRef} type="text" placeholder="–Ø —Å—Ñ–æ–∫—É—Å–∏—Ä—É—é—Å—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ!" />
    </div>
  );
}

/**
 * ### –ü—Ä–∏–º–µ—Ä 2: –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ useRef –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è mutable –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, ID —Ç–∞–π–º–µ—Ä–∞).
 */
function DelayedGreeting() {
  // Ref –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è ID —Ç–∞–π–º–µ—Ä–∞. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ undefined, —Ç–∞–∫ –∫–∞–∫ —Ç–∞–π–º–µ—Ä –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω.
  // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å number | undefined.
  const timerIdRef = useRef<ReturnType<typeof setTimeout>>();

  const startGreeting = useCallback(() => {
    // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –±—ã–ª
    if (timerIdRef.current) {
      clearTimeout(timerIdRef.current);
    }

    timerIdRef.current = setTimeout(() => {
      alert('–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ—è–≤–∏–ª—Å—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã!');
    }, 3000);
    console.log(`–¢–∞–π–º–µ—Ä —Å ID ${timerIdRef.current} –∑–∞–ø—É—â–µ–Ω.`);
  }, []);

  const stopGreeting = useCallback(() => {
    if (timerIdRef.current) {
      clearTimeout(timerIdRef.current);
      console.log(`–¢–∞–π–º–µ—Ä —Å ID ${timerIdRef.current} –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.`);
      timerIdRef.current = undefined; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º ID
    }
  }, []);

  useEffect(() => {
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    startGreeting();
    // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
    return () => stopGreeting();
  }, [startGreeting, stopGreeting]); // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è useEffect

  return (
    <div>
      <h3>–ü—Ä–∏–º–µ—Ä 2: –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ</h3>
      <p>–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã. ID —Ç–∞–π–º–µ—Ä–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `useRef`.</p>
      <button onClick={stopGreeting}>–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ</button>
    </div>
  );
}

export function UseRefExamples() {
  return (
    <>
      <FocusInputOnMount />
      <hr />
      <DelayedGreeting />
    </>
  );
}
```

#### üí° –¢–∏–ø–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞ —Å useRef: –ó–∞–±—ã—Ç—å –ø—Ä–æ `null`

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å DOM-—ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ `ref.current` –±—É–¥–µ—Ç `null` –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∏ React –Ω–µ "–ø—Ä–∏–∫—Ä–µ–ø–∏—Ç" `ref` –∫ —ç–ª–µ–º–µ–Ω—Ç—É. –ü–æ—ç—Ç–æ–º—É –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π `if (ref.current)` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.

### üé≠ useReducer: –ú–∞—Å—Ç–µ—Ä –ö–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –°–ª–æ–∂–Ω—ã–º –°–æ—Å—Ç–æ—è–Ω–∏–µ–º

–ï—Å–ª–∏ —Ç–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–∑–∞–≤—ë–ª—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ `useState`, –∏ –ª–æ–≥–∏–∫–∞ –∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—á–∞–ª–∞ –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å —Å–ø–∞–≥–µ—Ç—Ç–∏, —Ç–æ `useReducer` ‚Äî —Ç–≤–æ–π –ø–æ–≤–∞—Ä! –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ª–æ–∂–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –æ–±—Ä–∞–∑–æ–º, –∫–∞–∫ –≤ Redux. –¢—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ—à—å, –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ *–¥–æ–ª–∂–Ω–æ* –º–µ–Ω—è—Ç—å—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è—è "–∫–æ–º–∞–Ω–¥—ã" (—ç–∫—à–µ–Ω—ã), –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useReducer?

1.  **–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –ö–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ, –∏ –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π.
2.  **–°–≤—è–∑–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏, –æ—à–∏–±–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ ‚Äî –≤—Å—ë —ç—Ç–æ –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å.
3.  **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –í –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å `useContext` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ useReducer

*   **[State](/react/props-state)**: –û–±—ä–µ–∫—Ç, —Ö—Ä–∞–Ω—è—â–∏–π –≤—Å–µ –¥–∞–Ω–Ω—ã–µ.
*   **Action**: –û–±—ã—á–Ω—ã–π –æ–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π "—á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ" (–æ–±—ã—á–Ω–æ —Å –ø–æ–ª–µ–º `type` –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º `payload`).
*   **Reducer**: –ß–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è `(state, action) => newState`, –∫–æ—Ç–æ—Ä–∞—è –±–µ—Ä—ë—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —ç–∫—à–µ–Ω, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç *–Ω–æ–≤–æ–µ* —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
*   **dispatch**: –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é `useReducer` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —ç–∫—à–µ–Ω–æ–≤.

#### –¢–∏–ø–∏–∑–∞—Ü–∏—è useReducer —Å TypeScript

–ó–¥–µ—Å—å TypeScript —Å–∏—è–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ —è—Ä–∫–æ, –ø–æ–º–æ–≥–∞—è –Ω–∞–º —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å `state`, `action` –∏ `reducer` —Ñ—É–Ω–∫—Ü–∏—é.

```typescript
import React, { useReducer, useState } from 'react';

/**
 * ### –ü—Ä–∏–º–µ—Ä 3: –°—á—ë—Ç—á–∏–∫ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
 * useReducer –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—á—ë—Ç—á–∏–∫–∞.
 */

// 1. –¢–∏–ø –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
interface CounterState {
  count: number;
}

// 2. –¢–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —ç–∫—à–µ–Ω–æ–≤ (Discriminated Union)
type CounterAction =
  | { type: 'increment', payload?: number } // payload –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞, –µ—Å–ª–∏ –æ–Ω –≤—Å–µ–≥–¥–∞ –Ω–∞ 1
  | { type: 'decrement', payload?: number }
  | { type: 'reset' }
  | { type: 'set', payload: number }; // payload –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

// 3. –§—É–Ω–∫—Ü–∏—è-—Ä–µ–¥—é—Å–µ—Ä
function counterReducer(state: CounterState, action: CounterAction): CounterState {
  switch (action.type) {
    case 'increment':
      return { count: state.count + (action.payload || 1) };
    case 'decrement':
      return { count: state.count - (action.payload || 1) };
    case 'reset':
      return { count: 0 };
    case 'set':
      return { count: action.payload }; // TypeScript –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–ª–∏—á–∏–µ payload
    default:
      // TypeScript –ø–æ–º–æ–∂–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —ç–∫—à–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
      // –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —ç–∫—à–µ–Ω –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞
      const exhaustiveCheck: never = action;
      return state;
  }
}

// 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π useReducer
function CounterWithReducer() {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
  const initialCountState: CounterState = { count: 0 };
  const [state, dispatch] = useReducer(counterReducer, initialCountState);

  return (
    <div>
      <h3>–ü—Ä–∏–º–µ—Ä 3: –°—á—ë—Ç—á–∏–∫ —á–µ—Ä–µ–∑ useReducer</h3>
      <p>–¢–µ–∫—É—â–∏–π —Å—á—ë—Ç: {state.count}</p>
      <button onClick={() => dispatch({ type: 'increment' })}>+1</button>
      <button onClick={() => dispatch({ type: 'increment', payload: 5 })}>+5</button>
      <button onClick={() => dispatch({ type: 'decrement' })}>‚àí1</button>
      <button onClick={() => dispatch({ type: 'set', payload: 100 })}>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 100</button>
      <button onClick={() => dispatch({ type: 'reset' })}>–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
  );
}

/**
 * ### –ü—Ä–∏–º–µ—Ä 4: –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è useReducer
 * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
 */

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç initialArg –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç initialState.
function initLazyState(initialCount: number): CounterState {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å:', initialCount);
  return { count: initialCount + 10 }; // –î–æ–±–∞–≤–ª—è–µ–º 10 –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é
}

function LazyCounter() {
  const [inputValue, setInputValue] = useState(0); // –ò—Å–ø–æ–ª—å–∑—É–µ–º useState –¥–ª—è –≤–≤–æ–¥–∞

  // –ü–µ—Ä–µ–¥–∞—ë–º initLazyState –∫–∞–∫ —Ç—Ä–µ—Ç–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç
  const [state, dispatch] = useReducer(
    counterReducer, // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ —Ä–µ–¥—é—Å–µ—Ä
    inputValue,    // –ü–µ—Ä–µ–¥–∞—ë–º inputValue –∫–∞–∫ initialArg –¥–ª—è initLazyState
    initLazyState  // –§—É–Ω–∫—Ü–∏—è –ª–µ–Ω–∏–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  );

  return (
    <div>
      <h3>–ü—Ä–∏–º–µ—Ä 4: –õ–µ–Ω–∏–≤–∞—è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</h3>
      <p>
        –í–≤–µ–¥–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:{' '}
        <input
          type="number"
          value={inputValue}
          onChange={(e) => setInputValue(Number(e.target.value))}
        />
      </p>
      <p>–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–ª—é—Å 10 –æ—Ç –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ): {state.count}</p>
      <button onClick={() => dispatch({ type: 'increment' })}>+1</button>
      <button onClick={() => dispatch({ type: 'reset' })}>–°–±—Ä–æ—Å–∏—Ç—å</button>
      <p>
        –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, `initLazyState` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ,
        –¥–∞–∂–µ –µ—Å–ª–∏ `inputValue` –º–µ–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è.
      </p>
    </div>
  );
}

export function UseReducerExamples() {
  return (
    <>
      <CounterWithReducer />
      <hr />
      <LazyCounter />
    </>
  );
}
```

#### üí° –¢–∏–ø–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞ —Å useReducer: –ú—É—Ç–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

–ö–∞–∫ –∏ –≤ Redux, —Ä–µ–¥—é—Å–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å *—á–∏—Å—Ç—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏*. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é (–º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ). –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å *–Ω–æ–≤–æ–µ* —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ò—Å–ø–æ–ª—å–∑—É–π –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è (`...`) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤.

```typescript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ú—É—Ç–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
// function badReducer(state: { count: number }, action: any): { count: number } {
//   state.count += 1; // –ú—É—Ç–∞—Ü–∏—è! –≠—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã
//   return state;
// }

// –ü–†–ê–í–ò–õ–¨–ù–û: –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
// function goodReducer(state: { count: number }, action: any): { count: number } {
//   return { ...state, count: state.count + 1 }; // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
// }
```

### ü§ù –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: useRef vs useReducer

*   **`useRef`**: –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ *–Ω–µ* –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä. –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø—Ä—è–º–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å DOM, —Ö—Ä–∞–Ω–µ–Ω–∏—è ID —Ç–∞–π–º–µ—Ä–æ–≤, —Å—Ç–∞—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ —Ç.–¥.
*   **`useReducer`**: –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –≥–¥–µ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –∏–ª–∏ –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–µ–π. –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ñ–æ—Ä–º, –∫–æ—Ä–∑–∏–Ω, —Å–ª–æ–∂–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤.

–í—ã–±–∏—Ä–∞–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥ –∑–∞–¥–∞—á—É, –∏ —Ç–≤–æ–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥—É—Ç —Å—Ç—Ä–æ–π–Ω—ã–º–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏!

---

### ### üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞

–í—Ä–µ–º—è –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ª—É—à–∞–µ—à—å, –∞ –ø–æ–Ω–∏–º–∞–µ—à—å!

1.  **–ó–∞–¥–∞–Ω–∏–µ —Å `useRef`:**
    –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MeasuringBox`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useRef`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ `div`. –í `useEffect` –∏–∑–º–µ—Ä—å —à–∏—Ä–∏–Ω—É –∏ –≤—ã—Å–æ—Ç—É —ç—Ç–æ–≥–æ `div` –∏ –æ—Ç–æ–±—Ä–∞–∑–∏ –∏—Ö. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞, –æ–±–Ω–æ–≤–ª—è–π –∏–∑–º–µ—Ä–µ–Ω–∏—è.
    *   **–ü–æ–¥—Å–∫–∞–∑–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π `ResizeObserver` –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `window.resize`. –ù–µ –∑–∞–±—É–¥—å –ø—Ä–æ –æ—á–∏—Å—Ç–∫—É —Å–ª—É—à–∞—Ç–µ–ª–µ–π!
2.  **–ó–∞–¥–∞–Ω–∏–µ —Å `useReducer`:**
    –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShoppingCart` (–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useReducer` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º —Ç–æ–≤–∞—Ä–æ–≤.
    *   –°–æ—Å—Ç–æ—è–Ω–∏–µ: `items: { id: string; name: string; price: number; quantity: number }[]`.
    *   –î–µ–π—Å—Ç–≤–∏—è (`actions`):
        *   `'ADD_ITEM'`: –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä –∏–ª–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.
        *   `'REMOVE_ITEM'`: –£–¥–∞–ª—è–µ—Ç —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.
        *   `'UPDATE_QUANTITY'`: –ò–∑–º–µ–Ω—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –ø–æ `id`.
        *   `'CLEAR_CART'`: –û—á–∏—â–∞–µ—Ç –≤—Å—é –∫–æ—Ä–∑–∏–Ω—É.
    *   –°–æ–∑–¥–∞–π –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ —Ñ–æ—Ä–º—É –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç—Ç–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.
3.  **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ó–∞–¥–∞–Ω–∏–µ (`useRef` + `useReducer`):**
    –£–ª—É—á—à–∏ `ShoppingCart` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è. –î–æ–±–∞–≤—å –ø–æ–ª–µ "Total Price" (–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å). –ò—Å–ø–æ–ª—å–∑—É–π `useRef` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "–∏—Å—Ç–æ—Ä–∏–∏" –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω—ã —Å –∫–æ—Ä–∑–∏–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π —ç–∫—à–µ–Ω–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ "–î–æ–±–∞–≤–ª–µ–Ω —Ç–æ–≤–∞—Ä X", "–£–¥–∞–ª—ë–Ω —Ç–æ–≤–∞—Ä Y"). –≠—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è –Ω–µ –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

---

### ### üí° –°–æ–≤–µ—Ç

–í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π `useState` –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π. `useReducer` –≤–≤–æ–¥–∏—Ç –±–æ–ª—å—à–µ –∫–æ–¥–∞ –∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π, –Ω–æ –µ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º—ã—Ö —á–∞—Å—Ç–µ–π. `useRef` –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ç–µ–±–µ –Ω—É–∂–µ–Ω —Å—Ç–∞–±–∏–ª—å–Ω—ã–π, –∏–∑–º–µ–Ω—è–µ–º—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ—Ä–µ–Ω–¥–µ—Ä, –∏–ª–∏ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å DOM. –ù–µ –ø–µ—Ä–µ—É—Å–µ—Ä–¥—Å—Ç–≤—É–π —Å –ø—Ä—è–º—ã–º DOM-–º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º, React –æ–±—ã—á–Ω–æ –¥–∞—ë—Ç –±–æ–ª–µ–µ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º.

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [Props State](/react/props-state)

### –ü—Ä–∞–∫—Ç–∏–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

<Playground template="react" />
