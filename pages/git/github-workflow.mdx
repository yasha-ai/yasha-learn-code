## Git: GitHub Workflow

### Задача: Эффективная командная разработка через Pull Requests

Научиться использовать "GitHub Workflow" – стандартный подход к совместной работе над проектами, сфокусированный на ветвлении, Pull Request'ах и ревью кода. Это обеспечивает чистоту основного кода и контролируемый процесс внесения изменений, минимизируя риски.

### Команды и Концепции

В основе GitHub Workflow лежит повторяющийся цикл: создать ветку → сделать изменения → запросить ревью → объединить изменения.

1.  **Создание Ветки Функции (Feature Branch)**: Все новые изменения начинаются в отдельной ветке, изолируя работу.
2.  **Коммиты**: Фиксируем изменения в этой ветке, сохраняя историю работы.
3.  **Push Ветки**: Отправляем ветку на GitHub, делая ее доступной для других.
4.  **Pull Request (PR)**: Запрашиваем ревью кода у коллег и предлагаем свои изменения для объединения с основной веткой (обычно `main` или `master`).
5.  **Ревью и Доработка**: Обсуждение, комментарии, внесение правок в ту же ветку по результатам ревью.
6.  **Мерж PR**: Объединение ветки с `main` после одобрения и успешного прохождения всех проверок.
7.  **Очистка**: Удаление ветки после мержа для поддержания порядка в репозитории.
8.  **Синхронизация `main`**: Обновление локальной `main` ветки, чтобы быть в курсе последних изменений.

### Примеры Команд и Порядок Действий

Представим, что мы добавляем новую функциональность "Авторизация через Google".

1.  **Убедитесь, что ваша локальная ветка `main` актуальна:**
    ```bash
    git checkout main
    git pull origin main
    ```
    *Последствия:* Переключает вас на `main` и загружает все последние изменения из удаленного репозитория. Это критично для предотвращения будущих конфликтов.

2.  **Создайте новую ветку для вашей функции:**
    ```bash
    git checkout -b feature/google-auth
    ```
    *Последствия:* Создает новую ветку `feature/google-auth` на основе текущей (`main`) и сразу же переключает на нее.

3.  **Разрабатывайте и фиксируйте изменения:**
    ```bash
    # Ваши изменения в коде...
    git add .
    git commit -m "feat: implement Google authentication"
    ```
    *Последствия:* Добавляет все измененные файлы в индекс и создает коммит с описательным сообщением. Делайте это часто и понемногу.

4.  **Отправьте вашу ветку на GitHub:**
    ```bash
    git push -u origin feature/google-auth
    ```
    *Последствия:* Создает удаленную ветку `feature/google-auth` на GitHub и связывает ее с вашей локальной. Флаг `-u` (или `--set-upstream`) нужен один раз.

5.  **Создайте Pull Request на GitHub:**
    Перейдите в веб-интерфейс GitHub, найдите свою ветку и нажмите "Compare & pull request". Напишите понятное описание PR.

6.  **После ревью, если нужны правки, сделайте их и обновите ветку:**
    ```bash
    # Ваши новые изменения в коде...
    git add .
    git commit -m "fix: address review comments on Google auth"
    git push
    ```
    *Последствия:* Добавляет новые коммиты в вашу ветку на GitHub, автоматически обновляя Pull Request.

7.  **Мерж Pull Request (после одобрения) и очистка:**
    Мерж обычно происходит на GitHub (кнопка "Merge pull request").

    Локально удалите ветку (после успешного мержа):
    ```bash
    git checkout main
    git branch -d feature/google-auth
    ```
    *Последствия:* Переключает на `main` и удаляет локальную ветку. Это возможно только после того, как она будет полностью объединена.

    Удалите удаленную ветку (также можно сделать через GitHub UI):
    ```bash
    git push origin --delete feature/google-auth
    ```
    *Последствия:* Удаляет ветку с GitHub, поддерживая репозиторий в чистоте.

### Визуализация Процесса

```
main: A -- B ------------------ D (merge) -- E
           \                 /
feature:    C -- C' -- C''  /
```
Здесь `A` и `B` – коммиты в `main`. `C`, `C'`, `C''` – коммиты в ветке `feature/google-auth`. После мержа они объединяются в `D` на `main`.

### Типичные Проблемы

*   **Конфликты мерджа**: Возникают, если ветки `main` и ваша `feature` изменяли одни и те же строки. Решаются вручную.
*   **Забытые коммиты**: Не отправили все изменения в PR. Проверяйте `git status` и `git log`.
*   **Работа напрямую в `main`**: Нарушает процесс ревью и может привести к "сломанному" коду в основном репозитории. **НИКОГДА ТАК НЕ ДЕЛАЙТЕ!**

### Git Best Practices

*   **Короткоживущие ветки**: Создавайте ветки для каждой фичи/исправления.
*   **Частые коммиты**: Сохраняйте прогресс маленькими, логически завершенными порциями.
*   **Описательные сообщения коммитов**: Пишите ясно, что делает каждый коммит, используя конвенции (например, Conventional Commits).
*   **Регулярная синхронизация**: Периодически объединяйте `main` в свою ветку, чтобы избежать больших конфликтов.
    ```bash
    git checkout feature/google-auth
    git merge main # или git rebase main
    ```
    *Последствия:* Объединяет изменения из `main` в вашу текущую ветку, облегчая финальный мерж.

### Практика

1.  Создайте новый репозиторий на GitHub.
2.  Клонируйте его локально.
3.  Создайте ветку `feature/add-readme`.
4.  Добавьте файл `README.md` с каким-либо содержимым.
5.  Закоммитьте и отправьте ветку на GitHub.
6.  Создайте Pull Request через веб-интерфейс GitHub.
7.  "Замержите" свой PR на GitHub.
8.  Локально переключитесь на `main`, удалите свою локальную и удаленную ветки.